"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[374],{26374:function(e,l,t){t.r(l),t.d(l,{default:function(){return me}});var o=t(66252),a=t(49963),n=t(3577);const d={class:"equipment-manager border-start border-end"},i={class:"w-100 d-flex"},s={key:0,class:"text-start d-flex flex-fill"},_={class:"d-flex",style:{width:"200px"}},u=(0,o._)("label",{style:{width:"112px","font-size":"20px",padding:"4px","margin-left":"14px"}},[(0,o._)("i",{class:"bi bi-three-dots-vertical"}),(0,o.Uk)("排序 ")],-1),m={key:1,class:"text-start px-1 flex-fill"},r={class:""},p={class:"w-100 d-flex flex-row"},c={class:"w-100"},w={class:"d-flex w-100"},g={class:"d-flex w-100 mx-1"},h={class:"w-50 border p-2"},V=(0,o._)("h5",{class:"w-100 border rounded bg-primary text-light"},"INPUT",-1),q={class:"w-50 border p-2 mx-1"},f=(0,o._)("h5",{class:"w-100 border rounded bg-info text-light"},"OUTPUT",-1),b={class:"hs-signals d-flex"},E=(0,o._)("div",{class:"mx-3"},"交握訊號-EQ",-1),S={class:"hs-signals d-flex"},C=(0,o._)("div",{class:"mx-3"},"交握訊號-AGV",-1),O={style:{position:"absolute",height:"100vh",width:"100vw",overflow:"hidden"}},W=["src"],y=["src"];function U(e,l,t,U,I,T){const v=(0,o.up)("b-button"),D=(0,o.up)("el-option"),L=(0,o.up)("el-select"),R=(0,o.up)("el-radio-button"),k=(0,o.up)("el-radio-group"),A=(0,o.up)("EqGroupEditor"),Q=(0,o.up)("el-table-column"),H=(0,o.up)("b-form-input"),P=(0,o.up)("el-button"),N=(0,o.up)("el-checkbox"),x=(0,o.up)("el-input"),G=(0,o.up)("el-table"),M=(0,o.up)("el-divider"),B=(0,o.up)("el-form-item"),j=(0,o.up)("el-form"),Y=(0,o.up)("el-drawer"),$=(0,o.up)("b-tab"),F=(0,o.up)("b-tabs"),z=(0,o.up)("el-dialog"),K=(0,o.up)("EqSelectForm"),Z=(0,o.Q2)("loading");return(0,o.wy)(((0,o.wg)(),(0,o.iD)("div",d,[(0,o._)("div",i,["eq-list"==I.displayMode?((0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(v,{variant:"primary",squared:"",onClick:T.SaveSettingHandler},{default:(0,o.w5)((()=>[(0,o.Uk)("儲存設定")])),_:1},8,["onClick"]),(0,o.Wm)(v,{variant:"info",squared:"",class:"mx-1",onClick:T.AddNewEqHandler},{default:(0,o.w5)((()=>[(0,o.Uk)("新增設備")])),_:1},8,["onClick"]),(0,o.Wm)(v,{squared:"",onClick:T.ReloadSettingsHandler},{default:(0,o.w5)((()=>[(0,o.Uk)("重新載入")])),_:1},8,["onClick"]),(0,o._)("div",_,[u,(0,o.Wm)(L,{modelValue:I.sortBy,"onUpdate:modelValue":l[0]||(l[0]=e=>I.sortBy=e),size:"large"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{label:"設備名稱",value:"eqName"}),(0,o.Wm)(D,{label:"Tag ID",value:"tag"}),(0,o.Wm)(D,{label:"允入車款",value:"vehicleType"}),(0,o.Wm)(D,{label:"貨物類型",value:"cargoType"})])),_:1},8,["modelValue"])])])):(0,o.kq)("",!0),"eq-group"==I.displayMode?((0,o.wg)(),(0,o.iD)("p",m,[(0,o.Wm)(v,{variant:"primary",squared:"",onClick:T.SaveGroupsClicked},{default:(0,o.w5)((()=>[(0,o.Uk)("儲存設定")])),_:1},8,["onClick"]),(0,o.Wm)(v,{squared:"",onClick:T.ReloadSettingsHandler},{default:(0,o.w5)((()=>[(0,o.Uk)("重新載入")])),_:1},8,["onClick"])])):(0,o.kq)("",!0),(0,o.Wm)(k,{modelValue:I.displayMode,"onUpdate:modelValue":l[1]||(l[1]=e=>I.displayMode=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(R,{size:"large",label:"設備列表",value:"eq-list"}),(0,o.Wm)(R,{size:"large",label:"設備群組",value:"eq-group"})])),_:1},8,["modelValue"])]),(0,o.wy)((0,o.Wm)(A,{ref:"group-editor"},null,512),[[a.F8,"eq-group"==I.displayMode]]),(0,o.wy)((0,o.Wm)(G,{"header-cell-style":{color:"white",backgroundColor:"rgb(13, 110, 253)",fontSize:"12px"},data:"eqName"==I.sortBy?I.EqDatas:T.SortedEQDataBySortBy,"row-key":I.rowKey,"row-class-name":T.GetRowClassName,size:"small",border:"","scrollbar-always-on":"",height:"77vh","table-layout":"fixed",ref:"eqTable",style:{width:"100vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)(Q,{label:"Index",prop:"index",width:"80",align:"center",fixed:"left"}),(0,o.Wm)(Q,{label:"設備名稱",prop:"Name",width:"210",fixed:"left"},{default:(0,o.w5)((e=>[(0,o._)("div",r,[(0,o.Wm)(H,{state:I.ValidName(e.row),modelValue:e.row.Name,"onUpdate:modelValue":l=>e.row.Name=l,placeholder:"設備名稱",style:{width:"160px"},"no-wheel":!0,size:"sm",min:1,onInput:l=>T.HandleEqNameChange(e.row,e.row.Name)},null,8,["state","modelValue","onUpdate:modelValue","onInput"]),(0,o.Wm)(P,{class:"my-1",size:"small",onClick:l=>T.HandleUseMapDataDisplayName(e.row.TagID)},{default:(0,o.w5)((()=>[(0,o.Uk)("使用圖資設定")])),_:2},1032,["onClick"])])])),_:1}),(0,o.Wm)(Q,{label:"Tag ID",prop:"TagID",width:"120",align:"center",fixed:"left"},{default:(0,o.w5)((e=>[(0,o.Wm)(H,{type:"number",state:I.ValidTag(e.row),modelValue:e.row.TagID,"onUpdate:modelValue":l=>e.row.TagID=l,modelModifiers:{number:!0},placeholder:"tag id",size:"sm",min:1},null,8,["state","modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(Q,{label:"層",prop:"Height",width:"80",align:"center",fixed:"left"},{default:(0,o.w5)((e=>[(0,o.Wm)(L,{modelValue:e.row.Height,"onUpdate:modelValue":l=>e.row.Height=l},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{label:"1",value:0}),(0,o.Wm)(D,{label:"2",value:1})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(Q,{label:"下游設備",width:"850"},{default:(0,o.w5)((e=>[(0,o._)("div",p,[(0,o.Wm)(L,{size:"small",modelValue:e.row.ValidDownStreamEndPointNames,"onUpdate:modelValue":l=>e.row.ValidDownStreamEndPointNames=l,multiple:"",placeholder:"Select",style:{width:"1000px"}},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(T.GetAvaluableEqNameList(e.row.Name),(e=>((0,o.wg)(),(0,o.j4)(D,{key:e,label:e,value:e},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"]),(0,o.Wm)(P,{class:"mx-1",size:"small",type:"default",onClick:()=>{e.row.ValidDownStreamEndPointNames=T.GetAvaluableEqNameList(e.row.Name)}},{default:(0,o.w5)((()=>[(0,o.Uk)("使用所有設備")])),_:2},1032,["onClick"]),(0,o.Wm)(P,{size:"small",type:"danger",onClick:()=>{e.row.ValidDownStreamEndPointNames=[]}},{default:(0,o.w5)((()=>[(0,o.Uk)("清除")])),_:2},1032,["onClick"])])])),_:1}),(0,o.Wm)(Q,{label:"允入車款",width:"120"},{default:(0,o.w5)((e=>[(0,o.Wm)(L,{size:"small",modelValue:e.row.Accept_AGV_Type,"onUpdate:modelValue":l=>e.row.Accept_AGV_Type=l},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{value:0,label:"0-不限"}),(0,o.Wm)(D,{value:1,label:"1-叉車AGV"}),(0,o.Wm)(D,{value:2,label:"2-潛盾AGV"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(Q,{label:"可移載貨物類型",width:"130"},{default:(0,o.w5)((e=>[(0,o.Wm)(L,{size:"small",modelValue:e.row.EQAcceeptCargoType,"onUpdate:modelValue":l=>e.row.EQAcceeptCargoType=l},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{value:0,label:"0-不限"}),(0,o.Wm)(D,{value:200,label:"200-Tray"}),(0,o.Wm)(D,{value:201,label:"201-子母框"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(Q,{label:"具貨物升降機構",width:"100",align:"center"},{default:(0,o.w5)((e=>[(0,o.Wm)(N,{modelValue:e.row.HasCstSteeringMechanism,"onUpdate:modelValue":l=>e.row.HasCstSteeringMechanism=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(Q,{label:"雙Port設備",width:"100",align:"center"},{default:(0,o.w5)((e=>[(0,o.Wm)(N,{modelValue:e.row.IsOneOfDualPorts,"onUpdate:modelValue":l=>e.row.IsOneOfDualPorts=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(Q,{label:"AnotherPortTagNumber",width:"80",align:"center"},{default:(0,o.w5)((e=>[(0,o.Wm)(x,{type:"number",modelValue:e.row.AnotherPortTagNumber,"onUpdate:modelValue":l=>e.row.AnotherPortTagNumber=l,disabled:!e.row.IsOneOfDualPorts},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),(0,o.Wm)(Q,{label:"可取貨狀態識別碼",width:"80",align:"center"},{default:(0,o.w5)((e=>[(0,o.Wm)(x,{type:"number",modelValue:e.row.AllowUnloadPortTypeNumber,"onUpdate:modelValue":l=>e.row.AllowUnloadPortTypeNumber=l,disabled:!e.row.IsOneOfDualPorts},null,8,["modelValue","onUpdate:modelValue","disabled"])])),_:1}),(0,o.Wm)(Q,{label:"空框/實框 訊號檢查",width:"100",align:"center"},{default:(0,o.w5)((e=>[(0,o.Wm)(N,{modelValue:e.row.RackCapcityCheck,"onUpdate:modelValue":l=>e.row.RackCapcityCheck=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(Q,{label:"操作","min-width":"100",fixed:"right"},{default:(0,o.w5)((e=>[(0,o._)("div",null,[(0,o.Wm)(P,{size:"small",type:"default",onClick:l=>T.ConnectionSettingBtnHandle(e.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("連線設定")])),_:2},1032,["onClick"]),(0,o.Wm)(P,{size:"small",type:"danger",onClick:l=>T.RemoveHandle(e.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("移除")])),_:2},1032,["onClick"]),(0,o.Wm)(P,{size:"small",type:"text",onClick:l=>T.CopySettingHandle(e.row)},{default:(0,o.w5)((()=>[(0,o.Uk)("複製")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["header-cell-style","data","row-key","row-class-name"]),[[a.F8,"eq-list"==I.displayMode]]),(0,o.Wm)(Y,{size:"50%","z-index":1,modelValue:I.connection_setting_drawer,"onUpdate:modelValue":l[47]||(l[47]=e=>I.connection_setting_drawer=e),title:`${I.selected_eq_option.Name}-連線設定`},{default:(0,o.w5)((()=>[(0,o._)("div",c,[(0,o.Wm)(j,{"label-position":"left","label-width":"120"},{default:(0,o.w5)((()=>[(0,o.Wm)(M,null,{default:(0,o.w5)((()=>[(0,o.Uk)("通訊 Protocol")])),_:1}),(0,o.Wm)(B,{label:"通訊方式"},{default:(0,o.w5)((()=>[(0,o.Wm)(L,{modelValue:I.selected_eq_option.ConnOptions.ConnMethod,"onUpdate:modelValue":l[2]||(l[2]=e=>I.selected_eq_option.ConnOptions.ConnMethod=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{label:"Modbus TCP",value:0}),(0,o.Wm)(D,{label:"Modbus RTU",value:1}),(0,o.Wm)(D,{label:"TCP/IP",value:2}),(0,o.Wm)(D,{label:"Serial Port",value:3}),(0,o.Wm)(D,{label:"MC Protocol",value:5})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"IP"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{disabled:1==I.selected_eq_option.ConnOptions.ConnMethod,modelValue:I.selected_eq_option.ConnOptions.IP,"onUpdate:modelValue":l[3]||(l[3]=e=>I.selected_eq_option.ConnOptions.IP=e)},null,8,["disabled","modelValue"])])),_:1}),(0,o.Wm)(B,{label:"PORT"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{disabled:1==I.selected_eq_option.ConnOptions.ConnMethod,modelValue:I.selected_eq_option.ConnOptions.Port,"onUpdate:modelValue":l[4]||(l[4]=e=>I.selected_eq_option.ConnOptions.Port=e),modelModifiers:{number:!0}},null,8,["disabled","modelValue"])])),_:1}),(0,o.Wm)(B,{label:"COMPORT"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{disabled:0==I.selected_eq_option.ConnOptions.ConnMethod,modelValue:I.selected_eq_option.ConnOptions.ComPort,"onUpdate:modelValue":l[5]||(l[5]=e=>I.selected_eq_option.ConnOptions.ComPort=e)},null,8,["disabled","modelValue"])])),_:1}),(0,o.Wm)(M,null,{default:(0,o.w5)((()=>[(0,o.Uk)("IO位置")])),_:1}),(0,o.Wm)(B,{label:"STATUS_IO_SPEC"},{default:(0,o.w5)((()=>[(0,o._)("div",w,[(0,o._)("i",{class:"bi bi-question-circle cursor-pointer",onClick:l[6]||(l[6]=(...e)=>T.HandleInfoIconOfStatusSpecClecked&&T.HandleInfoIconOfStatusSpecClecked(...e))}),(0,o.Wm)(L,{class:"mx-2",modelValue:I.selected_eq_option.IOLocation.STATUS_IO_SPEC_VERSION,"onUpdate:modelValue":l[7]||(l[7]=e=>I.selected_eq_option.IOLocation.STATUS_IO_SPEC_VERSION=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{value:1,label:"V1"}),(0,o.Wm)(D,{value:2,label:"V2"})])),_:1},8,["modelValue"]),(0,o.Wm)(P,{onClick:l[8]||(l[8]=()=>{I.applyTo="status_io_spec",I.showEqSelectForm=!0})},{default:(0,o.w5)((()=>[(0,o.Uk)("套用至..")])),_:1})])])),_:1}),(0,o.Wm)(B,{label:"IO數量"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.ConnOptions.Input_RegisterNum,"onUpdate:modelValue":l[9]||(l[9]=e=>I.selected_eq_option.ConnOptions.Input_RegisterNum=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"PLC Base"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{modelValue:I.selected_eq_option.ConnOptions.IsPLCAddress_Base_1,"onUpdate:modelValue":l[10]||(l[10]=e=>I.selected_eq_option.ConnOptions.IsPLCAddress_Base_1=e)},null,8,["modelValue"])])),_:1}),(0,o._)("div",g,[(0,o._)("div",h,[V,1==I.selected_eq_option.IOLocation.STATUS_IO_SPEC_VERSION?((0,o.wg)(),(0,o.j4)(j,{key:0,"label-position":"left","label-width":"120"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{label:"Start Index"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.ConnOptions.Input_StartRegister,"onUpdate:modelValue":l[11]||(l[11]=e=>I.selected_eq_option.ConnOptions.Input_StartRegister=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(M),(0,o.Wm)(B,{label:"Load_Request"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Load_Request,"onUpdate:modelValue":l[12]||(l[12]=e=>I.selected_eq_option.IOLocation.Load_Request=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Unload_Request"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Unload_Request,"onUpdate:modelValue":l[13]||(l[13]=e=>I.selected_eq_option.IOLocation.Unload_Request=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Port_Exist"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Port_Exist,"onUpdate:modelValue":l[14]||(l[14]=e=>I.selected_eq_option.IOLocation.Port_Exist=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Eqp_Status_Down"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Eqp_Status_Down,"onUpdate:modelValue":l[15]||(l[15]=e=>I.selected_eq_option.IOLocation.Eqp_Status_Down=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Eqp_Status_Run"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Eqp_Status_Run,"onUpdate:modelValue":l[16]||(l[16]=e=>I.selected_eq_option.IOLocation.Eqp_Status_Run=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Eqp_Status_Idle"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Eqp_Status_Idle,"onUpdate:modelValue":l[17]||(l[17]=e=>I.selected_eq_option.IOLocation.Eqp_Status_Idle=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"L_REQ"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.HS_EQ_L_REQ,"onUpdate:modelValue":l[18]||(l[18]=e=>I.selected_eq_option.IOLocation.HS_EQ_L_REQ=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"U_REQ"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.HS_EQ_U_REQ,"onUpdate:modelValue":l[19]||(l[19]=e=>I.selected_eq_option.IOLocation.HS_EQ_U_REQ=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"READY"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.HS_EQ_READY,"onUpdate:modelValue":l[20]||(l[20]=e=>I.selected_eq_option.IOLocation.HS_EQ_READY=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"LOW_READY"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.HS_EQ_LOW_READY,"onUpdate:modelValue":l[21]||(l[21]=e=>I.selected_eq_option.IOLocation.HS_EQ_LOW_READY=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Empty CST OUT"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Empty_CST,"onUpdate:modelValue":l[22]||(l[22]=e=>I.selected_eq_option.IOLocation.Empty_CST=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Full CST OUT"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Full_CST,"onUpdate:modelValue":l[23]||(l[23]=e=>I.selected_eq_option.IOLocation.Full_CST=e)},null,8,["modelValue"])])),_:1})])),_:1})):(0,o.kq)("",!0),2==I.selected_eq_option.IOLocation.STATUS_IO_SPEC_VERSION?((0,o.wg)(),(0,o.j4)(j,{key:1,"label-position":"left","label-width":"120"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{label:"Start Index"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.ConnOptions.Input_StartRegister,"onUpdate:modelValue":l[24]||(l[24]=e=>I.selected_eq_option.ConnOptions.Input_StartRegister=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(M),(0,o.Wm)(B,{label:"Load_Request"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Load_Request,"onUpdate:modelValue":l[25]||(l[25]=e=>I.selected_eq_option.IOLocation.Load_Request=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Unload_Request"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Unload_Request,"onUpdate:modelValue":l[26]||(l[26]=e=>I.selected_eq_option.IOLocation.Unload_Request=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Port_Exist"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Port_Exist,"onUpdate:modelValue":l[27]||(l[27]=e=>I.selected_eq_option.IOLocation.Port_Exist=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Up_Pose"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Up_Pose,"onUpdate:modelValue":l[28]||(l[28]=e=>I.selected_eq_option.IOLocation.Up_Pose=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Down_Pose"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Down_Pose,"onUpdate:modelValue":l[29]||(l[29]=e=>I.selected_eq_option.IOLocation.Down_Pose=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Eqp_Status_Down"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Eqp_Status_Down,"onUpdate:modelValue":l[30]||(l[30]=e=>I.selected_eq_option.IOLocation.Eqp_Status_Down=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Eqp_Maintaining"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Eqp_Maintaining,"onUpdate:modelValue":l[31]||(l[31]=e=>I.selected_eq_option.IOLocation.Eqp_Maintaining=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"Eqp_PartsReplacing"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.Eqp_PartsReplacing,"onUpdate:modelValue":l[32]||(l[32]=e=>I.selected_eq_option.IOLocation.Eqp_PartsReplacing=e)},null,8,["modelValue"])])),_:1})])),_:1})):(0,o.kq)("",!0)]),(0,o._)("div",q,[f,1==I.selected_eq_option.IOLocation.STATUS_IO_SPEC_VERSION?((0,o.wg)(),(0,o.j4)(j,{key:0,"label-position":"left","label-width":"120"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{label:"Start Index"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.ConnOptions.Output_Start_Address,"onUpdate:modelValue":l[33]||(l[33]=e=>I.selected_eq_option.ConnOptions.Output_Start_Address=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(M),(0,o.Wm)(B,{label:"To_EQ_Up"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.To_EQ_Up,"onUpdate:modelValue":l[34]||(l[34]=e=>I.selected_eq_option.IOLocation.To_EQ_Up=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"To_EQ_Low"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.To_EQ_Low,"onUpdate:modelValue":l[35]||(l[35]=e=>I.selected_eq_option.IOLocation.To_EQ_Low=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"VALID"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.HS_AGV_VALID,"onUpdate:modelValue":l[36]||(l[36]=e=>I.selected_eq_option.IOLocation.HS_AGV_VALID=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"TR-REQ"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.HS_AGV_TR_REQ,"onUpdate:modelValue":l[37]||(l[37]=e=>I.selected_eq_option.IOLocation.HS_AGV_TR_REQ=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"BUSY"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.HS_AGV_BUSY,"onUpdate:modelValue":l[38]||(l[38]=e=>I.selected_eq_option.IOLocation.HS_AGV_BUSY=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"COMPT"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.HS_AGV_COMPT,"onUpdate:modelValue":l[39]||(l[39]=e=>I.selected_eq_option.IOLocation.HS_AGV_COMPT=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"To EQ Empty CST"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.To_EQ_Empty_CST,"onUpdate:modelValue":l[40]||(l[40]=e=>I.selected_eq_option.IOLocation.To_EQ_Empty_CST=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"To EQ Full CST"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.To_EQ_Full_CST,"onUpdate:modelValue":l[41]||(l[41]=e=>I.selected_eq_option.IOLocation.To_EQ_Full_CST=e)},null,8,["modelValue"])])),_:1})])),_:1})):(0,o.kq)("",!0),2==I.selected_eq_option.IOLocation.STATUS_IO_SPEC_VERSION?((0,o.wg)(),(0,o.j4)(j,{key:1,"label-position":"left","label-width":"120"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{label:"Start Index"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.ConnOptions.Output_Start_Address,"onUpdate:modelValue":l[42]||(l[42]=e=>I.selected_eq_option.ConnOptions.Output_Start_Address=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(M),(0,o.Wm)(B,{label:"To_EQ_Up"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.To_EQ_Up,"onUpdate:modelValue":l[43]||(l[43]=e=>I.selected_eq_option.IOLocation.To_EQ_Up=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"To_EQ_Low"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.To_EQ_Low,"onUpdate:modelValue":l[44]||(l[44]=e=>I.selected_eq_option.IOLocation.To_EQ_Low=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"CMD_Reserve_Up"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.CMD_Reserve_Up,"onUpdate:modelValue":l[45]||(l[45]=e=>I.selected_eq_option.IOLocation.CMD_Reserve_Up=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(B,{label:"CMD_Reserve_Low"},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{type:"number",modelValue:I.selected_eq_option.IOLocation.CMD_Reserve_Low,"onUpdate:modelValue":l[46]||(l[46]=e=>I.selected_eq_option.IOLocation.CMD_Reserve_Low=e)},null,8,["modelValue"])])),_:1})])),_:1})):(0,o.kq)("",!0)])])])),_:1})])])),_:1},8,["modelValue","title"]),(0,o.Wm)(Y,{modelValue:I.io_check_drawer,"onUpdate:modelValue":l[61]||(l[61]=e=>I.io_check_drawer=e),direction:"btt"},{default:(0,o.w5)((()=>[(0,o._)("div",b,[E,(0,o._)("div",{class:"di-status",onClick:l[48]||(l[48]=l=>e.HandleHSsignaleChange(T.selected_eq_io_data.EQName,"L_REQ",!e.scope.row.HS_EQ_L_REQ)),style:(0,n.j5)(e.signalOn(T.selected_eq_io_data.HS_EQ_L_REQ))},"L_REQ",4),(0,o._)("div",{class:"di-status",onClick:l[49]||(l[49]=l=>e.HandleHSsignaleChange(T.selected_eq_io_data.EQName,"U_REQ",!e.scope.row.HS_EQ_U_REQ)),style:(0,n.j5)(e.signalOn(T.selected_eq_io_data.HS_EQ_U_REQ))},"U_REQ",4),(0,o._)("div",{class:"di-status",onClick:l[50]||(l[50]=l=>e.HandleHSsignaleChange(T.selected_eq_io_data.EQName,"READY",!e.scope.row.HS_EQ_READY)),style:(0,n.j5)(e.signalOn(T.selected_eq_io_data.HS_EQ_READY))},"READY",4),(0,o._)("div",{class:"di-status",onClick:l[51]||(l[51]=l=>e.HandleHSsignaleChange(T.selected_eq_io_data.EQName,"UP_READY",!e.scope.row.HS_EQ_UP_READY)),style:(0,n.j5)(e.signalOn(T.selected_eq_io_data.HS_EQ_UP_READY))},"UP_READY",4),(0,o._)("div",{class:"di-status",onClick:l[52]||(l[52]=l=>e.HandleHSsignaleChange(T.selected_eq_io_data.EQName,"LOW_READY",!e.scope.row.HS_EQ_LOW_READY)),style:(0,n.j5)(e.signalOn(T.selected_eq_io_data.HS_EQ_LOW_READY))},"LOW_READY",4),(0,o.kq)("",!0)]),(0,o._)("div",S,[C,(0,o._)("div",{class:"di-status",onClick:l[54]||(l[54]=l=>e.HandleAGVHSSignaleChange(T.selected_eq_io_data.EQName,"To_EQ_Up",!e.scope.row.To_EQ_Up)),style:(0,n.j5)(e.signalOn(T.selected_eq_io_data.To_EQ_Up))},"To_EQ_Up",4),(0,o._)("div",{class:"di-status",onClick:l[55]||(l[55]=l=>e.HandleAGVHSSignaleChange(T.selected_eq_io_data.EQName,"To_EQ_Low",!e.scope.row.To_EQ_Low)),style:(0,n.j5)(e.signalOn(T.selected_eq_io_data.To_EQ_Low))},"To_EQ_Low",4),(0,o._)("div",{class:"di-status",onClick:l[56]||(l[56]=l=>e.HandleAGVHSSignaleChange(T.selected_eq_io_data.EQName,"VALID",!e.scope.row.HS_AGV_VALID)),style:(0,n.j5)(e.signalOn(T.selected_eq_io_data.HS_AGV_VALID))},"VALID",4),(0,o._)("div",{class:"di-status",onClick:l[57]||(l[57]=l=>e.HandleAGVHSSignaleChange(T.selected_eq_io_data.EQName,"TR_REQ",!e.scope.row.HS_AGV_TR_REQ)),style:(0,n.j5)(e.signalOn(T.selected_eq_io_data.HS_AGV_TR_REQ))},"TR_REQ",4),(0,o._)("div",{class:"di-status",onClick:l[58]||(l[58]=l=>e.HandleAGVHSSignaleChange(T.selected_eq_io_data.EQName,"BUSY",!e.scope.row.HS_AGV_BUSY)),style:(0,n.j5)(e.signalOn(T.selected_eq_io_data.HS_AGV_BUSY))},"BUSY",4),(0,o.kq)("",!0),(0,o._)("div",{class:"di-status",onClick:l[60]||(l[60]=l=>e.HandleAGVHSSignaleChange(T.selected_eq_io_data.EQName,"COMPT",!e.scope.row.HS_AGV_COMPT)),style:(0,n.j5)(e.signalOn(T.selected_eq_io_data.HS_AGV_COMPT))},"COMPT",4)])])),_:1},8,["modelValue"]),(0,o.Wm)(z,{fullscreen:"",overflow:!1,modelValue:I.showStatusIOSpec,"onUpdate:modelValue":l[62]||(l[62]=e=>I.showStatusIOSpec=e),draggable:"",title:"狀態IO SPEC說明"},{default:(0,o.w5)((()=>[(0,o._)("div",O,[(0,o.Wm)(F,{style:{height:"100vh",width:"100vw"}},{default:(0,o.w5)((()=>[(0,o.Wm)($,{title:"舊版",style:{height:"100vh",width:"100vw"}},{default:(0,o.w5)((()=>[(0,o._)("iframe",{src:T.ioSpecUrl_OldVersion,width:"100%",height:"100%",style:{border:"none"},allow:"autoplay"},null,8,W)])),_:1}),(0,o.Wm)($,{title:"新版",style:{height:"100vh",width:"100vw"}},{default:(0,o.w5)((()=>[(0,o._)("iframe",{src:T.ioSpecUrl_NewVersion,width:"100%",height:"100%",style:{border:"none"},allow:"autoplay"},null,8,y)])),_:1})])),_:1})])])),_:1},8,["modelValue"]),(0,o.Wm)(K,{modelValue:I.showEqSelectForm,"onUpdate:modelValue":l[63]||(l[63]=e=>I.showEqSelectForm=e),onConfirm:T.HandleEqSelectFormConfirm},null,8,["modelValue","onConfirm"])])),[[Z,I.loading]])}t(57658);var I=t(64491),T=t(91747);const v={class:"eq-group-editor"},D={class:"groups-container"};function L(e,l,t,a,n,d){const i=(0,o.up)("GroupComponent");return(0,o.wg)(),(0,o.iD)("div",v,[(0,o.Uk)(" EQ Group "),(0,o._)("div",D,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.GroupsConfigures,(e=>((0,o.wg)(),(0,o.j4)(i,{class:"group",key:e.EqGroupName,Configuration:e},null,8,["Configuration"])))),128)),(0,o.Wm)(i,{class:"group",onOnAddClick:d.HandleAddRequest,isUseForAdd:!0},null,8,["onOnAddClick"])])])}const R=e=>((0,o.dD)("data-v-97b1088e"),e=e(),(0,o.Cn)(),e),k=R((()=>(0,o._)("i",{class:"bi bi-plus-circle"},null,-1))),A={key:1,class:"content-info"},Q={class:"eq-name py-2 border-bottom d-flex px-2"},H={class:"flex-fill text-start"},P={class:"ports bg-info d-flex flex-row"},N=R((()=>(0,o._)("label",null,[(0,o._)("i",{class:"bi bi-box-arrow-in-right"}),(0,o.Uk)(" 入料 PORT ")],-1))),x={class:"ports bg-warning d-flex flex-row"},G=R((()=>(0,o._)("label",null,[(0,o._)("i",{class:"bi bi-box-arrow-right"}),(0,o.Uk)("出料 PORT ")],-1)));function M(e,l,t,a,d,i){const s=(0,o.up)("el-tooltip"),_=(0,o.up)("el-option"),u=(0,o.up)("el-select");return(0,o.wg)(),(0,o.iD)("div",{class:(0,n.C_)(["eq-group-component",t.isUseForAdd?"addable-layout":""])},[t.isUseForAdd?((0,o.wg)(),(0,o.iD)("div",{key:0,class:"add-mode",onClick:l[0]||(l[0]=(...e)=>i.HandleAddRegionClicked&&i.HandleAddRegionClicked(...e))},[(0,o.Wm)(s,{content:"新增一個設備群組",placement:"top"},{default:(0,o.w5)((()=>[k])),_:1})])):((0,o.wg)(),(0,o.iD)("div",A,[(0,o._)("div",Q,[(0,o._)("span",H,(0,n.zw)(d.GroupConfigure.EqGroupName),1),(0,o._)("i",{class:"bi bi-pencil-square",onClick:l[1]||(l[1]=(...e)=>i.EditEqNameClick&&i.EditEqNameClick(...e))})]),(0,o._)("div",P,[N,(0,o.Wm)(u,{multiple:"",modelValue:d.GroupConfigure.LoadPortEqTags,"onUpdate:modelValue":l[2]||(l[2]=e=>d.GroupConfigure.LoadPortEqTags=e)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.EQPortOptions,(e=>((0,o.wg)(),(0,o.j4)(_,{key:e.value,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])]),(0,o._)("div",x,[G,(0,o.Wm)(u,{multiple:"",modelValue:d.GroupConfigure.UnloadPortEqTags,"onUpdate:modelValue":l[3]||(l[3]=e=>d.GroupConfigure.UnloadPortEqTags=e)},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(i.EQPortOptions,(e=>((0,o.wg)(),(0,o.j4)(_,{key:e.value,label:e.name,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])]))],2)}var B=t(78538),j=t(25044),Y={props:{isUseForAdd:{type:Boolean,default:!1},Configuration:{type:Object,default(){var e=new B.r0;return e.EqGroupName="EQQQQQ",e}}},data(){return{GroupConfigure:new B.r0("TEST",[46,48],[2,4])}},methods:{HandleAddRegionClicked(){this.$emit("onAddClick","")},EditEqNameClick(){}},computed:{EQPortOptions(){return j.jU.state.EqOptions.map((e=>({name:e.Name+`(Tag:${e.TagID})`,value:e.TagID})))}},mounted(){this.GroupConfigure=this.Configuration}},$=t(83744);const F=(0,$.Z)(Y,[["render",M],["__scopeId","data-v-97b1088e"]]);var z=F,K={components:{GroupComponent:z},data(){return{GroupsConfigures:[new B.r0("ahah",[1,2],[3,4])]}},methods:{HandleAddRequest(){var e=`EQ Group-${this.GroupsConfigures.length+1}`;this.GroupsConfigures.push(new B.r0(e))}},mounted(){(0,I.IS)().then((e=>this.GroupsConfigures=e))}};const Z=(0,$.Z)(K,[["render",L],["__scopeId","data-v-23f52387"]]);var J=Z,X=t(95320),ee=t(49996),le=(t(30381),t(22201)),te=t(663);const oe={class:"d-flex py-3"},ae=(0,o._)("h3",{class:"flex-fill text-start"},[(0,o._)("b",null,"選擇設備")],-1);function ne(e,l,t,a,n,d){const i=(0,o.up)("el-button"),s=(0,o.up)("el-table-column"),_=(0,o.up)("el-table"),u=(0,o.up)("el-dialog");return(0,o.wg)(),(0,o.j4)(u,{draggable:"",modelValue:n.visible,"onUpdate:modelValue":l[0]||(l[0]=e=>n.visible=e),modal:!1,onClose:l[1]||(l[1]=e=>d.updateVisible(!1))},{default:(0,o.w5)((()=>[(0,o._)("div",oe,[ae,(0,o.Wm)(i,{size:"large",type:"primary",onClick:d.confirm},{default:(0,o.w5)((()=>[(0,o.Uk)("確認選取")])),_:1},8,["onClick"])]),(0,o.Wm)(_,{ref:"table",data:d.eq_store,border:"",height:800},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{type:"selection",width:"55"}),(0,o.Wm)(s,{prop:"Name",label:"Name"}),(0,o.Wm)(s,{prop:"TagID",label:"Tag"})])),_:1},8,["data"])])),_:1},8,["modelValue"])}var de={props:{value:{type:Boolean,default:!1}},data(){return{visible:this.value}},computed:{eq_store(){return j.jU.state.EqOptions}},watch:{value(e){this.visible=e},visible(e){this.$emit("input",e)}},methods:{updateVisible(e){this.visible=e,e||this.cancelSelectAll()},selectAll(){this.$refs.table.clearSelection(),this.eq_store.forEach((e=>{this.$refs.table.toggleRowSelection(e,!0)}))},cancelSelectAll(){this.$refs.table.clearSelection()},confirm(){this.$emit("confirm",this.$refs.table.getSelectionRows())}}};const ie=(0,$.Z)(de,[["render",ne]]);var se=ie,_e={components:{RegionsSelector:T.Z,EqGroupEditor:J,EqSelectForm:se},data(){return{displayMode:"eq-list",cell_item_size:"",io_check_drawer:!1,connection_setting_drawer:!1,EqDatas:[],EqDatas_Orignal:[],ValidTag:e=>!0,ValidName:e=>{var l=e.Name,t=this.EqDatas.filter((l=>l.Name==e.Name));return 1==t.length&&""!=l},selected_eq_option:new B.W1,connection_testing:!1,loading:!0,rowKey:"index",sortBy:"eqName",showStatusIOSpec:!1,showEqSelectForm:!1,applyTo:void 0,applyToSuccessMsg:{status_io_spec:"IO SPEC 版本",conn_setting:"成功修改"}}},watch:{displayMode(e){}},methods:{GetAvaluableEqNameList(e){var l=this.EqNames.filter((l=>l!=e));return["ALL",...l]},async SaveGroupsClicked(){var e=this.$refs["group-editor"].GroupsConfigures;(0,I.FJ)(e),this.ClearAllHighlightByDuplicate()},async SaveSettingHandler(){var e=this.ValidateSetting();if(e.confirm){var l=await(0,I.wW)(this.EqDatas);l.confirm?(this.ReloadSettingsHandler(!1),this.$swal.fire({title:"儲存成功",icon:"success",timer:2e3})):this.$swal.fire({title:"參數設定有誤",text:l.message,icon:"error"})}else this.$swal.fire({text:"",title:e.message,icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},ValidateSetting(){const e=this.EqDatas.length;var l=[...new Set(this.EqDatas.map((e=>e.TagID+"-"+e.Height)))];const t=l.length==e;return{confirm:t,message:"同一個TAG不可有相同的層設置"}},async DownloadEQOptions(){this.EqDatas=[];var e=j.jU.state.EqOptions;for(let t=0;t<e.length;t++){var l=new B.W1;Object.assign(l,e[t]),l.index=t,this.EqDatas.push(l)}this.CloneEQDatas()},CloneEQDatas(){this.EqDatas_Orignal=JSON.parse(JSON.stringify(this.EqDatas))},ReloadSettingsHandler(e=!0){this.loading=e,this.ClearAllHighlightByDuplicate(),setTimeout((()=>{(0,I.H5)().then((e=>{j.jU.commit("EqOptions",e),this.DownloadEQOptions(),this.$refs.eqTable.setScrollTop(0),this.loading=!1}))}),300)},AddNewEqHandler(e=void 0){this.sortBy="eqName";let l=new B.W1;void 0==e?(l.TagID=1,l.index=this.EqDatas.length):l=e,e.highlight_duplicate=!0,this.EqDatas=[l,...this.EqDatas],setTimeout((()=>{this.$refs.eqTable.setScrollTop(0)}),300)},RemoveHandle(e){var l=this.EqDatas.filter((l=>l.Name!=e.Name));this.EqDatas=l},ClearAllHighlightByDuplicate(){this.EqDatas.forEach((e=>{e.highlight_duplicate=void 0,e.highlight=void 0}))},CopySettingHandle(e){var l=new B.W1;Object.assign(l,e),l.Name=l.Name+"_Copy",this.AddNewEqHandler(l)},async IOCheckBtnHandle(e){this.selected_eq_option=e,this.io_check_drawer=!0},async ConnectionSettingBtnHandle(e){this.selected_eq_option=e,this.connection_setting_drawer=!0},async ConnectTestHandle(e){this.connection_testing=!0;var l=await(0,I.qN)(e.ConnOptions);this.connection_testing=!1;var t="";t=0==e.ConnOptions.ConnMethod?`Modbus TCP - ${e.ConnOptions.IP}:${e.ConnOptions.Port}`:`Modbus RTU - ${e.ConnOptions.ComPort}`,l.Connected?this.$swal.fire({title:"OK",text:t,icon:"success"}):this.$swal.fire({title:"Fail",text:t,icon:"error"})},beforeRouteLeave(e,l,t){alert("leave!")},async HandleUseMapDataDisplayName(e){var l=await X.p.dispatch("GetMapPointByTag",e);if(l){var t=this.EqDatas.find((l=>l.TagID==e)),o=l.Graph.Display;t.Name=o,this.HandleEqNameChange(t,o),(0,ee.bM)({message:`Get Display Name From Map Success(Tag ${e} = ${o})`,duration:1e3,type:"success",title:"設備同步名稱"})}else(0,ee.bM)({message:"Get Display Name From Map Fail",duration:1e3,type:"error",title:"設備同步名稱失敗"})},HandleEqNameChange(e,l){var t=e.TagID,o=this.EqDatas_Orignal.find((e=>e.TagID==t));if(o){var a=o.Name,n=this.EqDatas.filter((e=>e.ValidDownStreamEndPointNames.includes(a)));n.forEach((e=>{var t=e.ValidDownStreamEndPointNames.indexOf(a);e.ValidDownStreamEndPointNames[t]=l})),this.CloneEQDatas()}},DetermineHighligtRowWithCurrentRouteQueryItem(){var e=this.$route.query["eqTag"];if(e){let l=this.EqDatas.find((l=>l.TagID==e));l&&(l.highlight=!0,this.ScrollToRowWithSpficTagAssigned(e))}else this.EqDatas.forEach((e=>e.highlight=void 0))},ScrollToRowWithSpficTagAssigned(e){setTimeout((()=>{const l=this.EqDatas.findIndex((l=>l.TagID==e));this.$refs.eqTable.setScrollTop(70*l)}),200)},GetRowClassName({row:e,rowIndex:l}){return void 0!=e.highlight?"row-highlight":void 0!=e.highlight_duplicate?"row-highlight-duplicate":""},HandleInfoIconOfStatusSpecClecked(){this.showStatusIOSpec=!0},HandleEqSelectFormConfirm(e){this.showEqSelectForm=!1;let l=[new B.W1];Object.assign(l,e);const t=l.map((e=>e.Name));let o=this.EqDatas.filter((e=>t.includes(e.Name)));o.forEach((e=>{"status_io_spec"==this.applyTo&&(e.IOLocation.STATUS_IO_SPEC_VERSION=this.selected_eq_option.IOLocation.STATUS_IO_SPEC_VERSION)}));const a=o.length-1;a>0&&this.$notify({title:"成功",message:`暫存修改了[${a}]個設備的${this.applyToSuccessMsg[this.applyTo]}`,type:"success"})}},mounted(){setTimeout((()=>{this.DownloadEQOptions(),this.loading=!1}),400);const e=(0,le.yj)();(0,o.YP)((()=>e.path),((e,l)=>{this.DetermineHighligtRowWithCurrentRouteQueryItem()}))},computed:{EqNames(){return this.EqDatas.map((e=>e.Name))},eq_data(){return j.jU.getters.EQData},selected_eq_io_data(){return this.eq_data.find((e=>e.EQName==this.selected_eq_option.EQName))},SortedEQDataBySortBy(){var e=[];return Object.assign(e,this.EqDatas),"tag"==this.sortBy?e.sort(((e,l)=>e.TagID-l.TagID)):"vehicleType"==this.sortBy?e.sort(((e,l)=>l.Accept_AGV_Type-e.Accept_AGV_Type)):"cargoType"==this.sortBy?e.sort(((e,l)=>l.EQAcceeptCargoType-e.EQAcceeptCargoType)):this.EqDatas},ioSpecUrl_NewVersion(){return te.Z.backend_host+"/Resources/Reference Documents/[GPM SPEC] [新版] IO交握流程規範_V1.2.pdf"},ioSpecUrl_OldVersion(){return te.Z.backend_host+"/Resources/Reference Documents/[GPM SPEC] [舊版] IO交握流程規範_V1.06.pdf"}}};const ue=(0,$.Z)(_e,[["render",U]]);var me=ue}}]);
//# sourceMappingURL=374.5c1a0d13.js.map