"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[215],{42215:function(t,e,l){l.r(e),l.d(e,{default:function(){return M}});var a=l(66252),o=l(3577);const n=t=>((0,a.dD)("data-v-86be08d2"),t=t(),(0,a.Cn)(),t),i={class:"agv-battery-setting d-flex h-100"},r=["textContent"],s={class:"descript mx-2 py-5 border flex-fill bg-light text-start",style:{"font-weight":"bold"}},u=n((()=>(0,a._)("h5",null,"高電量區",-1))),m=n((()=>(0,a._)("div",null,"- 可執行所有任務訂單。",-1))),d=n((()=>(0,a._)("h5",null,"中高電量區",-1))),p=n((()=>(0,a._)("div",null,"- 可執行所有任務訂單。",-1))),c=n((()=>(0,a._)("h5",null,"中低電量區",-1))),g=n((()=>(0,a._)("div",null,"- 當AGV非充電時，可執行所有任務訂單。",-1))),b=n((()=>(0,a._)("div",null,"- 當AGV進行充電時，僅允許AGV執行充電任務， 等待電量位於中高電量以上方可執行所有任務訂單。",-1))),f=n((()=>(0,a._)("h5",null,"低電量區",-1))),h=n((()=>(0,a._)("div",null,"- 當AGV低電量時將無法進行除充電任務以外的所有任務訂單。",-1))),v=n((()=>(0,a._)("div",null,"- 運轉模式下，系統會強制AGV進行充電。",-1)));function y(t,e,l,n,y,w){const _=(0,a.up)("el-input-number"),S=(0,a.up)("el-table-column"),x=(0,a.up)("el-table"),k=(0,a.up)("el-card"),V=(0,a.up)("el-timeline-item"),W=(0,a.up)("el-timeline");return(0,a.wg)(),(0,a.iD)("div",i,[(0,a.Wm)(x,{class:"w-50 mx-1","header-cell-style":t.tableHeaderStyle,size:"large",border:"",data:t.datas},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.columnMap,(e=>((0,a.wg)(),(0,a.j4)(S,{key:e.prop,label:e.label,prop:e.prop},{default:(0,a.w5)((l=>["string"==e.type?((0,a.wg)(),(0,a.iD)("div",{key:0,textContent:(0,o.zw)(l.row[e.prop]),class:""},null,8,r)):(0,a.kq)("",!0),"number"==e.type?((0,a.wg)(),(0,a.j4)(_,{key:1,modelValue:l.row[e.prop],"onUpdate:modelValue":t=>l.row[e.prop]=t,onChange:e=>t.modify(l.row,l.row.agvName)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(0,a.kq)("",!0)])),_:2},1032,["label","prop"])))),128))])),_:1},8,["header-cell-style","data"]),(0,a._)("div",s,[(0,a.Wm)(W,{class:"bat-timeline",style:{"max-width":"600px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{timestamp:"100%",placement:"top"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"bg-success text-light"},{default:(0,a.w5)((()=>[u,m])),_:1})])),_:1}),(0,a.Wm)(V,{timestamp:"高電量",placement:"top"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"bg-success text-light"},{default:(0,a.w5)((()=>[d,p])),_:1})])),_:1}),(0,a.Wm)(V,{timestamp:"中電量",placement:"top"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"text-light",style:{"background-color":"orange"}},{default:(0,a.w5)((()=>[c,g,b])),_:1})])),_:1}),(0,a.Wm)(V,{timestamp:"低電量-強制充電",placement:"top"},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"bg-danger text-light"},{default:(0,a.w5)((()=>[f,h,v])),_:1})])),_:1}),(0,a.Wm)(V,{timestamp:"0%",placement:"top"})])),_:1})])])}var w=l(47327),_=l(49996),S=l(38418);class x{constructor(t,e,l){(0,w.Z)(this,"label",void 0),(0,w.Z)(this,"prop",void 0),(0,w.Z)(this,"type",void 0),this.label=t,this.prop=e,this.type=l}}var k=(0,a.aZ)({inject:["tableHeaderStyle"],data(){return{datas:[],columnMap:[new x("車輛名稱","agvName","string"),new x("低電量-強制充電(%)","lowLevel","number"),new x("中電量(%)","middleLevel","number"),new x("高電量(%)","highLevel","number")],throttleState:{isOperating:!1,tout:setTimeout((()=>{}),1),postModifiedValToBackend(t){clearTimeout(this.tout),this.tout=setTimeout((async()=>{console.log(t);try{var e=await S.bh.ModifySetting(t.agvName,t);console.info(e),_.bM.success({message:`已完成 ${t.agvName} 電量管理參數修改`,position:"top-right",duration:2e3})}catch(l){_.bM.error({message:`${t.agvName} 電量管理參數修改失敗-${l}`,position:"top-right",duration:2e3})}}),500)},cancelLastOperate(){}}}},methods:{fetchSettings(){setTimeout((async()=>{try{var t=await S.bh.GetSettings();Object.assign(this.datas,t)}catch(e){_.bM.error({message:`電量管理參數下載失敗-${e}`,position:"top-right",duration:-1})}}),100)},modify(t,e){this.throttleState.postModifiedValToBackend(t)}},mounted(){this.fetchSettings()}}),V=l(83744);const W=(0,V.Z)(k,[["render",y],["__scopeId","data-v-86be08d2"]]);var M=W},47327:function(t,e,l){function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function o(t,e){if("object"!==a(t)||null===t)return t;var l=t[Symbol.toPrimitive];if(void 0!==l){var o=l.call(t,e||"default");if("object"!==a(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function n(t){var e=o(t,"string");return"symbol"===a(e)?e:String(e)}function i(t,e,l){return e=n(e),e in t?Object.defineProperty(t,e,{value:l,enumerable:!0,configurable:!0,writable:!0}):t[e]=l,t}l.d(e,{Z:function(){return i}})}}]);
//# sourceMappingURL=215.75261172.js.map