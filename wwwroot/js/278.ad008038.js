"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[278],{4278:function(e,t,a){a.r(t),a.d(t,{default:function(){return G}});var o=a(79003);const r={class:"agv_show_on_map_design h-100"};function l(e,t,a,l,s,n){const i=(0,o.resolveComponent)("el-button"),d=(0,o.resolveComponent)("el-header"),p=(0,o.resolveComponent)("AGVDrawSetting"),c=(0,o.resolveComponent)("el-main"),u=(0,o.resolveComponent)("el-container");return(0,o.openBlock)(),(0,o.createElementBlock)("div",r,[(0,o.createVNode)(u,{class:"h-100"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,{class:"text-start p-2 border",height:"50px"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,{type:"primary"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("儲存設定")])),_:1}),(0,o.createVNode)(i,{type:"danger"},{default:(0,o.withCtx)((()=>[(0,o.createTextVNode)("取消")])),_:1})])),_:1}),(0,o.createVNode)(c,{class:"bg-light p-2"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(p,{agv_name:"AGV_001"}),(0,o.createVNode)(p,{agv_name:"AGV_002"})])),_:1})])),_:1})])}const s=e=>((0,o.pushScopeId)("data-v-0a56e528"),e=e(),(0,o.popScopeId)(),e),n={class:"agv_draw_setting"},i={class:"agv-id w-100 border-bottom mb-1 text-start text-primary"},d={class:"w-100 d-flex flex-row"},p=s((()=>(0,o.createElementVNode)("div",{class:"text-start text-primary mb-3"},"Preview",-1))),c=["id"];function u(e,t,a,r,l,s){const u=(0,o.resolveComponent)("el-input"),h=(0,o.resolveComponent)("el-form-item"),g=(0,o.resolveComponent)("el-color-picker"),v=(0,o.resolveComponent)("el-form"),m=(0,o.resolveComponent)("el-checkbox"),w=(0,o.resolveComponent)("el-aside"),_=(0,o.resolveComponent)("el-main"),C=(0,o.resolveComponent)("el-container");return(0,o.openBlock)(),(0,o.createElementBlock)("div",n,[(0,o.createVNode)(C,{class:"h-100"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(w,{class:"properties-setting-container border bg-light",width:"50%"},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",i,(0,o.toDisplayString)(a.agv_name),1),(0,o.createElementVNode)("div",d,[(0,o.createVNode)(v,{"label-width":"80","label-position":"left"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{label:"顯示名稱"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(u,{type:"text",size:"small",modelValue:l.props.DisplayText,"onUpdate:modelValue":t[0]||(t[0]=e=>l.props.DisplayText=e),onInput:t[1]||(t[1]=e=>{s.ChangeTextOfAGV(e)})},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(h,{label:"顏色"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(g,{modelValue:l.props.DisplayColor,"onUpdate:modelValue":t[2]||(t[2]=e=>l.props.DisplayColor=e),onActiveChange:s.HandleAGVColorClicked},null,8,["modelValue","onActiveChange"])])),_:1}),(0,o.createVNode)(h,{label:"ICON"})])),_:1}),(0,o.createVNode)(v,{class:"mx-3","label-width":"120","label-position":"left"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(h,{label:"顯示貨物狀態"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(m)])),_:1}),(0,o.createVNode)(h,{label:"貨物-[框]圖示"}),(0,o.createVNode)(h,{label:"貨物-[Tray]圖示"})])),_:1})])])),_:1}),(0,o.createVNode)(_,{class:"border p-1",style:{"overflow-y":"hidden"}},{default:(0,o.withCtx)((()=>[p,(0,o.createElementVNode)("div",{id:s.map_id,class:"agv-preview-map border w-100",style:{height:"200px"}},null,8,c)])),_:1})])),_:1})])}var h=a(7686),g=a(88818),v=a(50563),m=a(98843),w=a(93292),_=a(1508),C=a(92949),f=a(79072),V=a(54404),x=a(93166),y=a(22205),N=a(7712),S=a(19966),b={data(){return{map:void 0,agv_feature:void 0,_agvBodyFeature:void 0,_agvSaftyRegionFeature:void 0,props:new f.MV}},props:{agv_name:{type:String,default:"AGV_001"},raw_props:{type:f.MV,default(){var e=new f.MV;return e}}},computed:{map_id(){return"map-agv-preview-"+this.agv_name},featureStyle(){return this.agv_feature.getStyle()}},methods:{MapInit(){const e=new g.Z({code:"xkcd-image",units:"pixels",extent:[-20,-20,20,20]});this.agv_feature=new _.Z({geometry:new C.Z([0,0])}),this.agv_feature.setStyle((0,f.K$)(this.raw_props.DisplayText,this.raw_props.DisplayColor));const t=new V.ZP([[[-3,4],[3,4],[3,-4],[-3,-4]]]);this._agvBodyFeature=new _.Z(t),this._agvBodyFeature.setStyle(new y.ZP({fill:new N.Z({color:(0,f.xZ)(this.raw_props.DisplayColor,.6)}),stroke:new S.Z({color:"black",width:1})}));const a=new x.Z([0,0],5);this._agvSaftyRegionFeature=new _.Z(a);const o=(0,f.xZ)(this.raw_props.DisplayColor,.2);this._agvSaftyRegionFeature.setStyle(new y.ZP({fill:new N.Z({color:o}),stroke:new S.Z({color:o,width:1,lineDash:[5,2]})}));const r=new m.Z({source:new w.Z({features:[this.agv_feature,this._agvBodyFeature,this._agvSaftyRegionFeature]}),zIndex:2});this.map=new h.Z({layers:[r],target:this.map_id,view:new v.ZP({projection:e,center:[0,0],zoom:1,maxZoom:20})})},HandleAGVColorClicked(e){this.props.DisplayColor=e,this.ChangeColorOfAGV(e)},HandleAGVColorSelected(e){alert(e)},ChangeColorOfAGV(e){this.SetFeatureFillColor(this.agv_feature,e,!0),this.SetFeatureFillColor(this._agvBodyFeature,(0,f.xZ)(e,.6)),this.SetFeatureFillColor(this._agvSaftyRegionFeature,(0,f.xZ)(e,.2))},ChangeTextOfAGV(e){var t=this.agv_feature.getStyle(),a=t.getText();a.setText(e),this.agv_feature.setStyle(t)},SetFeatureFillColor(e,t,a=!1){var o=e.getStyle();if(a){var r=o.getText(),l=r.getBackgroundFill();l.setColor(t),r.setBackgroundFill(l)}else{l=o.getFill();l.setColor(t),o.setFill(l)}e.setStyle(o)}},mounted(){this.MapInit(),this.props=JSON.parse(JSON.stringify(this.raw_props))}},Z=a(40089);const F=(0,Z.Z)(b,[["render",u],["__scopeId","data-v-0a56e528"]]);var k=F,A={components:{AGVDrawSetting:k}};const D=(0,Z.Z)(A,[["render",l]]);var G=D}}]);
//# sourceMappingURL=278.ad008038.js.map