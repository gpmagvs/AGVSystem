{"version":3,"file":"js/943.f919885f.js","mappings":"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","sources":["webpack://gpm_agvs/./src/views/TSMC/Components/TaskDispatch.vue","webpack://gpm_agvs/./src/views/TSMC/Components/Dispatcher.vue","webpack://gpm_agvs/./src/views/TSMC/Components/NewScheduleHelper.vue","webpack://gpm_agvs/./src/api/MeasureScript.js","webpack://gpm_agvs/./src/views/TSMC/Components/NewScheduleHelper.vue?43e5","webpack://gpm_agvs/./src/views/TSMC/Components/Dispatcher.vue?c6d2","webpack://gpm_agvs/./src/views/TSMC/Components/TaskDispatch.vue?92b3"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"d-flex\">\r\n      <div class=\"actions w-50\">\r\n        <AGVStatus></AGVStatus>\r\n        <Dispatcher></Dispatcher>\r\n      </div>\r\n      <task-status-vue class=\"flex-fill\" :show_card_title=\"false\" display_mode=\"column\"></task-status-vue>\r\n    </div>\r\n    <TaskAllocationVue></TaskAllocationVue>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport AGVStatus from '@/components/HomeView/AGVStatus/AGVStatus.vue'\r\nimport TaskStatusVue from '@/components/HomeView/TaskStatus.vue';\r\nimport Dispatcher from './Dispatcher.vue';\r\nimport TaskAllocationVue from '@/components/HomeView/TaskAllocation.vue';\r\nimport { MapStore } from '@/components/Map/store';\r\nexport default {\r\n  components: {\r\n    AGVStatus, TaskStatusVue, Dispatcher, TaskAllocationVue\r\n  },\r\n  mounted() {\r\n    MapStore.dispatch('DownloadMapData');\r\n  }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped></style>","<template>\r\n  <div class=\"dispatcher border rounded p-2\">\r\n    <b-tabs>\r\n      <b-tab title=\"排程派車\">\r\n        <div class=\"d-flex p-2 border\">\r\n          <div>\r\n            <b-button\r\n              @click=\"() => {\r\n                $refs.schedule_add_helper.Show()\r\n              }\"\r\n              variant=\"primary\">新增排程</b-button>\r\n          </div>\r\n          <div class=\"border mx-2\">\r\n            <label class=\"bg-primary text-light w-100\">排程列表({{ SecheulData.length }})</label>\r\n            <el-table\r\n              style=\"height:350px\"\r\n              :data=\"SecheulData\"\r\n              highlight-current-row\r\n              @row-click=\"(row, column, event) => { selectedScheduleData = row }\">\r\n              <!-- <el-table-column label=\"No\" width=\"80\">\r\n                <template #default=\"scope\">排程-{{ GetRowIndex(scope.row) + 1 }}</template>\r\n              </el-table-column> -->\r\n              <el-table-column label=\"時間\" min-width=\"160\" prop=\"Time\"></el-table-column>\r\n              <el-table-column label=\"車輛\" min-width=\"160\" prop=\"AGVName\"></el-table-column>\r\n              <el-table-column label=\"Bay數量\" min-width=\"160\" prop=\"Bays\">\r\n                <template #default=\"scope\"> {{ scope.row.Bays.length }} </template>\r\n              </el-table-column>\r\n              <el-table-column label=\"操作\" min-width=\"150\">\r\n                <template #default=\"scope\">\r\n                  <el-button size=\"small\" type=\"primary\" @click=\"EditBtnClickHandler\">檢視</el-button>\r\n                  <el-button size=\"small\" type=\"danger\" @click=\"HandleDeleteScheduleClick(scope.row)\">刪除</el-button>\r\n                </template>\r\n              </el-table-column>\r\n            </el-table>\r\n          </div>\r\n        </div>\r\n      </b-tab>\r\n      <b-tab title=\"即時派車\">\r\n        <div class=\" p-2 border\"></div>\r\n      </b-tab>\r\n    </b-tabs>\r\n    <NewScheduleHelper @on_submit=\"HandleSchedulesChanged\" ref=\"schedule_add_helper\"></NewScheduleHelper>\r\n    <NewScheduleHelper @on_submit=\"HandleSchedulesChanged\" :edit_mode=\"true\" ref=\"schedule_edit_helper\"></NewScheduleHelper>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NewScheduleHelper from './NewScheduleHelper.vue'\r\nimport moment from 'moment'\r\nimport { GetSchedules, DeleteSchedule } from '@/api/MeasureResultAPI.js'\r\nexport default {\r\n  components: {\r\n    NewScheduleHelper,\r\n  },\r\n  data() {\r\n    return {\r\n      SecheulData: [\r\n        {\r\n          Time: '1991/12/20 12:10:20',\r\n          Bays: [],\r\n          AGVName: 'AGV_001',\r\n          ScriptName: 'script_name',\r\n        },\r\n      ],\r\n      selectedScheduleData: {},\r\n      ShowScheduleDetail: false\r\n    }\r\n  },\r\n  methods: {\r\n    GetRowIndex(row) {\r\n      return this.SecheulData.indexOf(row)\r\n    },\r\n    EditBtnClickHandler() {\r\n      setTimeout(() => {\r\n        var dateStr = moment(Date.now()).format('yyyy/MM/DD')\r\n        var clone_ = JSON.parse(JSON.stringify(this.selectedScheduleData))\r\n\r\n        clone_.Time = dateStr + ' ' + clone_.Time;\r\n        this.$refs.schedule_edit_helper.EditorMode(clone_)\r\n      }, 0.5);\r\n    },\r\n    async HandleDeleteScheduleClick(row) {\r\n      this.$swal.fire(\r\n        {\r\n          html: `<b>時間:</b>${row.Time} <br/><b>AGV:</b>${row.AGVName} `,\r\n          title: '確定要刪除此排程?',\r\n          icon: 'question',\r\n          showCancelButton: true,\r\n          confirmButtonText: 'OK',\r\n          customClass: 'my-sweetalert'\r\n        }).then(async (ret) => {\r\n          if (ret.isConfirmed) {\r\n            await DeleteSchedule(row.Time, row.AGVName)\r\n            this.GetSchedulesFromBackend();\r\n          }\r\n        })\r\n\r\n    },\r\n    FormatTime(row, column, cellValue, index) {\r\n      return moment(cellValue).format(\"HH:mm\")\r\n    },\r\n    async GetSchedulesFromBackend() {\r\n      this.SecheulData = await GetSchedules()\r\n    },\r\n    HandleSchedulesChanged() {\r\n      this.GetSchedulesFromBackend();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.GetSchedulesFromBackend();\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dispatcher {\r\n  .sech-setting {\r\n    label {\r\n      width: 72px;\r\n    }\r\n  }\r\n}\r\n</style>","<template>\r\n  <el-dialog\r\n    v-model=\"ShowDialog\"\r\n    :show-close=\"true\"\r\n    :close-on-click-modal=\"true\"\r\n    :close-on-press-escape=\"true\"\r\n    :modal=\"false\"\r\n    draggable\r\n    width=\"800\"\r\n    fullscreen\r\n    style=\"z-index:29900\">\r\n    <template #header=\"{ titleId, login_title }\">\r\n      <div class=\"login-header\">\r\n        <h3 :id=\"titleId\" :class=\"login_title\">{{ Title }}</h3>\r\n        <el-divider></el-divider>\r\n      </div>\r\n    </template>\r\n    <div class=\"copntent\">\r\n      <div class=\"d-flex text-start p-1\">\r\n        <div class=\"options border p-2\" style=\"width:700px\">\r\n          <div class=\"border rounded p-2 my-2\">\r\n            <div class=\"label\"><i class=\"bi bi-clock\"></i>時間設定</div>\r\n            <el-time-picker format=\"HH:mm\" v-model=\"schedule_settigs.Time\" type=\"time\" placeholder=\"選擇量測時間\" />\r\n          </div>\r\n          <div class=\"border rounded  p-2 my-2\">\r\n            <div class=\"label\"><i class=\"bi bi-truck-front\"></i>指派車輛</div>\r\n            <el-select v-model=\"schedule_settigs.AGVName\" placeholder=\"選擇車輛\" style=\"width: 220px\">\r\n              <el-option\r\n                v-for=\"agv_name in AgvNameList\"\r\n                :key=\"agv_name\"\r\n                :label=\"agv_name\"\r\n                :value=\"agv_name\"></el-option>\r\n            </el-select>\r\n          </div>\r\n          <div class=\"border rounded  p-2 my-2\">\r\n            <div class=\"label\"><i class=\"bi bi-geo\"></i>量測Bay選取</div>\r\n            <div class=\"d-flex flex-column\">\r\n            </div>\r\n            <div>\r\n              <div class style=\"height:350px\">\r\n                <el-table border :data=\"BayTableData\" ref=\"table_ref\" @selection-change=\"handleSelectionChange\">\r\n                  <el-table-column type=\"selection\" label=\"選取\">\r\n                  </el-table-column>\r\n                  <el-table-column prop=\"BayName\" label=\"Bay名稱\" width=\"100\"></el-table-column>\r\n                  <el-table-column prop=\"BayName\" label=\"量測點\" width=\"400\">\r\n                    <template #default=\"scope\">\r\n                      <el-select @click=\"HandlePointsColumnClick(scope.row)\" v-model=\"scope.row.SelectedPointNames\" multiple style=\"width: 100%\" @change=\"HandlePointsSelectedChange\">\r\n                        <el-option v-for=\"pt in scope.row.PointNames\" :key=\"pt\" :label=\"pt\" :value=\"pt\"></el-option>\r\n                      </el-select>\r\n                    </template>\r\n                  </el-table-column>\r\n                  <el-table-column label=\"量測順序\">\r\n                    <template #default=\"scope\">\r\n                      <el-select v-model=\"scope.row.Sequence\" @click=\"HandlePointsColumnClick(scope.row)\" @change=\"HandleSequenceChange\">\r\n                        <el-option v-for=\"Sequence in SequenceList\" :key=\"Sequence\" :label=\"Sequence\" :value=\"Sequence\"></el-option>\r\n                      </el-select>\r\n                    </template>\r\n                  </el-table-column>\r\n                </el-table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <b-button :disabled=\"IsNoBaySelected || schedule_settigs.AGVName == '' || schedule_settigs.Time == ''\" @click=\"HandleAddNewScheduleClick\" style=\"cursor: pointer;\" class=\"w-100 my-3\" variant=\"primary\"> {{ edit_mode ? '修改' : '新增排程' }} </b-button>\r\n        </div>\r\n        <Map\r\n          class=\" bg-light border rounded px-1 mx-1\"\r\n          id=\"schedule_map\"\r\n          :agv_show=\"false\"\r\n          style=\"padding-right: 10px;width: 900px;\"></Map>\r\n      </div>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport Map from '@/components/Map/Map.vue'\r\nimport { MapStore } from '@/components/Map/store'\r\nimport { agv_states_store } from '@/store'\r\nimport moment from 'moment'\r\nimport { GetBayTable } from '@/api/MeasureScript'\r\nimport { AddNewMeasureSchedule, ModifyMeasureSchedule } from '@/api/MeasureResultAPI.js'\r\n\r\nexport default {\r\n  components: {\r\n    Map,\r\n  },\r\n  props: {\r\n    edit_mode: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      ShowDialog: false,\r\n      Title: '新增量測排程',\r\n      region_mode: '局部選擇',\r\n      selected_row: {},\r\n      previous_seq: 0,\r\n      modified: {\r\n        Time: '',\r\n        AGVName: ''\r\n      },\r\n      schedule_settigs: {\r\n        Time: '1991/12/20 12:10:20',\r\n        Bays: [],\r\n        AGVName: 'AGV_001',\r\n        ScriptName: 'script_name',\r\n      },\r\n      BayTableData: [\r\n        {\r\n          BayName: 'Bay1',\r\n          PointNames: ['AAA12', '2', '3'],\r\n          SelectedPointNames: ['AAA12', '3'],\r\n          Sequence: 1\r\n        },\r\n        {\r\n          BayName: 'Bay2',\r\n          PointNames: ['1', '2', '3'],\r\n          SelectedPointNames: ['1', '3'],\r\n          Sequence: 2\r\n        }\r\n      ],\r\n      SequenceList: []\r\n\r\n    }\r\n  },\r\n  computed: {\r\n    map_station_data() {\r\n      return MapStore.getters.MapStations\r\n    },\r\n    BaysData() {\r\n      return MapStore.getters.BaysData\r\n    },\r\n    BayNames() {\r\n      return Object.keys(MapStore.getters.BaysData)\r\n      //   return ['Bay1', 'Bay2', 'Bay3', 'Bay4', 'Bay5', 'Bay6', 'Bay7', 'Bay8', 'Bay9', 'Bay10']\r\n    },\r\n    IsAllSeclted() {\r\n      return this.BayNames.length == this.schedule_settigs.Bays.length | this.schedule_settigs.Bays.length == 0;\r\n    },\r\n    AgvNameList() {\r\n      return agv_states_store.getters.AGVNameList\r\n    },\r\n    IsNoBaySelected() {\r\n      return this.BayTableData.every(row => row.Selected == false);\r\n    }\r\n\r\n  },\r\n  methods: {\r\n    async Show() {\r\n      this.ShowDialog = true;\r\n      this.CreateDafualt(true);\r\n    },\r\n    EditorMode(data) {\r\n      this.CreateDafualt(false);\r\n      var time = moment(data.Time).format('HH:mm');\r\n      this.Title = `排程量測 - ${time}`;\r\n      this.modified.Time = time\r\n      this.modified.AGVName = data.AGVName\r\n      this.schedule_settigs = data;\r\n      //決定要勾選哪幾個Row\r\n      setTimeout(() => {\r\n        var selected_baynames = data.Bays.map(bay => bay.BayName)\r\n\r\n        this.BayTableData.forEach(row => {\r\n          var selected = selected_baynames.includes(row.BayName)\r\n          row.Selected = selected;\r\n          if (selected) {\r\n            var bay = data.Bays.find(b => b.BayName == row.BayName)\r\n            row.SelectedPointNames = bay.SelectedPointNames\r\n            row.Sequence = bay.Sequence\r\n\r\n          }\r\n          this.$refs[\"table_ref\"].toggleRowSelection(row, selected);\r\n        })\r\n      }, 420);\r\n\r\n      this.ShowDialog = true;\r\n    },\r\n    CreateDafualt(default_selcted) {\r\n      GetBayTable().then(dat => {\r\n        this.BayTableData = dat;\r\n        this.SequenceList = []\r\n        var bays_count = this.BayTableData.length;\r\n        for (let index = 0; index < bays_count; index++) {\r\n          this.SequenceList.push(index + 1)\r\n        }\r\n        setTimeout(() => {\r\n          this.BayTableData.forEach(row => {\r\n            if (row) {\r\n              row.Selected = default_selcted\r\n              this.$refs[\"table_ref\"].toggleRowSelection(row, default_selcted);\r\n            }\r\n          });\r\n        }, 200);\r\n      })\r\n    },\r\n    HandlePointsColumnClick(row) {\r\n      this.selected_row = row;\r\n      this.previous_seq = row.Sequence;\r\n    },\r\n    async HandleAddNewScheduleClick() {\r\n      this.schedule_settigs.Bays = this.BayTableData.filter(row => row.Selected)\r\n      var submit_data = JSON.parse(JSON.stringify(this.schedule_settigs));\r\n      submit_data.Time = moment(submit_data.Time).format('HH:mm')\r\n      this.ShowDialog = false;\r\n      this.$swal.fire(\r\n        {\r\n          html: `<b>時間:</b>${submit_data.Time} <br/><b>AGV:</b>${submit_data.AGVName} <br/><b>量測Bay數量:</b>${submit_data.Bays.length}`,\r\n          title: this.edit_mode ? '確定要修改此排程' : '確定要新增此排程?',\r\n          icon: 'question',\r\n          showCancelButton: true,\r\n          confirmButtonText: 'OK',\r\n          customClass: 'my-sweetalert'\r\n        }).then(async (ret) => {\r\n          if (ret.isConfirmed) {\r\n\r\n            var result = { result: false, message: '' }\r\n            if (this.edit_mode)\r\n              result = await ModifyMeasureSchedule(this.modified.Time, this.modified.AGVName, submit_data)\r\n            else\r\n              result = await AddNewMeasureSchedule(submit_data)\r\n            this.$swal.fire(\r\n              {\r\n                text: '',\r\n                title: this.edit_mode ? (result.result ? '修改成功' : '修改失敗') : (result.result ? '新增成功' : '新增失敗'),\r\n                icon: result.result ? 'success' : 'error',\r\n                showCancelButton: false,\r\n                confirmButtonText: 'OK',\r\n                customClass: 'my-sweetalert'\r\n              }).then(() => {\r\n                this.ShowDialog = true;\r\n              })\r\n            this.$emit('on_submit', '')\r\n          } else {\r\n\r\n            this.ShowDialog = true;\r\n          }\r\n        })\r\n\r\n\r\n    },\r\n    HandlePointsSelectedChange(points) {\r\n      this.selected_row.SelectedPointNames = points\r\n    },\r\n    HandleSequenceChange(seq) {\r\n      var row_seq_ocuupy = this.BayTableData.find(row => row.Sequence == seq)\r\n      row_seq_ocuupy.Sequence = this.previous_seq;\r\n      this.selected_row.Sequence = seq\r\n    },\r\n    handleSelectionChange(rows_seclted) {\r\n      var baynames = rows_seclted.map(row => row.BayName)\r\n      this.BayTableData.forEach(row => {\r\n        row.Selected = baynames.includes(row.BayName)\r\n      })\r\n    }\r\n  },\r\n  mounted() {\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.copntent {\r\n  position: relative;\r\n  top: -50px;\r\n  left: 70px;\r\n  overflow: hidden;\r\n\r\n  .options {\r\n    .label {\r\n      font-weight: bold;\r\n      font-size: 20px;\r\n      letter-spacing: 3px;\r\n      margin: 10px auto;\r\n\r\n      i {\r\n        margin-right: 4px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import axios from 'axios'\r\nimport param from '@/gpm_param'\r\nvar axios_entity = axios.create({\r\n    baseURL: param.backend_host,\r\n})\r\n\r\n/**取得BAY資料 */\r\nexport async function GetBayTable() {\r\n    var response = await axios_entity.get('/api/InstrumentMeasure/GetBaysTableData');\r\n    return response.data;\r\n}","import { render } from \"./NewScheduleHelper.vue?vue&type=template&id=b05f48d2&scoped=true\"\nimport script from \"./NewScheduleHelper.vue?vue&type=script&lang=js\"\nexport * from \"./NewScheduleHelper.vue?vue&type=script&lang=js\"\n\nimport \"./NewScheduleHelper.vue?vue&type=style&index=0&id=b05f48d2&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b05f48d2\"]])\n\nexport default __exports__","import { render } from \"./Dispatcher.vue?vue&type=template&id=b99541ea&scoped=true\"\nimport script from \"./Dispatcher.vue?vue&type=script&lang=js\"\nexport * from \"./Dispatcher.vue?vue&type=script&lang=js\"\n\nimport \"./Dispatcher.vue?vue&type=style&index=0&id=b99541ea&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b99541ea\"]])\n\nexport default __exports__","import { render } from \"./TaskDispatch.vue?vue&type=template&id=0e24ea3c\"\nimport script from \"./TaskDispatch.vue?vue&type=script&lang=js\"\nexport * from \"./TaskDispatch.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_hoisted_2","_createVNode","_component_AGVStatus","_component_Dispatcher","_component_task_status_vue","show_card_title","display_mode","_component_TaskAllocationVue","_component_b_tabs","_component_b_tab","title","_component_b_button","onClick","_cache","_ctx","$refs","schedule_add_helper","Show","variant","_hoisted_3","_hoisted_4","_toDisplayString","$data","SecheulData","length","_component_el_table","style","data","onRowClick","row","column","event","selectedScheduleData","_component_el_table_column","label","prop","default","_withCtx","scope","Bays","_component_el_button","size","type","$options","EditBtnClickHandler","$event","HandleDeleteScheduleClick","_hoisted_5","_component_NewScheduleHelper","onOn_submit","HandleSchedulesChanged","ref","edit_mode","_createBlock","_component_el_dialog","ShowDialog","modal","draggable","width","fullscreen","header","titleId","login_title","id","_normalizeClass","Title","_component_el_divider","_hoisted_6","_hoisted_7","_component_el_time_picker","format","schedule_settigs","Time","placeholder","_hoisted_8","_hoisted_9","_component_el_select","AGVName","_Fragment","_renderList","AgvNameList","agv_name","_component_el_option","key","value","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","border","BayTableData","onSelectionChange","handleSelectionChange","HandlePointsColumnClick","SelectedPointNames","multiple","onChange","HandlePointsSelectedChange","PointNames","pt","Sequence","HandleSequenceChange","SequenceList","disabled","IsNoBaySelected","HandleAddNewScheduleClick","$props","_component_Map","agv_show","axios_entity","axios","baseURL","param","backend_host","async","GetBayTable","response","get","components","Map","props","Boolean","region_mode","selected_row","previous_seq","modified","ScriptName","BayName","computed","map_station_data","MapStore","getters","MapStations","BaysData","BayNames","Object","keys","IsAllSeclted","this","agv_states_store","AGVNameList","every","Selected","methods","CreateDafualt","EditorMode","time","moment","setTimeout","selected_baynames","map","bay","forEach","selected","includes","find","b","toggleRowSelection","default_selcted","then","dat","bays_count","index","push","filter","submit_data","JSON","parse","stringify","$swal","fire","html","icon","showCancelButton","confirmButtonText","customClass","ret","isConfirmed","result","message","ModifyMeasureSchedule","AddNewMeasureSchedule","text","$emit","points","seq","row_seq_ocuupy","rows_seclted","baynames","mounted","__exports__","NewScheduleHelper","ShowScheduleDetail","GetRowIndex","indexOf","dateStr","Date","now","clone_","schedule_edit_helper","DeleteSchedule","GetSchedulesFromBackend","FormatTime","cellValue","GetSchedules","AGVStatus","TaskStatusVue","Dispatcher","TaskAllocationVue","dispatch","render"],"sourceRoot":""}