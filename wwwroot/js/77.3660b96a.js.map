{"version":3,"file":"js/77.3660b96a.js","mappings":"mVACEA,EAAAA,EAAAA,IAOSC,EAAA,CAPDC,MAAM,a,WAAsBC,EAAAC,Y,qCAAAD,EAAAC,YAAWC,I,mBAC7C,IAEQ,EAFRC,EAAAA,EAAAA,IAEQC,EAAA,CAFDL,MAAA,GAAMM,MAAM,e,mBACjB,IAA4B,EAA5BF,EAAAA,EAAAA,IAA4BG,M,OAE9BH,EAAAA,EAAAA,IAEQC,EAAA,CAFDL,MAAA,GAAMM,MAAM,U,mBACjB,IAA4B,EAA5BF,EAAAA,EAAAA,IAA4BI,M,uDCL3BR,MAAM,YAAYS,MAAA,iB,GAChBT,MAAM,kC,GAMNA,MAAM,gB,GAmBOA,MAAM,Q,GAQXA,MAAM,gC,GACTU,EAAAA,EAAAA,GAAsC,QAAhCV,MAAM,QAAO,gBAAY,G,GAE7BU,EAAAA,EAAAA,GAA8C,KAA3CV,MAAM,kCAAgC,S,GAKxCA,MAAM,U,GAmBCA,MAAM,Q,SAiBnBA,MAAM,yB,GACJA,MAAM,kC,GAEPU,EAAAA,EAAAA,GAA0C,KAAvCV,MAAM,8BAA4B,S,GAElCA,MAAM,e,GAWTU,EAAAA,EAAAA,GAA6C,QAAvCV,MAAM,qBAAoB,UAAM,G,mQA9FhDW,EAAAA,EAAAA,IA6GM,MA7GNC,EA6GM,EA5GJF,EAAAA,EAAAA,GAKM,MALNG,EAKM,EAJJT,EAAAA,EAAAA,IAAyEU,EAAA,CAA9DC,KAAK,UAAWC,QAAOC,EAAAC,yB,mBAAyB,IAAE,UAAF,S,qBAC3Dd,EAAAA,EAAAA,IAAqEU,EAAA,CAA1DC,KAAK,OAAQC,QAAOC,EAAAE,wB,mBAAwB,IAAE,UAAF,S,qBACvDf,EAAAA,EAAAA,IAAyEU,EAAA,CAA9DC,KAAK,UAAWC,QAAOC,EAAAG,qB,mBAAqB,IAAM,UAAN,a,4CAGzDT,EAAAA,EAAAA,IAqGM,MArGNU,EAqGM,EApGJjB,EAAAA,EAAAA,IAqEWkB,EAAA,CArEDtB,MAAM,QAASuB,KAAMtB,EAAAuB,UAAWC,OAAA,GAAOC,KAAK,S,mBACpD,IAqBkB,EArBlBtB,EAAAA,EAAAA,IAqBkBuB,EAAA,CArBDC,MAAM,OAAOC,KAAK,SAASC,MAAM,O,CACrCC,SAAOC,EAAAA,EAAAA,KAAEC,GAAK,EACvB7B,EAAAA,EAAAA,IAiBY8B,EAAA,CAhBVC,WAAA,G,WACSF,EAAMG,IAAIC,I,yBAAVJ,EAAMG,IAAIC,IAAGlC,EACtBmC,YAAY,KACXC,SAAMpC,GAAEc,EAAAuB,mBAAmBP,EAAMG,M,mBAGhC,IAAgC,gBADlCzB,EAAAA,EAAAA,IAUY8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IATKzB,EAAA0B,kBAARC,K,WADT9C,EAAAA,EAAAA,IAUY+C,EAAA,CARTC,IAAKF,EAAKG,MACVnB,MAAOgB,EAAKhB,MACZmB,MAAOH,EAAKG,O,mBAEb,IAEO,EAFPrC,EAAAA,EAAAA,GAEO,cADLN,EAAAA,EAAAA,IAA2D4C,EAAA,CAAnDC,OAAO,OAAOlC,KAAK,Q,mBAAO,IAAgB,mBAAb6B,EAAKG,OAAK,M,cAEjDrC,EAAAA,EAAAA,GAA0C,OAA1CwC,GAA0CC,EAAAA,EAAAA,IAApBP,EAAKhB,OAAK,M,8GAMxCxB,EAAAA,EAAAA,IAuCkBuB,EAAA,CAvCDE,KAAK,oBAAkB,CAC3BuB,QAAMpB,EAAAA,EAAAA,KACf,IAKM,EALNtB,EAAAA,EAAAA,GAKM,MALN2C,EAKM,CAJJC,GACAlD,EAAAA,EAAAA,IAEamD,EAAA,CAFDC,QAAQ,sCAAsCC,UAAU,S,mBAClE,IAA8C,CAA9CC,K,WAIK3B,SAAOC,EAAAA,EAAAA,KAAEC,GAAK,EACvBvB,EAAAA,EAAAA,GA2BM,MA3BNiD,EA2BM,EA1BJvD,EAAAA,EAAAA,IAoBY8B,EAAA,C,WAnBDD,EAAMG,IAAIwB,kB,yBAAV3B,EAAMG,IAAIwB,kBAAiBzD,EACpC0D,SAAA,GACA1B,WAAA,GACA2B,UAAA,GACAxB,YAAY,KACXyB,QAAK5D,GAAEc,EAAA+C,kCAAkC/B,EAAMG,M,mBAG9C,IAA8B,gBADhCzB,EAAAA,EAAAA,IAWY8B,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAVKzB,EAAAgD,gBAARrB,K,WADT9C,EAAAA,EAAAA,IAWY+C,EAAA,CATTC,IAAKF,EAAKG,MACVnB,MAAOgB,EAAKhB,MACZmB,MAAOH,EAAKG,O,mBAEb,IAGO,EAHPrC,EAAAA,EAAAA,GAGO,aAFgD,UAAbkC,EAAK7B,OAAI,WAAjDjB,EAAAA,EAAAA,IAA2EkD,EAAA,C,MAAnEC,OAAO,OAAOlC,KAAK,Q,mBAAoC,IAAG,UAAH,U,uBACP,YAAb6B,EAAK7B,OAAI,WAApDjB,EAAAA,EAAAA,IAAgFkD,EAAA,C,MAAxEC,OAAO,OAAOlC,KAAK,W,mBAAyC,IAAG,UAAH,U,0BAEtEL,EAAAA,EAAAA,GAA0C,OAA1CwD,GAA0Cf,EAAAA,EAAAA,IAApBP,EAAKhB,OAAK,M,oGAGpCxB,EAAAA,EAAAA,IAIkBU,EAAA,CAHhBd,MAAM,eACNmE,KAAA,GACCnD,QAAKb,GAAEc,EAAAmD,6BAA6BnC,EAAMG,M,mBAC5C,IAAK,UAAL,Y,mCAIPhC,EAAAA,EAAAA,IAIkBuB,EAAA,CAJDG,MAAM,OAAK,CACfC,SAAOC,EAAAA,EAAAA,KAAEC,GAAK,EACvB7B,EAAAA,EAAAA,IAAqFU,EAAA,CAA1EC,KAAK,SAAUC,QAAKb,GAAEc,EAAAoD,0BAA0BpC,EAAMG,M,mBAAM,IAAE,UAAF,S,oDAIpCnC,EAAAqE,UAAO,WAAhD3D,EAAAA,EAAAA,IA6BM,MA7BN4D,EA6BM,EA5BJ7D,EAAAA,EAAAA,GAiBM,MAjBN8D,EAiBM,EAhBJpE,EAAAA,EAAAA,IAEYU,EAAA,CAFDqD,KAAA,GAAKpD,KAAK,UAAWC,QAAKyD,EAAA,KAAAA,EAAA,QAAOxD,EAAAyD,uBAAuBzE,EAAAqE,SAAU,CAAK,I,mBAChF,IAA0C,CAA1CK,K,OAEFjE,EAAAA,EAAAA,GAYM,MAZNkE,EAYM,EAXJlE,EAAAA,EAAAA,GASO,OARJD,OAAKoE,EAAAA,EAAAA,IAAA,C,gBAAsC5E,EAAA6E,kB,8FAS9CC,OAGJ3E,EAAAA,EAAAA,IASO4E,EAAA,CARLhF,MAAM,kBACNiF,IAAI,MACJC,GAAG,yBACFC,UAAU,EACVC,UAAU,EACVC,cAAc,EACdC,cAAc,EACdC,sBAAsB,G,oCAlGQtF,EAAAuF,c,oEA+GzC,GACEC,WAAY,CACVC,IAAGA,EAAAA,YAELnE,OACE,MAAO,CACLC,UAAW,GAMXmE,qBAAsB,KACtBrB,SAAS,EACTkB,WAAW,EACXV,kBAAmB,OAEvB,EACAc,SAAU,CACRjD,mBACE,OAAOkD,EAAAA,EAASC,QAAQC,aAAaC,KAAIpD,IAChC,CACLG,MAAOH,EAAKP,IACZT,MAAOgB,EAAKqD,gBAGlB,EACAhC,iBAEE,MAAMiC,EAAwBL,EAAAA,EAASC,QAAQK,iBAAiBH,KAAIpD,IAC3D,CACLG,MAAOH,EAAKP,IACZT,MAAOgB,EAAKqD,aACZlF,KAAM,aAGJqF,EAA0BP,EAAAA,EAASC,QAAQO,0BAC9CC,QAAO1D,IAASsD,EAAsBK,MAAKC,GAAMA,EAAGzD,OAASH,EAAKP,QAClE2D,KAAIpD,IACI,CACLG,MAAOH,EAAKP,IACZT,MAAOgB,EAAKqD,aACZlF,KAAM,eAGZ,MAAO,IAAImF,KAA0BE,EACvC,GAEFK,QAAS,CAEPrF,sBACEsF,KAAKlB,WAAY,EACjBmB,EAAAA,EAAYC,+BAA+BC,MAAKC,IAC9CJ,KAAKlF,UAAYsF,EACjBC,YAAW,KACTL,KAAKlB,WAAY,CAAK,GACrB,IAAI,GAEX,EAEAtE,0BACEyF,EAAAA,EAAYK,6BAA6BN,KAAKlF,WAAWqF,MAAKC,IAC5DJ,KAAKO,MAAMC,KAAK,CACd/C,KAAM,OACNgD,KAAM,UACNC,kBAAkB,EAClBC,kBAAmB,KACnBC,YAAa,iBACb,GAEN,EACAnG,yBACEuF,KAAKlF,UAAU+F,KAAK,CAClBC,OAAQ,GACR5D,kBAAmB,IAEvB,EACAS,0BAA0BjC,GACxBsE,KAAKlF,UAAUiG,OAAOf,KAAKlF,UAAUkG,WAAU9E,GAAQA,EAAK4E,QAAUpF,EAAIoF,QAAU5E,EAAKgB,mBAAqBxB,EAAIwB,oBAAoB,EACxI,EACApB,mBAAmBJ,GAEbsE,KAAKlF,UAAU8E,QAAO1D,GAAQA,EAAK4E,QAAUpF,EAAIoF,SAAQG,OAAS,IACpEjB,KAAKO,MAAMC,KACT,CACE/C,KAAM,SACN7D,MAAO,GACP6G,KAAM,UACNC,kBAAkB,EAClBC,kBAAmB,KACnBC,YAAa,kBAEjBlF,EAAIoF,OAAS,IAGfd,KAAKf,qBAAuBe,KAAKlF,UAAUkG,WAAU9E,GAAQA,EAAK4E,QAAUpF,EAAIoF,QAElF,EACApD,6BAA6BhC,GAC3BsE,KAAKhC,uBACLkD,EAAAA,EAAIC,GAAG,uBAAwBnB,KAAKoB,yBACpCpB,KAAKf,qBAAuBe,KAAKlF,UAAUkG,WAAU9E,GAAQA,EAAK4E,QAAUpF,EAAIoF,QAAU5E,EAAKgB,mBAAqBxB,EAAIwB,oBACxH8C,KAAKpC,SAAU,EACfyC,YAAW,KACT,MAAMgB,EAAQrB,KAAKzC,eAAe+B,KAAIpD,GAAQA,EAAKG,QACnD2D,KAAKsB,MAAMhC,IAAIiC,+BAA+BF,EAAOrB,KAAK5B,kBAAkB,GAC3E,IACL,EACAgD,wBAAwBI,GAEtB,MAAMC,EAAUD,EAAQE,IAAI,QAC5B,IAAKD,EACH,OACF,IAAIE,EAAqB3B,KAAKlF,UAAUkF,KAAKf,sBAAsB/B,kBACnE,MAAM0E,EAAOH,EAAQI,UACfC,EAAmB9B,KAAKzC,eAAesC,MAAK3D,GAAQA,EAAKG,OAASuF,IACpED,EAAmBI,SAASH,GAC9BI,EAAAA,GAAUC,QAAQ,YAGhBH,GACFH,EAAmBd,KAAKe,EAE5B,EACA5D,uBACEkD,EAAAA,EAAIgB,IAAI,uBAAwBlC,KAAKoB,wBACvC,EACA9D,kCAAkC5B,GAChCsE,KAAKf,qBAAuBe,KAAKlF,UAAUkG,WAAU9E,GAAQA,EAAK4E,QAAUpF,EAAIoF,QAClF,GAEFqB,UACEnC,KAAKtF,qBACP,G,WCvPF,MAAM0H,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,Q,imCCwJA,MAAMtD,GAAYP,EAAAA,EAAAA,KAAI,GAChB8D,GAAoB9D,EAAAA,EAAAA,IAAI,UACxB+D,GAAkB/D,EAAAA,EAAAA,IAAI,IAGtBgE,GAAsBrD,EAAAA,EAAAA,KAAS,KACjC,MAAMsD,EAAS,CACXC,OAAQ,YACRC,UAAW,WACXC,MAAO,WAEX,OAAOH,EAAOH,EAAkBhG,MAAM,IAGpCuG,EAA2BC,IAC7BR,EAAkBhG,MAAQwG,CAAK,EAoB7BC,EAAcpH,MAIdqH,EAAgBrH,MAKhBsH,GAAmBzE,EAAAA,EAAAA,IAAI,CACzB,CAAElC,MAAO,aAAcnB,MAAO,QAC9B,CAAEmB,MAAO,aAAcnB,MAAO,QAC9B,CAAEmB,MAAO,aAAcnB,MAAO,UAK5B+H,GAAgB1E,EAAAA,EAAAA,IAAI,CACtB,CAAElC,MAAO,UAAWnB,MAAO,SAC3B,CAAEmB,MAAO,UAAWnB,MAAO,SAC3B,CAAEmB,MAAO,UAAWnB,MAAO,WAKzBgI,GAAa3E,EAAAA,EAAAA,IAAI,CACnB4E,WAAY,CACRC,QAAS,GACTC,YAAY,EACZC,aAAc,GACdC,SAAS,GAEbC,aAAc,CACVJ,QAAS,GACTC,YAAY,EACZC,aAAc,GACdC,SAAS,GAEbE,WAAY,CACRL,QAAS,GACTC,YAAY,EACZC,aAAc,GACdC,SAAS,MAKjBG,EAAAA,EAAAA,KAAM,IAAM,CACRR,EAAW7G,MAAM8G,WAAWE,WAC5BH,EAAW7G,MAAMmH,aAAaH,WAC9BH,EAAW7G,MAAMoH,WAAWJ,cAC7B,EAAEM,EAAUC,EAAYC,MAEnBF,IAAUT,EAAW7G,MAAM8G,WAAWC,QAAU,IAChDQ,IAAYV,EAAW7G,MAAMmH,aAAaJ,QAAU,IACpDS,IAAUX,EAAW7G,MAAMoH,WAAWL,QAAU,GAAE,IAI1D,MAAMU,EAA0BC,UAC5B,IACIjF,EAAUzC,OAAQ,EAElB2H,QAAQC,IAAI,2BAA4Bf,EAAW7G,OACnD2F,EAAAA,GAAUkC,QAAQ,QACtB,CAAE,MAAOC,GACLH,QAAQG,MAAM,+BAAgCA,GAC9CnC,EAAAA,GAAUmC,MAAM,OACpB,CAAE,QACErF,EAAUzC,OAAQ,CACtB,G,y1NClQJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,SJKA,IACE0C,WAAY,CACVqF,yBAAwB,EACxBC,yBAAwBA,IAE1BxJ,OACE,MAAO,CACLrB,YAAa,EAEjB,GKjBF,MAAM,IAA2B,OAAgB,GAAQ,CAAC,CAAC,SAAS8K,KAEpE,S","sources":["webpack://gpm_agvs/./src/components/SystemSettings/Dispatch/Index.vue","webpack://gpm_agvs/./src/components/SystemSettings/Dispatch/DedicatedVehiclesSetting.vue","webpack://gpm_agvs/./src/components/SystemSettings/Dispatch/DedicatedVehiclesSetting.vue?75ad","webpack://gpm_agvs/./src/components/SystemSettings/Dispatch/LocalAutoDispatchSetting.vue","webpack://gpm_agvs/./src/components/SystemSettings/Dispatch/LocalAutoDispatchSetting.vue?c97b","webpack://gpm_agvs/./src/components/SystemSettings/Dispatch/Index.vue?ca3b"],"sourcesContent":["<template>\r\n  <b-tabs class=\"w-100 my-2\" v-model=\"tabSelected\">\r\n    <b-tab class title=\"專用/優先車輛指派設定\">\r\n      <DedicatedVehiclesSetting />\r\n    </b-tab>\r\n    <b-tab class title=\"自動搬運設定\">\r\n      <LocalAutoDispatchSetting />\r\n    </b-tab>\r\n  </b-tabs>\r\n</template>\r\n<script>\r\nimport DedicatedVehiclesSetting from './DedicatedVehiclesSetting.vue'\r\nimport LocalAutoDispatchSetting from './LocalAutoDispatchSetting.vue'\r\nexport default {\r\n  components: {\r\n    DedicatedVehiclesSetting,\r\n    LocalAutoDispatchSetting\r\n  },\r\n  data() {\r\n    return {\r\n      tabSelected: 0\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style></style>","<template>\r\n  <div class=\"w-100 m-2\" style=\"height: 90vh;\">\r\n    <div class=\"d-flex border-bottom my-1 py-2\">\r\n      <el-button type=\"success\" @click=\"handleSaveButtonClicked\">儲存</el-button>\r\n      <el-button type=\"info\" @click=\"handleAddButtonClicked\">新增</el-button>\r\n      <el-button type=\"primary\" @click=\"downloadFromBackend\">Reload</el-button>\r\n      <!-- <span class=\"mx-2\">{{ selectedStationIndex }}</span> -->\r\n    </div>\r\n    <div class=\"d-flex h-100\" v-loading=\"isLoading\">\r\n      <el-table class=\"w-100\" :data=\"tableData\" border size=\"large\">\r\n        <el-table-column label=\"站點名稱\" prop=\"eqName\" width=\"220\">\r\n          <template #default=\"scope\">\r\n            <el-select\r\n              filterable\r\n              v-model=\"scope.row.tag\"\r\n              placeholder=\"站點\"\r\n              @change=\"handleEqNameChange(scope.row)\"\r\n            >\r\n              <el-option\r\n                v-for=\"item in eqStationOptions\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n              >\r\n                <span>\r\n                  <el-tag effect=\"dark\" type=\"info\">{{ item.value }}</el-tag>\r\n                </span>\r\n                <span class=\"mx-2\">{{ item.label }}</span>\r\n              </el-option>\r\n            </el-select>\r\n          </template>\r\n        </el-table-column>\r\n        <!-- <el-table-column label=\"Tag\" prop=\"tag\" width=\"60\"></el-table-column> -->\r\n        <el-table-column prop=\"dedicatedStation\">\r\n          <template #header>\r\n            <div class=\"d-flex justify-content-start\">\r\n              <span class=\"mx-2\">優先指派之充電站/停車位</span>\r\n              <el-tooltip content=\"選擇車輛時，將優先指派停在這些站點的車輛(將依距離目的地遠近進行指派)\" placement=\"right\">\r\n                <i class=\"bi bi-info-circle text-primary\"></i>\r\n              </el-tooltip>\r\n            </div>\r\n          </template>\r\n          <template #default=\"scope\">\r\n            <div class=\"d-flex\">\r\n              <el-select\r\n                v-model=\"scope.row.dedicatedStations\"\r\n                multiple\r\n                filterable\r\n                clearable\r\n                placeholder=\"站點\"\r\n                @focus=\"handleDedicatedStationSelectFocus(scope.row)\"\r\n              >\r\n                <el-option\r\n                  v-for=\"item in stationOptions\"\r\n                  :key=\"item.value\"\r\n                  :label=\"item.label\"\r\n                  :value=\"item.value\"\r\n                >\r\n                  <span>\r\n                    <el-tag effect=\"dark\" type=\"info\" v-if=\"item.type == 'charge'\">充電站</el-tag>\r\n                    <el-tag effect=\"dark\" type=\"success\" v-if=\"item.type == 'parkable'\">停車位</el-tag>\r\n                  </span>\r\n                  <span class=\"mx-2\">{{ item.label }}</span>\r\n                </el-option>\r\n              </el-select>\r\n              <el-button\r\n                class=\"text-primary\"\r\n                text\r\n                @click=\"handleMapSelectButtonClicked(scope.row)\"\r\n              >從地圖選擇</el-button>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column width=\"100\">\r\n          <template #default=\"scope\">\r\n            <el-button type=\"danger\" @click=\"handleDeleteButtonClicked(scope.row)\">刪除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div class=\"bg-light w-100 border\" v-if=\"mapShow\">\r\n        <div class=\"d-flex justify-content-between\">\r\n          <el-button text type=\"primary\" @click=\"()=>{offMapFeatureClicked();mapShow = false}\">\r\n            <i class=\"bi bi-chevron-double-right\"></i>\r\n          </el-button>\r\n          <div class=\"d-flex px-2\">\r\n            <div\r\n              :style=\"{\r\n                backgroundColor: mapHighLightColor,\r\n                width: '40px', \r\n                height: '15px',\r\n                fontWeight: 'bold',\r\n                borderRadius: '5px',\r\n                'margin-top': '5px'\r\n                }\"\r\n            ></div>\r\n            <span class=\"mx-2 text-primary\">可選擇的站點</span>\r\n          </div>\r\n        </div>\r\n        <Map\r\n          class=\"bg-light border\"\r\n          ref=\"map\"\r\n          id=\"dedicated_vehicles_map\"\r\n          :editable=\"false\"\r\n          :agv_show=\"false\"\r\n          :station_show=\"true\"\r\n          :rackInfoShow=\"false\"\r\n          :eq_lduld_status_show=\"false\"\r\n        ></Map>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { MapStore } from '@/components/Map/store';\r\nimport Map from '@/components/Map/Map.vue';\r\nimport bus from '@/event-bus';\r\nimport { DispatchAPI } from '@/api/VMSAPI';\r\nimport { ElMessage } from 'element-plus';\r\nexport default {\r\n  components: {\r\n    Map\r\n  },\r\n  data() {\r\n    return {\r\n      tableData: [\r\n        // {\r\n        //   tag: 2,\r\n        //   dedicatedStations: []\r\n        // }\r\n      ],\r\n      selectedStationIndex: null,\r\n      mapShow: false,\r\n      isLoading: false,\r\n      mapHighLightColor: 'lime'\r\n    }\r\n  },\r\n  computed: {\r\n    eqStationOptions() {\r\n      return MapStore.getters.AllEqStation.map(item => {\r\n        return {\r\n          value: item.tag,\r\n          label: item.name_display,\r\n        }\r\n      })\r\n    },\r\n    stationOptions() {\r\n\r\n      const _chargeStationOptions = MapStore.getters.AllChargeStation.map(item => {\r\n        return {\r\n          value: item.tag,\r\n          label: item.name_display,\r\n          type: 'charge'\r\n        }\r\n      })\r\n      const _parkableStationOptions = MapStore.getters.AllParkableStationOptions\r\n        .filter(item => !_chargeStationOptions.find(ct => ct.value == item.tag))\r\n        .map(item => {\r\n          return {\r\n            value: item.tag,\r\n            label: item.name_display,\r\n            type: 'parkable'\r\n          }\r\n        })\r\n      return [..._chargeStationOptions, ..._parkableStationOptions]\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    downloadFromBackend() {\r\n      this.isLoading = true;\r\n      DispatchAPI.GetEQStationDedicatedSetting().then(res => {\r\n        this.tableData = res;\r\n        setTimeout(() => {\r\n          this.isLoading = false;\r\n        }, 400);\r\n      })\r\n    },\r\n\r\n    handleSaveButtonClicked() {\r\n      DispatchAPI.SetEQStationDedicatedSetting(this.tableData).then(res => {\r\n        this.$swal.fire({\r\n          text: '儲存成功',\r\n          icon: 'success',\r\n          showCancelButton: false,\r\n          confirmButtonText: 'OK',\r\n          customClass: 'my-sweetalert'\r\n        })\r\n      })\r\n    },\r\n    handleAddButtonClicked() {\r\n      this.tableData.push({\r\n        eqName: '',\r\n        dedicatedStations: []\r\n      })\r\n    },\r\n    handleDeleteButtonClicked(row) {\r\n      this.tableData.splice(this.tableData.findIndex(item => item.eqName == row.eqName && item.dedicatedStations == row.dedicatedStations), 1)\r\n    },\r\n    handleEqNameChange(row) {\r\n      //alert(row.eqName)\r\n      if (this.tableData.filter(item => item.eqName == row.eqName).length > 1) {\r\n        this.$swal.fire(\r\n          {\r\n            text: '已經有此站點',\r\n            title: '',\r\n            icon: 'warning',\r\n            showCancelButton: false,\r\n            confirmButtonText: 'OK',\r\n            customClass: 'my-sweetalert'\r\n          })\r\n        row.eqName = ''\r\n\r\n      }\r\n      this.selectedStationIndex = this.tableData.findIndex(item => item.eqName == row.eqName);\r\n\r\n    },\r\n    handleMapSelectButtonClicked(row) {\r\n      this.offMapFeatureClicked()\r\n      bus.on('/map/feature_clicked', this.handleMapFeatureClicked)\r\n      this.selectedStationIndex = this.tableData.findIndex(item => item.eqName == row.eqName && item.dedicatedStations == row.dedicatedStations);\r\n      this.mapShow = true;\r\n      setTimeout(() => {\r\n        const _tags = this.stationOptions.map(item => item.value);\r\n        this.$refs.map.HighLightSpeficFeatureWithTags(_tags, this.mapHighLightColor);\r\n      }, 300);\r\n    },\r\n    handleMapFeatureClicked(feature) {\r\n      //alert(feature.get('data').Graph.Display)\r\n      const _ptData = feature.get('data');\r\n      if (!_ptData)\r\n        return;\r\n      let _dedicatedStations = this.tableData[this.selectedStationIndex].dedicatedStations;\r\n      const _tag = _ptData.TagNumber;\r\n      const _isTagSelectable = this.stationOptions.find(item => item.value == _tag);\r\n      if (_dedicatedStations.includes(_tag)) {\r\n        ElMessage.warning('已經選擇過此站點')\r\n        return;\r\n      }\r\n      if (_isTagSelectable) {\r\n        _dedicatedStations.push(_tag)\r\n      }\r\n    },\r\n    offMapFeatureClicked() {\r\n      bus.off('/map/feature_clicked', this.handleMapFeatureClicked)\r\n    },\r\n    handleDedicatedStationSelectFocus(row) {\r\n      this.selectedStationIndex = this.tableData.findIndex(item => item.eqName == row.eqName);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.downloadFromBackend();\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n</style>","import { render } from \"./DedicatedVehiclesSetting.vue?vue&type=template&id=49718430\"\nimport script from \"./DedicatedVehiclesSetting.vue?vue&type=script&lang=js\"\nexport * from \"./DedicatedVehiclesSetting.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n    <div class=\"w-100 m-2\" style=\"height: 90vh;\">\r\n        <div v-if=\"false\" class=\"d-flex border-bottom my-1 py-2\">\r\n            <el-button type=\"success\" @click=\"handleSaveButtonClicked\">儲存</el-button>\r\n            <el-button type=\"info\" @click=\"handleAddButtonClicked\">新增</el-button>\r\n            <el-button type=\"primary\" @click=\"downloadFromBackend\">Reload</el-button>\r\n        </div>\r\n        <div class=\"d-flex h-100\" v-loading=\"isLoading\">\r\n            <!-- 左側設定分類選單 -->\r\n            <div class=\"settings-sidebar\">\r\n                <el-menu\r\n                    :default-active=\"activeSettingType\"\r\n                    class=\"h-100\"\r\n                    @select=\"handleSettingTypeChange\">\r\n                    <el-menu-item index=\"buffer\">\r\n                        <el-icon>\r\n                            <Box />\r\n                        </el-icon>\r\n                        <span>暫存區自動搬運設置</span>\r\n                    </el-menu-item>\r\n                    <el-menu-item index=\"equipment\">\r\n                        <el-icon>\r\n                            <Monitor />\r\n                        </el-icon>\r\n                        <span>設備自動搬運設置</span>\r\n                    </el-menu-item>\r\n                    <el-menu-item index=\"route\">\r\n                        <el-icon>\r\n                            <Location />\r\n                        </el-icon>\r\n                        <span>路線優先級設置</span>\r\n                    </el-menu-item>\r\n                </el-menu>\r\n            </div>\r\n            <!-- 右側設定內容區 -->\r\n            <div class=\"settings-content\">\r\n                <el-card class=\"h-100\">\r\n                    <template #header>\r\n                        <div class=\"d-flex justify-content-between align-items-center\">\r\n                            <span class=\"font-weight-bold\">{{ currentSettingTitle }}</span>\r\n                            <!-- <el-button type=\"primary\" plain size=\"small\" @click=\"handleAddSetting\">\r\n                                <el-icon>\r\n                                    <Plus />\r\n                                </el-icon> 新增設定 </el-button> -->\r\n                        </div>\r\n                    </template>\r\n                    <div class=\"settings-table\" style=\"position:relative;top:-20px;\">\r\n                        <div v-if=\"activeSettingType === 'buffer'\">\r\n                            <div class=\"buffer-settings\">\r\n                                <el-form :model=\"bufferForm\" label-width=\"120px\">\r\n                                    <div class=\"d-flex justify-content-start mb-3\">\r\n                                        <el-button type=\"primary\" @click=\"handleBufferSettingSave\">儲存設置</el-button>\r\n                                    </div>\r\n                                    <!-- 空框設置 -->\r\n                                    <el-card class=\"mb-4\">\r\n                                        <template #header>\r\n                                            <div class=\"d-flex align-items-center\">\r\n                                                <span class=\"font-weight-bold\">空框自動搬運設置</span>\r\n                                            </div>\r\n                                        </template>\r\n                                        <el-form-item label=\"套用暫存區\">\r\n                                            <div class=\"d-flex align-items-center\">\r\n                                                <el-select v-model=\"bufferForm.emptyFrame.buffers\" multiple collapse-tags collapse-tags-tooltip placeholder=\"請選擇暫存區\" style=\"width: 100%\" :disabled=\"bufferForm.emptyFrame.applyToAll\">\r\n                                                    <el-option v-for=\"item in bufferOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n                                                </el-select>\r\n                                                <el-checkbox v-model=\"bufferForm.emptyFrame.applyToAll\" class=\"ms-2\">全部</el-checkbox>\r\n                                            </div>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"下游設備\">\r\n                                            <el-select v-model=\"bufferForm.emptyFrame.destinations\" multiple collapse-tags collapse-tags-tooltip placeholder=\"請選擇下游設備\" style=\"width: 100%\">\r\n                                                <el-option v-for=\"item in equipmentOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n                                            </el-select>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"啟用狀態\">\r\n                                            <el-switch v-model=\"bufferForm.emptyFrame.enabled\" />\r\n                                        </el-form-item>\r\n                                    </el-card>\r\n                                    <!-- 未烘烤實框設置 -->\r\n                                    <el-card class=\"mb-4\">\r\n                                        <template #header>\r\n                                            <div class=\"d-flex align-items-center\">\r\n                                                <span class=\"font-weight-bold\">未烘烤實框自動搬運設置</span>\r\n                                            </div>\r\n                                        </template>\r\n                                        <el-form-item label=\"套用暫存區\">\r\n                                            <div class=\"d-flex align-items-center\">\r\n                                                <el-select v-model=\"bufferForm.unbakedFrame.buffers\" multiple collapse-tags collapse-tags-tooltip placeholder=\"請選擇暫存區\" style=\"width: 100%\" :disabled=\"bufferForm.unbakedFrame.applyToAll\">\r\n                                                    <el-option v-for=\"item in bufferOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n                                                </el-select>\r\n                                                <el-checkbox v-model=\"bufferForm.unbakedFrame.applyToAll\" class=\"ms-2\">全部</el-checkbox>\r\n                                            </div>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"下游設備\">\r\n                                            <el-select v-model=\"bufferForm.unbakedFrame.destinations\" multiple collapse-tags collapse-tags-tooltip placeholder=\"請選擇下游設備\" style=\"width: 100%\">\r\n                                                <el-option v-for=\"item in equipmentOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n                                            </el-select>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"啟用狀態\">\r\n                                            <el-switch v-model=\"bufferForm.unbakedFrame.enabled\" />\r\n                                        </el-form-item>\r\n                                    </el-card>\r\n                                    <!-- 已烘烤實框設置 -->\r\n                                    <el-card>\r\n                                        <template #header>\r\n                                            <div class=\"d-flex align-items-center\">\r\n                                                <span class=\"font-weight-bold\">已烘烤實框自動搬運設置</span>\r\n                                            </div>\r\n                                        </template>\r\n                                        <el-form-item label=\"套用暫存區\">\r\n                                            <div class=\"d-flex align-items-center\">\r\n                                                <el-select v-model=\"bufferForm.bakedFrame.buffers\" multiple collapse-tags collapse-tags-tooltip placeholder=\"請選擇暫存區\" style=\"width: 100%\" :disabled=\"bufferForm.bakedFrame.applyToAll\">\r\n                                                    <el-option v-for=\"item in bufferOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n                                                </el-select>\r\n                                                <el-checkbox v-model=\"bufferForm.bakedFrame.applyToAll\" class=\"ms-2\">全部</el-checkbox>\r\n                                            </div>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"下游設備\">\r\n                                            <el-select v-model=\"bufferForm.bakedFrame.destinations\" multiple collapse-tags collapse-tags-tooltip placeholder=\"請選擇下游設備\" style=\"width: 100%\">\r\n                                                <el-option v-for=\"item in equipmentOptions\" :key=\"item.value\" :label=\"item.label\" :value=\"item.value\" />\r\n                                            </el-select>\r\n                                        </el-form-item>\r\n                                        <el-form-item label=\"啟用狀態\">\r\n                                            <el-switch v-model=\"bufferForm.bakedFrame.enabled\" />\r\n                                        </el-form-item>\r\n                                    </el-card>\r\n                                </el-form>\r\n                            </div>\r\n                        </div>\r\n                        <el-table v-else :data=\"currentSettings\" border style=\"width: 100%\">\r\n                            <!-- 根據不同類型顯示不同的表格列 -->\r\n                            <template v-if=\"activeSettingType === 'equipment'\">\r\n                                <el-table-column label=\"設備名稱\" prop=\"equipmentName\" />\r\n                                <el-table-column label=\"優先級\" prop=\"priority\" width=\"100\" />\r\n                                <el-table-column label=\"啟用狀態\" width=\"100\">\r\n                                    <template #default=\"{ row }\">\r\n                                        <el-switch v-model=\"row.isEnabled\" />\r\n                                    </template>\r\n                                </el-table-column>\r\n                            </template>\r\n                            <el-table-column label=\"操作\" width=\"150\" fixed=\"right\">\r\n                                <template #default=\"{ row }\">\r\n                                    <el-button-group>\r\n                                        <el-button type=\"primary\" size=\"small\" @click=\"handleEdit(row)\"> 編輯 </el-button>\r\n                                        <el-button type=\"danger\" size=\"small\" @click=\"handleDelete(row)\"> 刪除 </el-button>\r\n                                    </el-button-group>\r\n                                </template>\r\n                            </el-table-column>\r\n                        </el-table>\r\n                    </div>\r\n                </el-card>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script setup>\r\nimport { ref, computed, watch } from 'vue';\r\nimport { Box, Monitor, Location, Plus } from '@element-plus/icons-vue';\r\nimport { ElMessage } from 'element-plus';\r\n\r\nconst isLoading = ref(false);\r\nconst activeSettingType = ref('buffer');\r\nconst currentSettings = ref([]);\r\n\r\n// 計算當前設定標題\r\nconst currentSettingTitle = computed(() => {\r\n    const titles = {\r\n        buffer: '暫存區自動搬運設置',\r\n        equipment: '設備自動搬運設置',\r\n        route: '路線優先級設置'\r\n    };\r\n    return titles[activeSettingType.value];\r\n});\r\n\r\nconst handleSettingTypeChange = (index) => {\r\n    activeSettingType.value = index;\r\n    // TODO: 載入對應類型的設定數據\r\n};\r\n\r\nconst handleSaveButtonClicked = () => {\r\n    console.log('handleSaveButtonClicked');\r\n};\r\n\r\nconst handleAddButtonClicked = () => {\r\n    console.log('handleAddButtonClicked');\r\n};\r\n\r\nconst downloadFromBackend = () => {\r\n    console.log('downloadFromBackend');\r\n};\r\n\r\nconst handleAddSetting = () => {\r\n    // TODO: 實現新增設定的邏輯\r\n};\r\n\r\nconst handleEdit = (row) => {\r\n    // TODO: 實現編輯設定的邏輯\r\n};\r\n\r\nconst handleDelete = (row) => {\r\n    // TODO: 實現刪除設定的邏輯\r\n};\r\n\r\n// 設備選項\r\nconst equipmentOptions = ref([\r\n    { value: 'equipment1', label: '設備 1' },\r\n    { value: 'equipment2', label: '設備 2' },\r\n    { value: 'equipment3', label: '設備 3' },\r\n    // 可以從後端獲取更多設備選項\r\n]);\r\n\r\n// 暫存區選項\r\nconst bufferOptions = ref([\r\n    { value: 'buffer1', label: '暫存區 1' },\r\n    { value: 'buffer2', label: '暫存區 2' },\r\n    { value: 'buffer3', label: '暫存區 3' },\r\n    // 可以從後端獲取更多暫存區選項\r\n]);\r\n\r\n// 暫存區設置表單數據\r\nconst bufferForm = ref({\r\n    emptyFrame: {\r\n        buffers: [],          // 選擇的暫存區\r\n        applyToAll: true,     // 預設套用全部\r\n        destinations: [],      // 下游設備\r\n        enabled: false        // 啟用狀態\r\n    },\r\n    unbakedFrame: {\r\n        buffers: [],\r\n        applyToAll: true,\r\n        destinations: [],\r\n        enabled: false\r\n    },\r\n    bakedFrame: {\r\n        buffers: [],\r\n        applyToAll: true,\r\n        destinations: [],\r\n        enabled: false\r\n    }\r\n});\r\n\r\n// 監聽 applyToAll 變化\r\nwatch(() => [\r\n    bufferForm.value.emptyFrame.applyToAll,\r\n    bufferForm.value.unbakedFrame.applyToAll,\r\n    bufferForm.value.bakedFrame.applyToAll\r\n], ([emptyAll, unbakedAll, bakedAll]) => {\r\n    // 當切換到\"全部\"時，清空已選擇的暫存區\r\n    if (emptyAll) bufferForm.value.emptyFrame.buffers = [];\r\n    if (unbakedAll) bufferForm.value.unbakedFrame.buffers = [];\r\n    if (bakedAll) bufferForm.value.bakedFrame.buffers = [];\r\n});\r\n\r\n// 儲存暫存區設置\r\nconst handleBufferSettingSave = async () => {\r\n    try {\r\n        isLoading.value = true;\r\n        // TODO: 實現儲存邏輯，發送到後端\r\n        console.log('Buffer settings to save:', bufferForm.value);\r\n        ElMessage.success('設置已儲存');\r\n    } catch (error) {\r\n        console.error('Save buffer settings failed:', error);\r\n        ElMessage.error('儲存失敗');\r\n    } finally {\r\n        isLoading.value = false;\r\n    }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.settings-sidebar {\r\n    width: 250px;\r\n    border-right: 1px solid #dcdfe6;\r\n    margin-right: 16px;\r\n}\r\n\r\n.settings-content {\r\n    flex: 1;\r\n    overflow: hidden;\r\n\r\n    .el-card {\r\n        .settings-table {\r\n            margin-top: 16px;\r\n        }\r\n    }\r\n}\r\n\r\n:deep(.el-menu) {\r\n    border-right: none;\r\n}\r\n\r\n:deep(.el-menu-item) {\r\n    .el-icon {\r\n        margin-right: 8px;\r\n    }\r\n}\r\n\r\n.buffer-settings {\r\n    padding: 6px;\r\n\r\n    .el-card {\r\n        margin-bottom: 16px;\r\n\r\n        &:last-child {\r\n            margin-bottom: 0;\r\n        }\r\n    }\r\n}\r\n\r\n.ms-2 {\r\n    margin-left: 8px;\r\n}\r\n</style>","import script from \"./LocalAutoDispatchSetting.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./LocalAutoDispatchSetting.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./LocalAutoDispatchSetting.vue?vue&type=style&index=0&id=9845d74c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-9845d74c\"]])\n\nexport default __exports__","import { render } from \"./Index.vue?vue&type=template&id=090f2f73\"\nimport script from \"./Index.vue?vue&type=script&lang=js\"\nexport * from \"./Index.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_b_tabs","class","$data","tabSelected","$event","_createVNode","_component_b_tab","title","_component_DedicatedVehiclesSetting","_component_LocalAutoDispatchSetting","style","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_component_el_button","type","onClick","$options","handleSaveButtonClicked","handleAddButtonClicked","downloadFromBackend","_hoisted_3","_component_el_table","data","tableData","border","size","_component_el_table_column","label","prop","width","default","_withCtx","scope","_component_el_select","filterable","row","tag","placeholder","onChange","handleEqNameChange","_Fragment","_renderList","eqStationOptions","item","_component_el_option","key","value","_component_el_tag","effect","_hoisted_4","_toDisplayString","header","_hoisted_5","_hoisted_6","_component_el_tooltip","content","placement","_hoisted_7","_hoisted_8","dedicatedStations","multiple","clearable","onFocus","handleDedicatedStationSelectFocus","stationOptions","_hoisted_9","text","handleMapSelectButtonClicked","handleDeleteButtonClicked","mapShow","_hoisted_10","_hoisted_11","_cache","offMapFeatureClicked","_hoisted_12","_hoisted_13","_normalizeStyle","mapHighLightColor","_hoisted_14","_component_Map","ref","id","editable","agv_show","station_show","rackInfoShow","eq_lduld_status_show","isLoading","components","Map","selectedStationIndex","computed","MapStore","getters","AllEqStation","map","name_display","_chargeStationOptions","AllChargeStation","_parkableStationOptions","AllParkableStationOptions","filter","find","ct","methods","this","DispatchAPI","GetEQStationDedicatedSetting","then","res","setTimeout","SetEQStationDedicatedSetting","$swal","fire","icon","showCancelButton","confirmButtonText","customClass","push","eqName","splice","findIndex","length","bus","on","handleMapFeatureClicked","_tags","$refs","HighLightSpeficFeatureWithTags","feature","_ptData","get","_dedicatedStations","_tag","TagNumber","_isTagSelectable","includes","ElMessage","warning","off","mounted","__exports__","activeSettingType","currentSettings","currentSettingTitle","titles","buffer","equipment","route","handleSettingTypeChange","index","handleEdit","handleDelete","equipmentOptions","bufferOptions","bufferForm","emptyFrame","buffers","applyToAll","destinations","enabled","unbakedFrame","bakedFrame","watch","emptyAll","unbakedAll","bakedAll","handleBufferSettingSave","async","console","log","success","error","DedicatedVehiclesSetting","LocalAutoDispatchSetting","render"],"sourceRoot":""}