"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[508],{92709:function(e,l,t){t.d(l,{LO:function(){return o},ji:function(){return a},uk:function(){return s}});const a={0:"TCP/Socket",1:"RESTFul API"},o={0:{label:"UNKNOWN",labelCN:"未知",color:"rgb(64, 158, 255)"},1:{label:"IDLE",labelCN:"閒置",color:"orange"},2:{label:"RUN",labelCN:"執行",color:"green"},3:{label:"DOWN",labelCN:"當機",color:"red"},4:{label:"Charging",labelCN:"充電",color:"#0d6efd"}},s={0:{label:"FORK",labelCN:"叉車",color:"rgb(64, 158, 255)"},1:{label:"YUNTECH-FORK",labelCN:"叉車(雲科)",color:"orange"},2:{label:"INSPECTOIN",labelCN:"巡檢",color:"green"},3:{label:"SUBMARINE",labelCN:"潛盾",color:"red"},4:{label:"PARTS",labelCN:"Parts",color:"blue"}}},67163:function(e,l,t){t.d(l,{Z:function(){return u}});var a=t(66252),o=t(3577);const s=["onMousemove"],n=["onMousemove"];function d(e,l,t,d,r,i){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",{class:"table-selector",onMouseleave:l[0]||(l[0]=()=>{r.selectedRows=r.selectedCols=0}),onMousemove:l[1]||(l[1]=(...l)=>e.handleMouseMove&&e.handleMouseMove(...l)),onClick:l[2]||(l[2]=(...e)=>i.handleClick&&i.handleClick(...e))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.maxColNum,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,onMousemove:l=>i.HandleMoseMoveOnRow(l,e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.maxRowNum,(l=>((0,a.wg)(),(0,a.iD)("div",{class:(0,o.C_)(["cell d-flex",{selected:i.isSelected(e,l)}]),key:l,onMousemove:e=>i.HandleMoseMoveOnColumn(e,l)},null,42,n)))),128))],40,s)))),128))],32),(0,a._)("p",null,"選擇了 "+(0,o.zw)(r.selectedRows)+" 行 和 "+(0,o.zw)(r.selectedCols)+" 列 的表格",1)])}var r={props:{maxRowNum:{type:Number,default:6},maxColNum:{type:Number,default:10}},data(){return{selectedRows:0,selectedCols:0,hoverIndex:0}},methods:{isSelected(e,l){return l<=this.selectedRows&&e<=this.selectedCols},HandleMoseMoveOnRow(e,l){e.target;this.selectedCols=l},HandleMoseMoveOnColumn(e,l){e.target;this.selectedRows=l},handleClick(){this.$emit("on-selected",{row:this.selectedRows,col:this.selectedCols})}}},i=t(83744);const c=(0,i.Z)(r,[["render",d],["__scopeId","data-v-1578eb4a"]]);var u=c},84508:function(e,l,t){t.r(l),t.d(l,{default:function(){return X}});var a={};t.r(a);var o=t(66252);const s={class:"racks-manager"},n={class:""},d={class:""};function r(e,l,t,a,r,i){const c=(0,o.up)("RackListTable"),u=(0,o.up)("b-tab"),m=(0,o.up)("AddRack"),p=(0,o.up)("b-tabs"),w=(0,o.up)("b-card");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(w,{"no-body":""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{pills:"",vertical:"",justified:"","nav-class":"my-nav","content-class":"my-nav-tabs"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{title:"RACK列表",active:""},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(c)])])),_:1}),(0,o.Wm)(u,{title:"新增RACK"},{default:(0,o.w5)((()=>[(0,o._)("div",d,[(0,o.Wm)(m)])])),_:1})])),_:1})])),_:1})])}var i=t(3577);const c=e=>((0,o.dD)("data-v-15a08cb2"),e=e(),(0,o.Cn)(),e),u={class:"add-rack d-flex w-100"},m={class:"d-flex flex-column"},p=c((()=>(0,o._)("div",{style:{width:"26px"}},[(0,o._)("i",{class:"bi bi-grid-3x3",style:{"font-size":"26px"}})],-1))),w={class:"border-top py-2 text-start"},h={class:"border-start bg-light rack-edit-preview"};function f(e,l,t,a,s,n){const d=(0,o.up)("el-divider"),r=(0,o.up)("el-input"),c=(0,o.up)("el-form-item"),f=(0,o.up)("el-input-number"),b=(0,o.up)("ColumnRowSelector"),k=(0,o.up)("el-popover"),C=(0,o.up)("el-switch"),V=(0,o.up)("el-form"),_=(0,o.up)("b-button"),v=(0,o.up)("Rack");return(0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",null,[(0,o.Wm)(V,{"label-width":"100px","label-position":"left",style:{width:"400px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Basic")])),_:1}),(0,o.Wm)(c,{label:"RACK名稱"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"add-rack-input",modelValue:s.payload.AGV_Name,"onUpdate:modelValue":l[0]||(l[0]=e=>s.payload.AGV_Name=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{label:"IP"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"add-rack-input",modelValue:s.payload.IP,"onUpdate:modelValue":l[1]||(l[1]=e=>s.payload.IP=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{label:"Port"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"add-rack-input",modelValue:s.payload.Port,"onUpdate:modelValue":l[2]||(l[2]=e=>s.payload.Port=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Layout")])),_:1}),(0,o.Wm)(c,{label:"Row"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{min:1,class:"add-rack-input",modelValue:s.payload.row,"onUpdate:modelValue":l[3]||(l[3]=e=>s.payload.row=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{label:"Col"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(f,{min:1,class:"add-rack-input",modelValue:s.payload.col,"onUpdate:modelValue":l[4]||(l[4]=e=>s.payload.col=e)},null,8,["modelValue"]),(0,o.Wm)(k,{placement:"bottom-end",modelValue:s.colRowSelectorShow,"onUpdate:modelValue":l[6]||(l[6]=e=>s.colRowSelectorShow=e),width:"400",trigger:"click"},{reference:(0,o.w5)((()=>[p])),default:(0,o.w5)((()=>[(0,o.Wm)(b,{maxRowNum:3,onOnSelected:l[5]||(l[5]=l=>{this.colRowSelectorShow=e.fasle,this.payload.col=l.col,this.payload.row=l.row})})])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Developer")])),_:1}),(0,o.Wm)(c,{label:"模擬"},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{class:"add-rack-input",modelValue:s.payload.Simulation,"onUpdate:modelValue":l[7]||(l[7]=e=>s.payload.Simulation=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,o._)("div",w,[(0,o.Wm)(_,{onClick:l[8]||(l[8]=e=>n.IsEditMode?n.EditVehicle():n.AddVehicle()),variant:"primary",loading:s.adding,style:{width:"120px"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(n.btnText),1)])),_:1},8,["loading"])])]),(0,o._)("div",h,[(0,o.Uk)("Preview "),(0,o.Wm)(v,{rackName:"WIP-1",isEdit:!0,editProps:s.payload},null,8,["editProps"])])])}var b=t(38418),k=t(67163),C=t(98690),V={components:{Rack:C.Z,ColumnRowSelector:k.Z},props:{mode:{type:String,default:"add"}},computed:{IsEditMode(){return"edit"==this.mode},btnText(){return this.IsEditMode?"修改":"新增"}},data(){return{payload:{AGV_Name:"WIP-",Model:3,Protocol:0,IP:"127.0.0.1",Port:7025,row:3,col:3,Simulation:!1},oriAGVID:"",adding:!1,colRowSelectorShow:!1}},methods:{async AddVehicle(){this.adding=!0;var e=await b.fO.AddVehicle(this.payload);this.adding=!1,e.confirm?this.$swal.fire({text:"",title:"新增成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"top-most-sweetalert"}):this.$swal.fire({text:e.message,title:"新增失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"top-most-sweetalert"})},async EditVehicle(){var e=await b.fO.EditVehicle(this.payload,this.oriAGVID);e.confirm?this.$swal.fire({text:"",title:"修改成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:e.message,title:"修改失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},UpdatePayload(e){this.payload=e,this.oriAGVID=e.AGV_Name}}},_=t(83744);const v=(0,_.Z)(V,[["render",f],["__scopeId","data-v-15a08cb2"]]);var W=v,y=t(49963);const g={class:"vehicle-list-table"},O={class:"text-start"},R={class:""};function x(e,l,t,a,s,n){const d=(0,o.up)("el-table-column"),r=(0,o.up)("el-checkbox"),c=(0,o.up)("el-button"),u=(0,o.up)("el-table"),m=(0,o.up)("AddRack"),p=(0,o.up)("el-drawer"),w=(0,o.up)("EditRackVue");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",g,[(0,o.Wm)(u,{data:n.GetRackTableData,size:"large","row-key":"AGV_Name",border:"",style:{width:"100%"},"header-cell-style":n.tableHeaderStyle},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{label:"Rack 名稱",prop:"Name",width:"180"}),(0,o.Wm)(d,{label:"Row (層數)",prop:"Rows",width:"110"}),(0,o.Wm)(d,{label:"Column",prop:"Columns",width:"100"}),(0,o.Wm)(d,{label:"通訊方式",prop:"Protocol",width:"120"},{default:(0,o.w5)((()=>[(0,o.Uk)("MODBUS/TCP")])),_:1}),(0,o.Wm)(d,{label:"IP",prop:"ConnOptions.IP",width:"110"}),(0,o.Wm)(d,{label:"PORT",prop:"ConnOptions.Port",width:"80"}),(0,o.Wm)(d,{label:"啟用模擬",prop:"IsEmulation",width:"90"},{default:(0,o.w5)((e=>[(0,o.Wm)(r,{disabled:!0,modelValue:e.row.IsEmulation,"onUpdate:modelValue":l=>e.row.IsEmulation=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(d,{fixed:"right",label:"Operations","min-width":"180"},{default:(0,o.w5)((e=>[(0,o.Wm)(c,{type:"primary",onClick:()=>{s.selectedWIPName=e.row.Name,this.$refs["rackEditor"].openDrawer(e.row)}},{default:(0,o.w5)((()=>[(0,o.Uk)("編輯")])),_:2},1032,["onClick"]),(0,o.Wm)(c,{type:"danger",onClick:(0,y.iM)((l=>n.delete_row(e.row)),["prevent"])},{default:(0,o.w5)((()=>[(0,o.Uk)(" 刪除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","header-cell-style"]),(0,o.Wm)(p,{"z-index":"1",modelValue:s.ShowEditAGVPropertyDrawer,"onUpdate:modelValue":l[0]||(l[0]=e=>s.ShowEditAGVPropertyDrawer=e),size:"70%"},{header:(0,o.w5)((({})=>[(0,o._)("h3",O,(0,i.zw)(n.drawerText),1)])),default:(0,o.w5)((()=>[(0,o._)("div",R,[(0,o.Wm)(m,{ref:"AgvPropertyEditor",mode:"edit"},null,512)])])),_:1},8,["modelValue"])]),(0,o.Wm)(w,{ref:"rackEditor",wipName:s.selectedWIPName},null,8,["wipName"])],64)}var N=t(24239),P=t(92709);const I=e=>((0,o.dD)("data-v-237c1ef4"),e=e(),(0,o.Cn)(),e),S={class:"drawer-content"},D={class:"d-flex justify-content-between"},U={class:"title"},A={class:"actions px-2 py-2"},T={class:"container d-flex"},E={class:"rack-basic-properties border px-3 mx-2 rounded"},M={class:"d-flex flex-column"},B=I((()=>(0,o._)("div",{style:{width:"26px"}},[(0,o._)("i",{class:"bi bi-grid-3x3",style:{"font-size":"26px"}})],-1))),G={class:"w-100 bg-light rack-container border rounded px-2 text-start"},K=I((()=>(0,o._)("span",null,"檢視模式",-1)));function H(e,l,t,a,s,n){const d=(0,o.up)("b-button"),r=(0,o.up)("el-divider"),c=(0,o.up)("el-input"),u=(0,o.up)("el-form-item"),m=(0,o.up)("el-input-number"),p=(0,o.up)("ColumnRowSelector"),w=(0,o.up)("el-popover"),h=(0,o.up)("el-switch"),f=(0,o.up)("el-form"),b=(0,o.up)("el-option"),k=(0,o.up)("el-select"),C=(0,o.up)("Rack"),V=(0,o.up)("el-drawer");return(0,o.wg)(),(0,o.j4)(V,{modelValue:s.drawerVisible,"onUpdate:modelValue":l[9]||(l[9]=e=>s.drawerVisible=e),"before-close":n.closeDrawer,"show-close":!1,"with-header":!1,size:"70%"},{default:(0,o.w5)((()=>[(0,o._)("div",S,[(0,o._)("div",D,[(0,o._)("div",U,"編輯設定 | "+(0,i.zw)(s.rackOptions.Name),1),(0,o._)("div",A,[(0,o.Wm)(d,{class:"mx-1",variant:"primary",onClick:n.HandleSaveButtonClicked},{default:(0,o.w5)((()=>[(0,o.Uk)("儲存")])),_:1},8,["onClick"]),(0,o.Wm)(d,{class:"mx-1",variant:"danger",onClick:l[0]||(l[0]=e=>n.closeDrawer())},{default:(0,o.w5)((()=>[(0,o.Uk)("離開")])),_:1})])]),(0,o.Wm)(r),(0,o._)("div",T,[(0,o._)("div",E,[(0,o.Wm)(f,{"label-width":"100px","label-position":"left",style:{width:"400px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Basic")])),_:1}),(0,o.Wm)(u,{label:"RACK名稱"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"add-rack-input",modelValue:s.rackOptions.Name,"onUpdate:modelValue":l[1]||(l[1]=e=>s.rackOptions.Name=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"IP"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"add-rack-input",modelValue:s.rackOptions.ConnOptions.IP,"onUpdate:modelValue":l[2]||(l[2]=e=>s.rackOptions.ConnOptions.IP=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"Port"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"add-rack-input",modelValue:s.rackOptions.ConnOptions.Port,"onUpdate:modelValue":l[3]||(l[3]=e=>s.rackOptions.ConnOptions.Port=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Layout")])),_:1}),(0,o.Wm)(u,{label:"Row(層數)"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{min:1,class:"add-rack-input",modelValue:s.rackOptions.Rows,"onUpdate:modelValue":l[4]||(l[4]=e=>s.rackOptions.Rows=e),onInput:n.HandleRowChanged},null,8,["modelValue","onInput"])])),_:1}),(0,o.Wm)(u,{label:"Col"},{default:(0,o.w5)((()=>[(0,o._)("div",M,[(0,o.Wm)(m,{min:1,class:"add-rack-input",modelValue:s.rackOptions.Columns,"onUpdate:modelValue":l[5]||(l[5]=e=>s.rackOptions.Columns=e),onInput:n.HandleColChanged},null,8,["modelValue","onInput"]),(0,o.Wm)(w,{placement:"bottom-end",modelValue:s.colRowSelectorShow,"onUpdate:modelValue":l[7]||(l[7]=e=>s.colRowSelectorShow=e),width:"400",trigger:"click"},{reference:(0,o.w5)((()=>[B])),default:(0,o.w5)((()=>[(0,o.Wm)(p,{maxRowNum:3,onOnSelected:l[6]||(l[6]=l=>{this.colRowSelectorShow=e.fasle,this.rackOptions.Rows=l.col,this.rackOptions.Columns=l.row})})])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Developer")])),_:1}),(0,o.Wm)(u,{label:"模擬"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"add-rack-input",modelValue:s.rackOptions.IsEmulation,"onUpdate:modelValue":l[8]||(l[8]=e=>s.rackOptions.IsEmulation=e)},null,8,["modelValue"])])),_:1})])),_:1})]),(0,o._)("div",G,[(0,o.Wm)(r,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Input Address and Tags")])),_:1}),K,(0,o.Uk)(),(0,o.Wm)(k,{class:"mx-3",placeholder:"abc",title:"bbbb"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{label:"圖示"}),(0,o.Wm)(b,{label:"表格"})])),_:1}),(0,o.Wm)(C,{ref:"rack_edit",rackName:t.wipName,showIOLocationEdit:!0},null,8,["rackName"])])])])])),_:1},8,["modelValue","before-close"])}var $=t(10844),z=t(81348),j={components:{Rack:C.Z,ColumnRowSelector:k.Z},props:{wipName:{type:String,default:""}},data(){return{drawerVisible:!0,rackData:{WIPName:"WIP-3",Columns:3,Rows:3,ColumnsTagMap:Object,Ports:Array[9]},rackOptions:{Name:"WIP-",Rows:1,Columns:1,Protocol:0,ConnOptions:{IP:"127.0.0.1",Port:5e3},IsEmulation:!1},beginOptionJson:"",colRowSelectorShow:!1}},methods:{openDrawer(e){e&&Object.assign(this.rackOptions,e),this.beginOptionJson=JSON.stringify(this.rackOptions),this.drawerVisible=!0,setTimeout((()=>{let e=N.jU.getters.WIPData.find((e=>e.WIPName==this.wipName));e&&Object.assign(this.rackData,e);let l=this.$refs["rack_edit"];l.speficRackData=this.rackData}),100)},closeDrawer(){var e=JSON.stringify(this.rackOptions),l=this.beginOptionJson!=e;l?$.T.confirm("設定尚未儲存，確定要離開?","Warning",{type:"warning"}).then((()=>{this.drawerVisible=!1})).catch((()=>{})):this.drawerVisible=!1},HandleRowChanged(e){this.rackData.Rows=e;let l=this.$refs["rack_edit"];l.speficRackData=this.rackData},HandleColChanged(e){this.rackData.Columns=e;let l=this.$refs["rack_edit"];l.speficRackData=this.rackData},HandleSaveButtonClicked(){$.T.confirm("確定要變更RACK設定","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{this.beginOptionJson=JSON.stringify(this.rackOptions),(0,z.z8)({type:"success",message:"Delete completed"})})).catch((()=>{}))}}};const Z=(0,_.Z)(j,[["render",H],["__scopeId","data-v-237c1ef4"]]);var L=Z,J={components:{AddRack:W,EditRackVue:L},inject:["tableHeaderStyle"],data(){return{table:[],selectAGVProertyToEdit:{},ShowEditAGVPropertyDrawer:!1,selectedWIPName:""}},computed:{GetRackTableData(){var e=N.jU.getters.WIPOptions;return e},ProtocolText(){return P.ji},AGVMainStatus(){return P.LO},VehicleModels(){return P.uk},drawerText(){return this.selectAGVProertyToEdit.AGV_Name}},methods:{edit_row(e){this.selectAGVProertyToEdit=e,this.ShowEditAGVPropertyDrawer=!0,setTimeout((()=>{this.$refs["AgvPropertyEditor"].UpdatePayload(e)}),1)},async delete_row(e){var l=async()=>{var l=await b.fO.DeleteVehicle(e.AGV_Name);l.confirm?this.$swal.fire({text:"",title:"刪除車輛成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:l.message,title:"刪除車輛失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})};this.$swal.fire({text:"",title:`確定要刪除車輛-${e.AGV_Name}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&l()}))}}};const Y=(0,_.Z)(J,[["render",x]]);var F=Y,q={components:{AddRack:W,RackListTable:F},data(){return{test:"AV"}}};"function"===typeof a["default"]&&(0,a["default"])(q);const Q=(0,_.Z)(q,[["render",r]]);var X=Q}}]);
//# sourceMappingURL=508.ddd5646a.js.map