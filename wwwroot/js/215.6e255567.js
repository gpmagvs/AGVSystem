"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[215],{42215:function(e,t,o){o.r(t),o.d(t,{default:function(){return S}});var l=o(79003);const a=e=>((0,l.pushScopeId)("data-v-86be08d2"),e=e(),(0,l.popScopeId)(),e),n={class:"agv-battery-setting d-flex h-100"},r=["textContent"],i={class:"descript mx-2 py-5 border flex-fill bg-light text-start",style:{"font-weight":"bold"}},c=a((()=>(0,l.createElementVNode)("h5",null,"高電量區",-1))),s=a((()=>(0,l.createElementVNode)("div",null,"- 可執行所有任務訂單。",-1))),d=a((()=>(0,l.createElementVNode)("h5",null,"中高電量區",-1))),m=a((()=>(0,l.createElementVNode)("div",null,"- 可執行所有任務訂單。",-1))),u=a((()=>(0,l.createElementVNode)("h5",null,"中低電量區",-1))),p=a((()=>(0,l.createElementVNode)("div",null,"- 當AGV非充電時，可執行所有任務訂單。",-1))),h=a((()=>(0,l.createElementVNode)("div",null,"- 當AGV進行充電時，僅允許AGV執行充電任務， 等待電量位於中高電量以上方可執行所有任務訂單。",-1))),f=a((()=>(0,l.createElementVNode)("h5",null,"低電量區",-1))),b=a((()=>(0,l.createElementVNode)("div",null,"- 當AGV低電量時將無法進行除充電任務以外的所有任務訂單。",-1))),g=a((()=>(0,l.createElementVNode)("div",null,"- 運轉模式下，系統會強制AGV進行充電。",-1)));function v(e,t,o,a,v,y){const V=(0,l.resolveComponent)("el-input-number"),w=(0,l.resolveComponent)("el-table-column"),N=(0,l.resolveComponent)("el-table"),C=(0,l.resolveComponent)("el-card"),x=(0,l.resolveComponent)("el-timeline-item"),k=(0,l.resolveComponent)("el-timeline");return(0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.createVNode)(N,{class:"w-50 mx-1","header-cell-style":e.tableHeaderStyle,size:"large",border:"",data:e.datas},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.columnMap,(t=>((0,l.openBlock)(),(0,l.createBlock)(w,{key:t.prop,label:t.label,prop:t.prop},{default:(0,l.withCtx)((o=>["string"==t.type?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,textContent:(0,l.toDisplayString)(o.row[t.prop]),class:""},null,8,r)):(0,l.createCommentVNode)("",!0),"number"==t.type?((0,l.openBlock)(),(0,l.createBlock)(V,{key:1,modelValue:o.row[t.prop],"onUpdate:modelValue":e=>o.row[t.prop]=e,onChange:t=>e.modify(o.row,o.row.agvName)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(0,l.createCommentVNode)("",!0)])),_:2},1032,["label","prop"])))),128))])),_:1},8,["header-cell-style","data"]),(0,l.createElementVNode)("div",i,[(0,l.createVNode)(k,{class:"bat-timeline",style:{"max-width":"600px"}},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(x,{timestamp:"100%",placement:"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(C,{class:"bg-success text-light"},{default:(0,l.withCtx)((()=>[c,s])),_:1})])),_:1}),(0,l.createVNode)(x,{timestamp:"高電量",placement:"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(C,{class:"bg-success text-light"},{default:(0,l.withCtx)((()=>[d,m])),_:1})])),_:1}),(0,l.createVNode)(x,{timestamp:"中電量",placement:"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(C,{class:"text-light",style:{"background-color":"orange"}},{default:(0,l.withCtx)((()=>[u,p,h])),_:1})])),_:1}),(0,l.createVNode)(x,{timestamp:"低電量-強制充電",placement:"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(C,{class:"bg-danger text-light"},{default:(0,l.withCtx)((()=>[f,b,g])),_:1})])),_:1}),(0,l.createVNode)(x,{timestamp:"0%",placement:"top"})])),_:1})])])}var y=o(47327),V=o(26666),w=o(38418);class N{constructor(e,t,o){(0,y.Z)(this,"label",void 0),(0,y.Z)(this,"prop",void 0),(0,y.Z)(this,"type",void 0),this.label=e,this.prop=t,this.type=o}}var C=(0,l.defineComponent)({inject:["tableHeaderStyle"],data(){return{datas:[],columnMap:[new N("車輛名稱","agvName","string"),new N("低電量-強制充電(%)","lowLevel","number"),new N("中電量(%)","middleLevel","number"),new N("高電量(%)","highLevel","number")],throttleState:{isOperating:!1,tout:setTimeout((()=>{}),1),postModifiedValToBackend(e){clearTimeout(this.tout),this.tout=setTimeout((async()=>{console.log(e);try{var t=await w.bh.ModifySetting(e.agvName,e);console.info(t),V.bM.success({message:`已完成 ${e.agvName} 電量管理參數修改`,position:"top-right",duration:2e3})}catch(o){V.bM.error({message:`${e.agvName} 電量管理參數修改失敗-${o}`,position:"top-right",duration:2e3})}}),500)},cancelLastOperate(){}}}},methods:{fetchSettings(){setTimeout((async()=>{try{var e=await w.bh.GetSettings();Object.assign(this.datas,e)}catch(t){V.bM.error({message:`電量管理參數下載失敗-${t}`,position:"top-right",duration:-1})}}),100)},modify(e,t){this.throttleState.postModifiedValToBackend(e)}},mounted(){this.fetchSettings()}}),x=o(40089);const k=(0,x.Z)(C,[["render",v],["__scopeId","data-v-86be08d2"]]);var S=k},47327:function(e,t,o){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}o.d(t,{Z:function(){return r}});o(21703);function a(e,t){if("object"!==l(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,t||"default");if("object"!==l(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function n(e){var t=a(e,"string");return"symbol"===l(t)?t:String(t)}function r(e,t,o){return t=n(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}}}]);
//# sourceMappingURL=215.6e255567.js.map