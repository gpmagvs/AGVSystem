"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[493],{92709:function(e,t,a){a.d(t,{LO:function(){return o},ji:function(){return l},uk:function(){return r}});const l={0:"TCP/Socket",1:"RESTFul API"},o={0:{label:"UNKNOWN",labelCN:"未知",color:"rgb(64, 158, 255)"},1:{label:"IDLE",labelCN:"閒置",color:"orange"},2:{label:"RUN",labelCN:"執行",color:"green"},3:{label:"DOWN",labelCN:"當機",color:"red"},4:{label:"Charging",labelCN:"充電",color:"#0d6efd"}},r={0:{label:"FORK",labelCN:"叉車",color:"rgb(64, 158, 255)"},1:{label:"YUNTECH-FORK",labelCN:"叉車(雲科)",color:"orange"},2:{label:"INSPECTOIN",labelCN:"巡檢",color:"green"},3:{label:"SUBMARINE",labelCN:"潛盾",color:"red"},4:{label:"PARTS",labelCN:"Parts",color:"blue"}}},34907:function(e,t,a){a.r(t),a.d(t,{default:function(){return Q}});var l={};a.r(l);var o=a(66252);const r={class:"racks-manager"},n={class:""},i={class:""};function d(e,t,a,l,d,s){const c=(0,o.up)("RackListTable"),u=(0,o.up)("b-tab"),m=(0,o.up)("AddRack"),p=(0,o.up)("b-tabs"),w=(0,o.up)("b-card");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(w,{"no-body":""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{pills:"",vertical:"",justified:"","nav-class":"my-nav","content-class":"my-nav-tabs"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{title:"RACK列表",active:""},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(c)])])),_:1}),(0,o.Wm)(u,{title:"新增RACK"},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.Wm)(m)])])),_:1})])),_:1})])),_:1})])}var s=a(3577);const c=e=>((0,o.dD)("data-v-15a08cb2"),e=e(),(0,o.Cn)(),e),u={class:"add-rack d-flex w-100"},m={class:"d-flex flex-column"},p=c((()=>(0,o._)("div",{style:{width:"26px"}},[(0,o._)("i",{class:"bi bi-grid-3x3",style:{"font-size":"26px"}})],-1))),w={class:"border-top py-2 text-start"},f={class:"border-start bg-light rack-edit-preview"};function h(e,t,a,l,r,n){const i=(0,o.up)("el-divider"),d=(0,o.up)("el-input"),c=(0,o.up)("el-form-item"),h=(0,o.up)("el-input-number"),b=(0,o.up)("ColumnRowSelector"),k=(0,o.up)("el-popover"),V=(0,o.up)("el-switch"),_=(0,o.up)("el-form"),W=(0,o.up)("b-button"),C=(0,o.up)("Rack");return(0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",null,[(0,o.Wm)(_,{"label-width":"100px","label-position":"left",style:{width:"400px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Basic")])),_:1}),(0,o.Wm)(c,{label:"RACK名稱"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"add-rack-input",modelValue:r.payload.AGV_Name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.payload.AGV_Name=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{label:"IP"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"add-rack-input",modelValue:r.payload.IP,"onUpdate:modelValue":t[1]||(t[1]=e=>r.payload.IP=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{label:"Port"},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"add-rack-input",modelValue:r.payload.Port,"onUpdate:modelValue":t[2]||(t[2]=e=>r.payload.Port=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Layout")])),_:1}),(0,o.Wm)(c,{label:"Row"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{min:1,class:"add-rack-input",modelValue:r.payload.row,"onUpdate:modelValue":t[3]||(t[3]=e=>r.payload.row=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{label:"Col"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(h,{min:1,class:"add-rack-input",modelValue:r.payload.col,"onUpdate:modelValue":t[4]||(t[4]=e=>r.payload.col=e)},null,8,["modelValue"]),(0,o.Wm)(k,{placement:"bottom-end",modelValue:r.colRowSelectorShow,"onUpdate:modelValue":t[6]||(t[6]=e=>r.colRowSelectorShow=e),width:"400",trigger:"click"},{reference:(0,o.w5)((()=>[p])),default:(0,o.w5)((()=>[(0,o.Wm)(b,{maxRowNum:3,onOnSelected:t[5]||(t[5]=t=>{this.colRowSelectorShow=e.fasle,this.payload.col=t.col,this.payload.row=t.row})})])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Developer")])),_:1}),(0,o.Wm)(c,{label:"模擬"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:"add-rack-input",modelValue:r.payload.Simulation,"onUpdate:modelValue":t[7]||(t[7]=e=>r.payload.Simulation=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,o._)("div",w,[(0,o.Wm)(W,{onClick:t[8]||(t[8]=e=>n.IsEditMode?n.EditVehicle():n.AddVehicle()),variant:"primary",loading:r.adding,style:{width:"120px"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(n.btnText),1)])),_:1},8,["loading"])])]),(0,o._)("div",f,[(0,o.Uk)("Preview "),(0,o.Wm)(C,{rackName:"WIP-1",isEdit:!0,editProps:r.payload},null,8,["editProps"])])])}var b=a(38418),k=a(67163),V=a(13342),_={components:{Rack:V.Z,ColumnRowSelector:k.Z},props:{mode:{type:String,default:"add"}},computed:{IsEditMode(){return"edit"==this.mode},btnText(){return this.IsEditMode?"修改":"新增"}},data(){return{payload:{AGV_Name:"WIP-",Model:3,Protocol:0,IP:"127.0.0.1",Port:7025,row:3,col:3,Simulation:!1},oriAGVID:"",adding:!1,colRowSelectorShow:!1}},methods:{async AddVehicle(){this.adding=!0;var e=await b.fO.AddVehicle(this.payload);this.adding=!1,e.confirm?this.$swal.fire({text:"",title:"新增成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"top-most-sweetalert"}):this.$swal.fire({text:e.message,title:"新增失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"top-most-sweetalert"})},async EditVehicle(){var e=await b.fO.EditVehicle(this.payload,this.oriAGVID);e.confirm?this.$swal.fire({text:"",title:"修改成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:e.message,title:"修改失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},UpdatePayload(e){this.payload=e,this.oriAGVID=e.AGV_Name}}},W=a(83744);const C=(0,W.Z)(_,[["render",h],["__scopeId","data-v-15a08cb2"]]);var y=C,g=a(49963);const v={class:"vehicle-list-table"},O={class:"text-start"},P={class:""};function R(e,t,a,l,r,n){const i=(0,o.up)("el-table-column"),d=(0,o.up)("el-checkbox"),c=(0,o.up)("el-button"),u=(0,o.up)("el-table"),m=(0,o.up)("AddRack"),p=(0,o.up)("el-drawer"),w=(0,o.up)("EditRackVue");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",v,[(0,o.Wm)(u,{data:n.GetRackTableData,size:"large","row-key":"AGV_Name",border:"",style:{width:"100%"},"header-cell-style":n.tableHeaderStyle},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{label:"Rack 名稱",prop:"Name",width:"180"}),(0,o.Wm)(i,{label:"Row (層數)",prop:"Rows",width:"110"}),(0,o.Wm)(i,{label:"Column",prop:"Columns",width:"100"}),(0,o.Wm)(i,{label:"通訊方式",prop:"Protocol",width:"120"},{default:(0,o.w5)((()=>[(0,o.Uk)("MODBUS/TCP")])),_:1}),(0,o.Wm)(i,{label:"IP",prop:"ConnOptions.IP",width:"110"}),(0,o.Wm)(i,{label:"PORT",prop:"ConnOptions.Port",width:"80"}),(0,o.Wm)(i,{label:"啟用模擬",prop:"IsEmulation",width:"90"},{default:(0,o.w5)((e=>[(0,o.Wm)(d,{disabled:!0,modelValue:e.row.IsEmulation,"onUpdate:modelValue":t=>e.row.IsEmulation=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(i,{fixed:"right",label:"Operations","min-width":"180"},{default:(0,o.w5)((e=>[(0,o.Wm)(c,{type:"primary",onClick:()=>{r.selectedWIPName=e.row.Name,this.$refs["rackEditor"].openDrawer(e.row)}},{default:(0,o.w5)((()=>[(0,o.Uk)("編輯")])),_:2},1032,["onClick"]),(0,o.Wm)(c,{type:"danger",onClick:(0,g.iM)((t=>n.delete_row(e.row)),["prevent"])},{default:(0,o.w5)((()=>[(0,o.Uk)("刪除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","header-cell-style"]),(0,o.Wm)(p,{"z-index":1,modelValue:r.ShowEditAGVPropertyDrawer,"onUpdate:modelValue":t[0]||(t[0]=e=>r.ShowEditAGVPropertyDrawer=e),size:"70%"},{header:(0,o.w5)((({})=>[(0,o._)("h3",O,(0,s.zw)(n.drawerText),1)])),default:(0,o.w5)((()=>[(0,o._)("div",P,[(0,o.Wm)(m,{ref:"AgvPropertyEditor",mode:"edit"},null,512)])])),_:1},8,["modelValue"])]),(0,o.Wm)(w,{ref:"rackEditor",wipName:r.selectedWIPName},null,8,["wipName"])],64)}var x=a(25044),N=a(92709);const I=e=>((0,o.dD)("data-v-b95f9d14"),e=e(),(0,o.Cn)(),e),S={class:"drawer-content"},U={class:"d-flex justify-content-between"},A={class:"title"},D={class:"actions px-2 py-2"},T={class:"container d-flex"},E={class:"rack-basic-properties border px-3 mx-2 rounded"},B={class:"d-flex flex-column"},G=I((()=>(0,o._)("div",{style:{width:"26px"}},[(0,o._)("i",{class:"bi bi-grid-3x3",style:{"font-size":"26px"}})],-1))),K={class:"w-100 bg-light rack-container border rounded px-2 text-start"};function $(e,t,a,l,r,n){const i=(0,o.up)("b-button"),d=(0,o.up)("el-divider"),c=(0,o.up)("el-input"),u=(0,o.up)("el-form-item"),m=(0,o.up)("el-input-number"),p=(0,o.up)("ColumnRowSelector"),w=(0,o.up)("el-popover"),f=(0,o.up)("el-switch"),h=(0,o.up)("el-form"),b=(0,o.up)("Rack"),k=(0,o.up)("el-drawer");return(0,o.wg)(),(0,o.j4)(k,{modelValue:r.drawerVisible,"onUpdate:modelValue":t[9]||(t[9]=e=>r.drawerVisible=e),"before-close":n.closeDrawer,"show-close":!1,"with-header":!1,size:"70%"},{default:(0,o.w5)((()=>[(0,o._)("div",S,[(0,o._)("div",U,[(0,o._)("div",A,"編輯設定 | "+(0,s.zw)(r.rackOptions.Name),1),(0,o._)("div",D,[(0,o.Wm)(i,{class:"mx-1",variant:"primary",onClick:n.HandleSaveButtonClicked},{default:(0,o.w5)((()=>[(0,o.Uk)("儲存")])),_:1},8,["onClick"]),(0,o.Wm)(i,{class:"mx-1",variant:"danger",onClick:t[0]||(t[0]=e=>n.closeDrawer())},{default:(0,o.w5)((()=>[(0,o.Uk)("離開")])),_:1})])]),(0,o.Wm)(d),(0,o._)("div",T,[(0,o._)("div",E,[(0,o.Wm)(h,{"label-width":"100px","label-position":"left",style:{width:"400px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Basic")])),_:1}),(0,o.Wm)(u,{label:"RACK名稱"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"add-rack-input",modelValue:r.rackOptions.Name,"onUpdate:modelValue":t[1]||(t[1]=e=>r.rackOptions.Name=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"IP"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"add-rack-input",modelValue:r.rackOptions.ConnOptions.IP,"onUpdate:modelValue":t[2]||(t[2]=e=>r.rackOptions.ConnOptions.IP=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(u,{label:"Port"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{class:"add-rack-input",modelValue:r.rackOptions.ConnOptions.Port,"onUpdate:modelValue":t[3]||(t[3]=e=>r.rackOptions.ConnOptions.Port=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Layout")])),_:1}),(0,o.Wm)(u,{label:"Row(層數)"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{min:1,class:"add-rack-input",modelValue:r.rackOptions.Rows,"onUpdate:modelValue":t[4]||(t[4]=e=>r.rackOptions.Rows=e),onInput:n.HandleRowChanged},null,8,["modelValue","onInput"])])),_:1}),(0,o.Wm)(u,{label:"Col"},{default:(0,o.w5)((()=>[(0,o._)("div",B,[(0,o.Wm)(m,{min:1,class:"add-rack-input",modelValue:r.rackOptions.Columns,"onUpdate:modelValue":t[5]||(t[5]=e=>r.rackOptions.Columns=e),onInput:n.HandleColChanged},null,8,["modelValue","onInput"]),(0,o.Wm)(w,{placement:"bottom-end",modelValue:r.colRowSelectorShow,"onUpdate:modelValue":t[7]||(t[7]=e=>r.colRowSelectorShow=e),width:"400",trigger:"click"},{reference:(0,o.w5)((()=>[G])),default:(0,o.w5)((()=>[(0,o.Wm)(p,{maxRowNum:3,onOnSelected:t[6]||(t[6]=t=>{this.colRowSelectorShow=e.fasle,this.rackOptions.Rows=t.col,this.rackOptions.Columns=t.row})})])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Developer")])),_:1}),(0,o.Wm)(u,{label:"模擬"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{class:"add-rack-input",modelValue:r.rackOptions.IsEmulation,"onUpdate:modelValue":t[8]||(t[8]=e=>r.rackOptions.IsEmulation=e)},null,8,["modelValue"])])),_:1})])),_:1})]),(0,o._)("div",K,[(0,o.Wm)(d,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Input Address and Tags")])),_:1}),(0,o.Wm)(b,{ref:"rack_edit",rackName:a.wipName,showIOLocationEdit:!0},null,8,["rackName"])])])])])),_:1},8,["modelValue","before-close"])}var j=a(10844),z=a(81348),H={components:{Rack:V.Z,ColumnRowSelector:k.Z},props:{wipName:{type:String,default:""}},data(){return{drawerVisible:!1,rackData:{WIPName:"WIP-3",Columns:3,Rows:3,ColumnsTagMap:Object,Ports:Array[9]},rackOptions:{Name:"WIP-",Rows:1,Columns:1,Protocol:0,ConnOptions:{IP:"127.0.0.1",Port:5e3},IsEmulation:!1},beginOptionJson:"",colRowSelectorShow:!1}},methods:{openDrawer(e){e&&Object.assign(this.rackOptions,e),this.beginOptionJson=JSON.stringify(this.rackOptions),this.drawerVisible=!0,setTimeout((()=>{let e=x.jU.getters.WIPData.find((e=>e.WIPName==this.wipName));e&&Object.assign(this.rackData,e);let t=this.$refs["rack_edit"];t.speficRackData=this.rackData}),100)},closeDrawer(){var e=JSON.stringify(this.rackOptions),t=this.beginOptionJson!=e;t?j.T.confirm("設定尚未儲存，確定要離開?","Warning",{type:"warning"}).then((()=>{this.drawerVisible=!1})).catch((()=>{})):this.drawerVisible=!1},HandleRowChanged(e){this.rackData.Rows=e;let t=this.$refs["rack_edit"];t.speficRackData=this.rackData},HandleColChanged(e){this.rackData.Columns=e;let t=this.$refs["rack_edit"];t.speficRackData=this.rackData},HandleSaveButtonClicked(){j.T.confirm("確定要變更RACK設定","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{this.beginOptionJson=JSON.stringify(this.rackOptions),(0,z.z8)({type:"success",message:"Delete completed"})})).catch((()=>{}))}}};const M=(0,W.Z)(H,[["render",$],["__scopeId","data-v-b95f9d14"]]);var L=M,Z={components:{AddRack:y,EditRackVue:L},inject:["tableHeaderStyle"],data(){return{table:[],selectAGVProertyToEdit:{},ShowEditAGVPropertyDrawer:!1,selectedWIPName:""}},computed:{GetRackTableData(){var e=x.jU.getters.WIPOptions;return e},ProtocolText(){return N.ji},AGVMainStatus(){return N.LO},VehicleModels(){return N.uk},drawerText(){return this.selectAGVProertyToEdit.AGV_Name}},methods:{edit_row(e){this.selectAGVProertyToEdit=e,this.ShowEditAGVPropertyDrawer=!0,setTimeout((()=>{this.$refs["AgvPropertyEditor"].UpdatePayload(e)}),1)},async delete_row(e){var t=async()=>{var t=await b.fO.DeleteVehicle(e.AGV_Name);t.confirm?this.$swal.fire({text:"",title:"刪除車輛成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:t.message,title:"刪除車輛失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})};this.$swal.fire({text:"",title:`確定要刪除車輛-${e.AGV_Name}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&t()}))}}};const J=(0,W.Z)(Z,[["render",R]]);var F=J,Y={components:{AddRack:y,RackListTable:F},data(){return{test:"AV"}}};"function"===typeof l["default"]&&(0,l["default"])(Y);const q=(0,W.Z)(Y,[["render",d]]);var Q=q}}]);
//# sourceMappingURL=493.685bac9c.js.map