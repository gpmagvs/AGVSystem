"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[426],{81426:function(e,t,o){o.r(t),o.d(t,{default:function(){return E}});var l=o(79003);const a=e=>((0,l.pushScopeId)("data-v-379e7f83"),e=e(),(0,l.popScopeId)(),e),n={class:"agv-battery-setting d-flex h-100"},r=["textContent"],i={class:"descript mx-2 py-5 border flex-fill bg-light text-start",style:{"font-weight":"bold"}},c=a((()=>(0,l.createElementVNode)("h5",null,"高電量區",-1))),s=a((()=>(0,l.createElementVNode)("div",null,"- 可執行所有任務訂單。",-1))),d=a((()=>(0,l.createElementVNode)("h5",null,"中高電量區",-1))),m=a((()=>(0,l.createElementVNode)("div",null,"- 可執行所有任務訂單。",-1))),u=a((()=>(0,l.createElementVNode)("h5",null,"中低電量區",-1))),p=a((()=>(0,l.createElementVNode)("div",null,"- 當AGV非充電時，可執行所有任務訂單。",-1))),h=a((()=>(0,l.createElementVNode)("div",null,"- 當AGV進行充電時，不允許AGV執行除了充電任務以外的任務訂單。",-1))),f=a((()=>(0,l.createElementVNode)("div",null,"- 等待電量位於中高電量區方可執行所有任務訂單。",-1))),g=a((()=>(0,l.createElementVNode)("h5",null,"低電量區",-1))),b=a((()=>(0,l.createElementVNode)("div",null,"- 當AGV低電量時將無法進行除充電任務以外的所有任務訂單。",-1))),v=a((()=>(0,l.createElementVNode)("div",null,"- 運轉模式下，系統會強制AGV進行充電。",-1)));function y(e,t,o,a,y,V){const w=(0,l.resolveComponent)("el-input-number"),N=(0,l.resolveComponent)("el-table-column"),C=(0,l.resolveComponent)("el-table"),x=(0,l.resolveComponent)("el-card"),k=(0,l.resolveComponent)("el-timeline-item"),S=(0,l.resolveComponent)("el-timeline");return(0,l.openBlock)(),(0,l.createElementBlock)("div",n,[(0,l.createVNode)(C,{class:"w-50 mx-1","header-cell-style":e.tableHeaderStyle,size:"large",border:"",data:e.datas},{default:(0,l.withCtx)((()=>[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(e.columnMap,(t=>((0,l.openBlock)(),(0,l.createBlock)(N,{key:t.prop,label:t.label,prop:t.prop},{default:(0,l.withCtx)((o=>["string"==t.type?((0,l.openBlock)(),(0,l.createElementBlock)("div",{key:0,textContent:(0,l.toDisplayString)(o.row[t.prop]),class:""},null,8,r)):(0,l.createCommentVNode)("",!0),"number"==t.type?((0,l.openBlock)(),(0,l.createBlock)(w,{key:1,modelValue:o.row[t.prop],"onUpdate:modelValue":e=>o.row[t.prop]=e,onChange:t=>e.modify(o.row,o.row.agvName)},null,8,["modelValue","onUpdate:modelValue","onChange"])):(0,l.createCommentVNode)("",!0)])),_:2},1032,["label","prop"])))),128))])),_:1},8,["header-cell-style","data"]),(0,l.createElementVNode)("div",i,[(0,l.createVNode)(S,{class:"bat-timeline",style:{"max-width":"600px"}},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(k,{timestamp:"100%",placement:"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(x,{class:"bg-success text-light"},{default:(0,l.withCtx)((()=>[c,s])),_:1})])),_:1}),(0,l.createVNode)(k,{timestamp:"高電量",placement:"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(x,{class:"bg-success text-light"},{default:(0,l.withCtx)((()=>[d,m])),_:1})])),_:1}),(0,l.createVNode)(k,{timestamp:"中電量",placement:"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(x,{class:"text-light",style:{"background-color":"orange"}},{default:(0,l.withCtx)((()=>[u,p,h,f])),_:1})])),_:1}),(0,l.createVNode)(k,{timestamp:"低電量-強制充電",placement:"top"},{default:(0,l.withCtx)((()=>[(0,l.createVNode)(x,{class:"bg-danger text-light"},{default:(0,l.withCtx)((()=>[g,b,v])),_:1})])),_:1}),(0,l.createVNode)(k,{timestamp:"0%",placement:"top"})])),_:1})])])}var V=o(47327),w=o(26666),N=o(38418);class C{constructor(e,t,o){(0,V.Z)(this,"label",void 0),(0,V.Z)(this,"prop",void 0),(0,V.Z)(this,"type",void 0),this.label=e,this.prop=t,this.type=o}}var x=(0,l.defineComponent)({inject:["tableHeaderStyle"],data(){return{datas:[],columnMap:[new C("車輛名稱","agvName","string"),new C("低電量-強制充電(%)","lowLevel","number"),new C("中電量(%)","middleLevel","number"),new C("高電量(%)","highLevel","number")],throttleState:{isOperating:!1,tout:setTimeout((()=>{}),1),postModifiedValToBackend(e){clearTimeout(this.tout),this.tout=setTimeout((async()=>{console.log(e);try{var t=await N.bh.ModifySetting(e.agvName,e);console.info(t),w.bM.success({message:`已完成 ${e.agvName} 電量管理參數修改`,position:"top-right",duration:2e3})}catch(o){w.bM.error({message:`${e.agvName} 電量管理參數修改失敗-${o}`,position:"top-right",duration:2e3})}}),500)},cancelLastOperate(){}}}},methods:{fetchSettings(){setTimeout((async()=>{try{var e=await N.bh.GetSettings();Object.assign(this.datas,e)}catch(t){w.bM.error({message:`電量管理參數下載失敗-${t}`,position:"top-right",duration:-1})}}),100)},modify(e,t){this.throttleState.postModifiedValToBackend(e)}},mounted(){this.fetchSettings()}}),k=o(40089);const S=(0,k.Z)(x,[["render",y],["__scopeId","data-v-379e7f83"]]);var E=S},47327:function(e,t,o){function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}o.d(t,{Z:function(){return r}});o(21703);function a(e,t){if("object"!==l(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,t||"default");if("object"!==l(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function n(e){var t=a(e,"string");return"symbol"===l(t)?t:String(t)}function r(e,t,o){return t=n(t),t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}}}]);
//# sourceMappingURL=426.f2c1b5a4.js.map