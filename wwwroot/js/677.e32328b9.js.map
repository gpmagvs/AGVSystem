{"version":3,"file":"js/677.e32328b9.js","mappings":"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","sources":["webpack://gpm_agvs/./src/components/SystemSettings/UserManager.vue","webpack://gpm_agvs/./src/components/SystemSettings/OperatieButtonSet.vue","webpack://gpm_agvs/./src/components/SystemSettings/OperatieButtonSet.vue?32bf","webpack://gpm_agvs/./src/components/SystemSettings/UserManager.vue?a50e"],"sourcesContent":["<template>\r\n  <div class=\"user-manager\">\r\n    <div class=\"d-flex flex-row\">\r\n      <OperatieButtonSet @save=\"SaveSetting\" @restore=\"HandleRestoreBtnClicked\"></OperatieButtonSet>\r\n      <span class=\"flex-fill\"></span>\r\n      <el-button\r\n        @click=\"() => {\r\n          NewUser = {\r\n            UserName: '',\r\n            Password: '',\r\n            Role: 1\r\n          },\r\n            AddNewUserDialogShow = true\r\n        }\"\r\n        style=\"font-weight: bold;font-size: 20px;\"\r\n        type=\"primary\"\r\n        size=\"large\">新增使用者</el-button>\r\n    </div>\r\n    <div class=\"border\">\r\n      <el-table :data=\"UserData\" empty-text=\"沒有使用者\" size=\"large\" :header-cell-style=\"tableHeaderStyle\">\r\n        <el-table-column label=\"使用者名稱\" prop=\"UserName\" width=\"180\"></el-table-column>\r\n        <el-table-column label=\"使用者密碼\" prop=\"Password\" width=\"220\">\r\n          <template #default=\"scope\">\r\n            <div>\r\n              <el-input type=\"Password\" v-model=\"scope.row.Password\" show-password></el-input>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"使用者群組\" prop=\"Role\" width=\"180\">\r\n          <template #default=\"scope\">\r\n            <div>\r\n              <el-select v-model=\"scope.row.Role\">\r\n                <el-option\r\n                  v-for=\"role in RoleOptions\"\r\n                  :key=\"role.value\"\r\n                  :value=\"role.value\"\r\n                  :label=\"role.label\"></el-option>\r\n              </el-select>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" min-width=\"120\">\r\n          <template #default=\"scope\">\r\n            <div>\r\n              <el-button @click=\"DeleteUser(scope.row)\" type=\"danger\">刪除</el-button>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <el-dialog v-model=\"AddNewUserDialogShow\" width=\"500\" title=\"新增使用者\" draggable>\r\n      <div>\r\n        <el-form>\r\n          <el-form-item label=\"使用者名稱\">\r\n            <el-input v-model=\"NewUser.UserName\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"使用者密碼\">\r\n            <el-input v-model=\"NewUser.Password\" type=\"password\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"使用者群組\">\r\n            <el-select v-model=\"NewUser.Role\">\r\n              <el-option v-for=\"role in RoleOptions\" :key=\"role.value\" :value=\"role.value\" :label=\"role.label\"></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <b-button :disabled=\"NewUser.UserName == '' || NewUser.Password == ''\" @click=\"HandleAddNewUserClick\" class=\"w-100\" variant=\"primary\">新增</b-button>\r\n        </el-form>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport OperatieButtonSet from './OperatieButtonSet.vue'\r\nimport { Modify, GetUsers, Delete, Add } from '@/api/UserAPI'\r\nimport Notifier from '@/api/NotifyHelper'\r\nimport { tableHeaderStyle } from '@/ViewModels/GlobalStyles'\r\nexport default {\r\n  components: {\r\n    OperatieButtonSet,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      tableHeaderStyle,\r\n      AddNewUserDialogShow: false,\r\n      UserData: [\r\n        {\r\n          UserName: \"jinwei\",\r\n          Password: \"1020\",\r\n          Role: 2\r\n        },\r\n        {\r\n          UserName: \"eng\",\r\n          Password: \"tset-pw2\",\r\n          Role: 1\r\n        },\r\n        {\r\n          UserName: \"test\",\r\n          Password: \"tset-pw3\",\r\n          Role: 0\r\n        }\r\n      ],\r\n      NewUser: {\r\n        UserName: \"eng\",\r\n        Password: \"tset-pw2\",\r\n        Role: 1\r\n      },\r\n      OriginUserData: {},\r\n      RoleOptions: [\r\n        {\r\n          label: \"Operator\",\r\n          value: 0\r\n        },\r\n        {\r\n          label: \"工程師\",\r\n          value: 1\r\n        },\r\n        {\r\n          label: \"開發人員\",\r\n          value: 2\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  mounted() {\r\n    this.DownloadUsers();\r\n  },\r\n  methods: {\r\n    async DeleteUser(userDto) {\r\n      this.$swal.fire(\r\n        {\r\n          text: `確定要刪除使用者-${userDto.UserName} ?`,\r\n          title: '刪除使用者',\r\n          icon: 'question',\r\n          showCancelButton: true,\r\n          confirmButtonText: 'OK',\r\n          customClass: 'my-sweetalert'\r\n        }).then(async (res) => {\r\n          if (!res.isConfirmed)\r\n            return;\r\n          await Delete(userDto.UserName);\r\n          this.DownloadUsers();\r\n          Notifier.Danger(`使用者-${userDto.UserName}已刪除`, 'top', 1000);\r\n\r\n        })\r\n    },\r\n    async DownloadUsers() {\r\n      this.UserData = await GetUsers();\r\n      this.SaveAsOriginUserData();\r\n    },\r\n    async SaveSetting() {\r\n      var response = await Modify(this.UserData);\r\n      if (response.Success) {\r\n        Notifier.Success(\"使用者資料修改成功\", 'bottom', 3000);\r\n      } else\r\n        Notifier.Danger(\"使用者資料修改失敗\", 'bottom', 3000);\r\n    },\r\n    async HandleRestoreBtnClicked() {\r\n      this.$swal.fire(\r\n        {\r\n          text: '',\r\n          title: '確定要載入預設值?',\r\n          icon: 'question',\r\n          showCancelButton: true,\r\n          confirmButtonText: 'OK',\r\n          customClass: 'my-sweetalert'\r\n        }).then((res) => {\r\n          if (!res.isConfirmed)\r\n            return\r\n          this.DownloadUsers();\r\n          Notifier.Success(\"使用者資料已重新載入\", 'top', 2000);\r\n        })\r\n    },\r\n    SaveAsOriginUserData() {\r\n      this.OriginUserData = JSON.parse(JSON.stringify(this.UserData));\r\n    },\r\n    async HandleAddNewUserClick() {\r\n      var result = await Add(this.NewUser);\r\n      this.AddNewUserDialogShow = false;\r\n      if (!result.Success) {\r\n        this.$swal.fire(\r\n          {\r\n            text: `${result.Message}`,\r\n            title: `使用者新增失敗`,\r\n            icon: 'warning',\r\n            showCancelButton: false,\r\n            confirmButtonText: 'OK',\r\n            customClass: 'my-sweetalert'\r\n          }).then(() => {\r\n            this.AddNewUserDialogShow = true;\r\n          })\r\n      } else {\r\n        this.$swal.fire(\r\n          {\r\n            text: '',\r\n            title: `使用者 ${this.NewUser.UserName}-新增成功`,\r\n            icon: 'success',\r\n            showCancelButton: false,\r\n            confirmButtonText: 'OK',\r\n            customClass: 'my-sweetalert'\r\n          })\r\n      }\r\n      this.DownloadUsers();\r\n\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n.user-manager {}\r\n</style>","<template>\r\n  <div class=\"save-default-buttons-group border-bottom bg-default text-start\">\r\n    <el-button @click=\"HandleSaveBtnClick\" type=\"primary\" size=\"large\">儲存</el-button>\r\n    <el-button @click=\"HandleRestoreBtnClick\" type=\"danger\" size=\"large\">預設值</el-button>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  methods: {\r\n    HandleRestoreBtnClick() {\r\n      this.$emit('restore', \"\");\r\n    },\r\n    HandleSaveBtnClick() {\r\n      this.$emit('save', \"\");\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.save-default-buttons-group {\r\n  margin-bottom: 5px;\r\n  padding-bottom: 5px;\r\n  width: 100%;\r\n\r\n  button {\r\n    width: 100px;\r\n    font-weight: bold;\r\n    font-size: 20px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./OperatieButtonSet.vue?vue&type=template&id=6bebdf16&scoped=true\"\nimport script from \"./OperatieButtonSet.vue?vue&type=script&lang=js\"\nexport * from \"./OperatieButtonSet.vue?vue&type=script&lang=js\"\n\nimport \"./OperatieButtonSet.vue?vue&type=style&index=0&id=6bebdf16&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6bebdf16\"]])\n\nexport default __exports__","import { render } from \"./UserManager.vue?vue&type=template&id=07443a9e\"\nimport script from \"./UserManager.vue?vue&type=script&lang=js\"\nexport * from \"./UserManager.vue?vue&type=script&lang=js\"\n\nimport \"./UserManager.vue?vue&type=style&index=0&id=07443a9e&lang=scss\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_OperatieButtonSet","onSave","$options","SaveSetting","onRestore","HandleRestoreBtnClicked","_hoisted_3","_component_el_button","onClick","_cache","$data","NewUser","AddNewUserDialogShow","style","type","size","_hoisted_4","_component_el_table","data","UserData","tableHeaderStyle","_component_el_table_column","label","prop","width","default","_withCtx","scope","_component_el_input","row","Password","$event","_component_el_select","Role","_Fragment","_renderList","RoleOptions","role","_createBlock","_component_el_option","key","value","DeleteUser","_component_el_dialog","title","draggable","_component_el_form","_component_el_form_item","UserName","autocomplete","_component_b_button","disabled","HandleAddNewUserClick","variant","HandleSaveBtnClick","HandleRestoreBtnClick","methods","this","$emit","__exports__","components","OperatieButtonSet","OriginUserData","mounted","DownloadUsers","async","userDto","$swal","fire","text","icon","showCancelButton","confirmButtonText","customClass","then","res","isConfirmed","Delete","Notifier","Danger","GetUsers","SaveAsOriginUserData","response","Modify","Success","JSON","parse","stringify","result","Add","Message","render"],"sourceRoot":""}