"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[191],{92709:function(e,t,o){o.d(t,{LO:function(){return a},ji:function(){return l},uk:function(){return r}});const l={0:"TCP/Socket",1:"RESTFul API"},a={0:{label:"UNKNOWN",labelCN:"未知",color:"rgb(64, 158, 255)"},1:{label:"IDLE",labelCN:"閒置",color:"orange"},2:{label:"RUN",labelCN:"執行",color:"green"},3:{label:"DOWN",labelCN:"當機",color:"red"},4:{label:"Charging",labelCN:"充電",color:"blue"}},r={0:{label:"FORK",labelCN:"叉車",color:"rgb(64, 158, 255)"},1:{label:"YUNTECH-FORK",labelCN:"叉車(雲科)",color:"orange"},2:{label:"INSPECTOIN",labelCN:"巡檢",color:"green"},3:{label:"SUBMARINE",labelCN:"潛盾",color:"red"},4:{label:"PARTS",labelCN:"Parts",color:"blue"}}},88867:function(e,t,o){o.r(t),o.d(t,{default:function(){return I}});var l={};o.r(l);var a=o(79003);const r={class:"racks-manager"},d={class:""},c={class:""};function n(e,t,o,l,n,i){const s=(0,a.resolveComponent)("RackListTable"),u=(0,a.resolveComponent)("b-tab"),m=(0,a.resolveComponent)("AddRack"),V=(0,a.resolveComponent)("b-tabs"),p=(0,a.resolveComponent)("b-card");return(0,a.openBlock)(),(0,a.createElementBlock)("div",r,[(0,a.createVNode)(p,{"no-body":""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(V,{pills:"",vertical:"",justified:"","nav-class":"my-nav","content-class":"my-nav-tabs"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{title:"RACK列表",active:""},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",d,[(0,a.createVNode)(s)])])),_:1}),(0,a.createVNode)(u,{title:"新增RACK"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",c,[(0,a.createVNode)(m)])])),_:1})])),_:1})])),_:1})])}const i=e=>((0,a.pushScopeId)("data-v-77d74552"),e=e(),(0,a.popScopeId)(),e),s={class:"add-rack d-flex w-100"},u={class:"d-flex flex-column"},m=i((()=>(0,a.createElementVNode)("div",{style:{width:"26px"}},[(0,a.createElementVNode)("i",{class:"bi bi-grid-3x3",style:{"font-size":"26px"}})],-1))),V={class:"border-top py-2 text-start"},p={class:"border-start bg-light rack-edit-preview"};function w(e,t,o,l,r,d){const c=(0,a.resolveComponent)("el-divider"),n=(0,a.resolveComponent)("el-input"),i=(0,a.resolveComponent)("el-form-item"),w=(0,a.resolveComponent)("el-option"),h=(0,a.resolveComponent)("el-select"),N=(0,a.resolveComponent)("el-input-number"),C=(0,a.resolveComponent)("ColumnRowSelector"),f=(0,a.resolveComponent)("el-popover"),b=(0,a.resolveComponent)("el-switch"),x=(0,a.resolveComponent)("el-form"),v=(0,a.resolveComponent)("b-button"),y=(0,a.resolveComponent)("Rack");return(0,a.openBlock)(),(0,a.createElementBlock)("div",s,[(0,a.createElementVNode)("div",null,[(0,a.createVNode)(x,{"label-width":"100px","label-position":"left",style:{width:"400px"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("Basic")])),_:1}),(0,a.createVNode)(i,{label:"RACK名稱"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{class:"add-rack-input",modelValue:r.payload.AGV_Name,"onUpdate:modelValue":t[0]||(t[0]=e=>r.payload.AGV_Name=e)},null,8,["modelValue"])])),_:1}),(0,a.createVNode)(i,{label:"車輛類型"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{class:"add-rack-input",modelValue:r.payload.Model,"onUpdate:modelValue":t[1]||(t[1]=e=>r.payload.Model=e)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(w,{label:"叉車 AGV",value:0}),(0,a.createVNode)(w,{label:"巡檢 AGV",value:2}),(0,a.createVNode)(w,{label:"潛盾 AGV",value:3}),(0,a.createVNode)(w,{label:"Parts AGV",value:4})])),_:1},8,["modelValue"])])),_:1}),(0,a.createVNode)(i,{label:"通訊方式"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{class:"add-rack-input",modelValue:r.payload.Protocol,"onUpdate:modelValue":t[2]||(t[2]=e=>r.payload.Protocol=e)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(w,{label:"TCP/Socket",value:0}),(0,a.createVNode)(w,{label:"RESTFul API",value:1})])),_:1},8,["modelValue"])])),_:1}),(0,a.createVNode)(i,{label:"IP"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{class:"add-rack-input",modelValue:r.payload.IP,"onUpdate:modelValue":t[3]||(t[3]=e=>r.payload.IP=e)},null,8,["modelValue"])])),_:1}),(0,a.createVNode)(i,{label:"Port"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(n,{class:"add-rack-input",modelValue:r.payload.Port,"onUpdate:modelValue":t[4]||(t[4]=e=>r.payload.Port=e)},null,8,["modelValue"])])),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("Layout")])),_:1}),(0,a.createVNode)(i,{label:"Row"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(N,{min:1,class:"add-rack-input",modelValue:r.payload.row,"onUpdate:modelValue":t[5]||(t[5]=e=>r.payload.row=e)},null,8,["modelValue"])])),_:1}),(0,a.createVNode)(i,{label:"Col"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",u,[(0,a.createVNode)(N,{min:1,class:"add-rack-input",modelValue:r.payload.col,"onUpdate:modelValue":t[6]||(t[6]=e=>r.payload.col=e)},null,8,["modelValue"]),(0,a.createVNode)(f,{placement:"bottom-end",modelValue:r.colRowSelectorShow,"onUpdate:modelValue":t[8]||(t[8]=e=>r.colRowSelectorShow=e),width:"400",trigger:"click"},{reference:(0,a.withCtx)((()=>[m])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{maxRowNum:3,onOnSelected:t[7]||(t[7]=t=>{this.colRowSelectorShow=e.fasle,this.payload.col=t.col,this.payload.row=t.row})})])),_:1},8,["modelValue"])])])),_:1}),(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("Developer")])),_:1}),(0,a.createVNode)(i,{label:"模擬"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(b,{class:"add-rack-input",modelValue:r.payload.Simulation,"onUpdate:modelValue":t[9]||(t[9]=e=>r.payload.Simulation=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,a.createElementVNode)("div",V,[(0,a.createVNode)(v,{onClick:t[10]||(t[10]=e=>d.IsEditMode?d.EditVehicle():d.AddVehicle()),variant:"primary",loading:r.adding,style:{width:"120px"}},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(d.btnText),1)])),_:1},8,["loading"])])]),(0,a.createElementVNode)("div",p,[(0,a.createTextVNode)("Preview "),(0,a.createVNode)(y,{rackName:"WIP-1",isEdit:!0,editProps:r.payload},null,8,["editProps"])])])}var h=o(38418),N=o(86117),C=o(90451),f={components:{Rack:C.Z,ColumnRowSelector:N.Z},props:{mode:{type:String,default:"add"}},computed:{IsEditMode(){return"edit"==this.mode},btnText(){return this.IsEditMode?"修改":"新增"}},data(){return{payload:{AGV_Name:"WIP-",Model:3,Protocol:0,IP:"127.0.0.1",Port:7025,row:3,col:3,Simulation:!1},oriAGVID:"",adding:!1,colRowSelectorShow:!1}},methods:{async AddVehicle(){this.adding=!0;var e=await h.fO.AddVehicle(this.payload);this.adding=!1,e.confirm?this.$swal.fire({text:"",title:"新增成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"top-most-sweetalert"}):this.$swal.fire({text:e.message,title:"新增失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"top-most-sweetalert"})},async EditVehicle(){var e=await h.fO.EditVehicle(this.payload,this.oriAGVID);e.confirm?this.$swal.fire({text:"",title:"修改成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:e.message,title:"修改失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},UpdatePayload(e){this.payload=e,this.oriAGVID=e.AGV_Name}}},b=o(40089);const x=(0,b.Z)(f,[["render",w],["__scopeId","data-v-77d74552"]]);var v=x;const y={class:"vehicle-list-table"},_={class:"text-start"},A={class:""};function S(e,t,o,l,r,d){const c=(0,a.resolveComponent)("el-table-column"),n=(0,a.resolveComponent)("el-tag"),i=(0,a.resolveComponent)("el-checkbox"),s=(0,a.resolveComponent)("el-button"),u=(0,a.resolveComponent)("el-table"),m=(0,a.resolveComponent)("AddRack"),V=(0,a.resolveComponent)("el-drawer");return(0,a.openBlock)(),(0,a.createElementBlock)("div",y,[(0,a.createVNode)(u,{"header-cell-class-name":"my-el-table-cell-class","header-row-class-name":"my-el-table-row-class","row-key":"AGV_Name",border:"",data:d.GetAGVStatesData,style:{width:"100%"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{label:"AGV ID",prop:"AGV_Name"}),(0,a.createVNode)(c,{label:"類型",prop:"Model"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(n,{effect:"dark"},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(d.VehicleModels[e.row.Model].labelCN),1)])),_:2},1024)])),_:1}),(0,a.createVNode)(c,{label:"當前狀態",prop:"MainStatus"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(n,{effect:"dark",color:d.AGVMainStatus[e.row.MainStatus].color},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(d.AGVMainStatus[e.row.MainStatus].label),1)])),_:2},1032,["color"])])),_:1}),(0,a.createVNode)(c,{label:"當前位置",prop:"CurrentLocation"}),(0,a.createVNode)(c,{label:"通訊方式",prop:"Protocol"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(n,null,{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(d.ProtocolText[e.row.Protocol]),1)])),_:2},1024)])),_:1}),(0,a.createVNode)(c,{label:"IP",prop:"IP"}),(0,a.createVNode)(c,{label:"PORT",prop:"Port"}),(0,a.createVNode)(c,{label:"車長(cm)",prop:"VehicleLength"}),(0,a.createVNode)(c,{label:"車寬(cm)",prop:"VehicleWidth"}),(0,a.createVNode)(c,{label:"啟用模擬",prop:"Simulation"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(i,{disabled:!0,modelValue:e.row.Simulation,"onUpdate:modelValue":t=>e.row.Simulation=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,a.createVNode)(c,{fixed:"right",label:"Operations",width:"160"},{default:(0,a.withCtx)((e=>[(0,a.createVNode)(s,{type:"success",size:"small",onClick:(0,a.withModifiers)((t=>d.edit_row(e.row)),["prevent"])},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" 編輯 ")])),_:2},1032,["onClick"]),(0,a.createVNode)(s,{type:"danger",size:"small",onClick:(0,a.withModifiers)((t=>d.delete_row(e.row)),["prevent"])},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" 刪除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),(0,a.createVNode)(V,{"z-index":"1",modelValue:r.ShowEditAGVPropertyDrawer,"onUpdate:modelValue":t[0]||(t[0]=e=>r.ShowEditAGVPropertyDrawer=e)},{header:(0,a.withCtx)((({})=>[(0,a.createElementVNode)("h3",_,(0,a.toDisplayString)(d.drawerText),1)])),default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",A,[(0,a.createVNode)(m,{ref:"AgvPropertyEditor",mode:"edit"},null,512)])])),_:1},8,["modelValue"])])}var k=o(24239),P=o(92709),g={components:{AddRack:v},data(){return{table:[],selectAGVProertyToEdit:{},ShowEditAGVPropertyDrawer:!1}},computed:{GetAGVStatesData(){return k.sn.getters.AGVStatesData},ProtocolText(){return P.ji},AGVMainStatus(){return P.LO},VehicleModels(){return P.uk},drawerText(){return this.selectAGVProertyToEdit.AGV_Name}},methods:{edit_row(e){this.selectAGVProertyToEdit=e,this.ShowEditAGVPropertyDrawer=!0,setTimeout((()=>{this.$refs["AgvPropertyEditor"].UpdatePayload(e)}),1)},async delete_row(e){var t=async()=>{var t=await h.fO.DeleteVehicle(e.AGV_Name);t.confirm?this.$swal.fire({text:"",title:"刪除車輛成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:t.message,title:"刪除車輛失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})};this.$swal.fire({text:"",title:`確定要刪除車輛-${e.AGV_Name}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&t()}))}}};const T=(0,b.Z)(g,[["render",S]]);var E=T,G={components:{AddRack:v,RackListTable:E},data(){return{test:"AV"}}};"function"===typeof l["default"]&&(0,l["default"])(G);const R=(0,b.Z)(G,[["render",n]]);var I=R}}]);
//# sourceMappingURL=191.8e1f50a6.js.map