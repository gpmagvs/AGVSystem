"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[388],{92709:function(e,l,t){t.d(l,{LO:function(){return o},ji:function(){return a},uk:function(){return r}});const a={0:"TCP/Socket",1:"RESTFul API"},o={0:{label:"UNKNOWN",labelCN:"未知",color:"rgb(64, 158, 255)"},1:{label:"IDLE",labelCN:"閒置",color:"orange"},2:{label:"RUN",labelCN:"執行",color:"green"},3:{label:"DOWN",labelCN:"當機",color:"red"},4:{label:"Charging",labelCN:"充電",color:"#0d6efd"}},r={0:{label:"FORK",labelCN:"叉車",color:"rgb(64, 158, 255)"},1:{label:"YUNTECH-FORK",labelCN:"叉車(雲科)",color:"orange"},2:{label:"INSPECTOIN",labelCN:"巡檢",color:"green"},3:{label:"SUBMARINE",labelCN:"潛盾",color:"red"},4:{label:"PARTS",labelCN:"Parts",color:"blue"}}},67163:function(e,l,t){t.d(l,{Z:function(){return u}});var a=t(66252),o=t(3577);const r=["onMousemove"],d=["onMousemove"];function s(e,l,t,s,n,i){return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",{class:"table-selector",onMouseleave:l[0]||(l[0]=()=>{n.selectedRows=n.selectedCols=0}),onMousemove:l[1]||(l[1]=(...l)=>e.handleMouseMove&&e.handleMouseMove(...l)),onClick:l[2]||(l[2]=(...e)=>i.handleClick&&i.handleClick(...e))},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.maxColNum,(e=>((0,a.wg)(),(0,a.iD)("div",{key:e,onMousemove:l=>i.HandleMoseMoveOnRow(l,e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.maxRowNum,(l=>((0,a.wg)(),(0,a.iD)("div",{class:(0,o.C_)(["cell d-flex",{selected:i.isSelected(e,l)}]),key:l,onMousemove:e=>i.HandleMoseMoveOnColumn(e,l)},null,42,d)))),128))],40,r)))),128))],32),(0,a._)("p",null,"選擇了 "+(0,o.zw)(n.selectedRows)+" 行 和 "+(0,o.zw)(n.selectedCols)+" 列 的表格",1)])}var n={props:{maxRowNum:{type:Number,default:6},maxColNum:{type:Number,default:10}},data(){return{selectedRows:0,selectedCols:0,hoverIndex:0}},methods:{isSelected(e,l){return l<=this.selectedRows&&e<=this.selectedCols},HandleMoseMoveOnRow(e,l){e.target;this.selectedCols=l},HandleMoseMoveOnColumn(e,l){e.target;this.selectedRows=l},handleClick(){this.$emit("on-selected",{row:this.selectedRows,col:this.selectedCols})}}},i=t(83744);const c=(0,i.Z)(n,[["render",s],["__scopeId","data-v-1578eb4a"]]);var u=c},81388:function(e,l,t){t.r(l),t.d(l,{default:function(){return K}});var a={};t.r(a);var o=t(66252);const r={class:"racks-manager"},d={class:""},s={class:""};function n(e,l,t,a,n,i){const c=(0,o.up)("RackListTable"),u=(0,o.up)("b-tab"),m=(0,o.up)("AddRack"),p=(0,o.up)("b-tabs"),w=(0,o.up)("b-card");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(w,{"no-body":""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{pills:"",vertical:"",justified:"","nav-class":"my-nav","content-class":"my-nav-tabs"},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{title:"RACK列表",active:""},{default:(0,o.w5)((()=>[(0,o._)("div",d,[(0,o.Wm)(c)])])),_:1}),(0,o.Wm)(u,{title:"新增RACK"},{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o.Wm)(m)])])),_:1})])),_:1})])),_:1})])}var i=t(3577);const c=e=>((0,o.dD)("data-v-15a08cb2"),e=e(),(0,o.Cn)(),e),u={class:"add-rack d-flex w-100"},m={class:"d-flex flex-column"},p=c((()=>(0,o._)("div",{style:{width:"26px"}},[(0,o._)("i",{class:"bi bi-grid-3x3",style:{"font-size":"26px"}})],-1))),w={class:"border-top py-2 text-start"},h={class:"border-start bg-light rack-edit-preview"};function f(e,l,t,a,r,d){const s=(0,o.up)("el-divider"),n=(0,o.up)("el-input"),c=(0,o.up)("el-form-item"),f=(0,o.up)("el-input-number"),b=(0,o.up)("ColumnRowSelector"),v=(0,o.up)("el-popover"),V=(0,o.up)("el-switch"),y=(0,o.up)("el-form"),C=(0,o.up)("b-button"),k=(0,o.up)("Rack");return(0,o.wg)(),(0,o.iD)("div",u,[(0,o._)("div",null,[(0,o.Wm)(y,{"label-width":"100px","label-position":"left",style:{width:"400px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Basic")])),_:1}),(0,o.Wm)(c,{label:"RACK名稱"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{class:"add-rack-input",modelValue:r.payload.AGV_Name,"onUpdate:modelValue":l[0]||(l[0]=e=>r.payload.AGV_Name=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{label:"IP"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{class:"add-rack-input",modelValue:r.payload.IP,"onUpdate:modelValue":l[1]||(l[1]=e=>r.payload.IP=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{label:"Port"},{default:(0,o.w5)((()=>[(0,o.Wm)(n,{class:"add-rack-input",modelValue:r.payload.Port,"onUpdate:modelValue":l[2]||(l[2]=e=>r.payload.Port=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Layout")])),_:1}),(0,o.Wm)(c,{label:"Row"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{min:1,class:"add-rack-input",modelValue:r.payload.row,"onUpdate:modelValue":l[3]||(l[3]=e=>r.payload.row=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(c,{label:"Col"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o.Wm)(f,{min:1,class:"add-rack-input",modelValue:r.payload.col,"onUpdate:modelValue":l[4]||(l[4]=e=>r.payload.col=e)},null,8,["modelValue"]),(0,o.Wm)(v,{placement:"bottom-end",modelValue:r.colRowSelectorShow,"onUpdate:modelValue":l[6]||(l[6]=e=>r.colRowSelectorShow=e),width:"400",trigger:"click"},{reference:(0,o.w5)((()=>[p])),default:(0,o.w5)((()=>[(0,o.Wm)(b,{maxRowNum:3,onOnSelected:l[5]||(l[5]=l=>{this.colRowSelectorShow=e.fasle,this.payload.col=l.col,this.payload.row=l.row})})])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Developer")])),_:1}),(0,o.Wm)(c,{label:"模擬"},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{class:"add-rack-input",modelValue:r.payload.Simulation,"onUpdate:modelValue":l[7]||(l[7]=e=>r.payload.Simulation=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,o._)("div",w,[(0,o.Wm)(C,{onClick:l[8]||(l[8]=e=>d.IsEditMode?d.EditVehicle():d.AddVehicle()),variant:"primary",loading:r.adding,style:{width:"120px"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,i.zw)(d.btnText),1)])),_:1},8,["loading"])])]),(0,o._)("div",h,[(0,o.Uk)("Preview "),(0,o.Wm)(k,{rackName:"WIP-1",isEdit:!0,editProps:r.payload},null,8,["editProps"])])])}var b=t(38418),v=t(67163),V=t(8809),y={components:{Rack:V.Z,ColumnRowSelector:v.Z},props:{mode:{type:String,default:"add"}},computed:{IsEditMode(){return"edit"==this.mode},btnText(){return this.IsEditMode?"修改":"新增"}},data(){return{payload:{AGV_Name:"WIP-",Model:3,Protocol:0,IP:"127.0.0.1",Port:7025,row:3,col:3,Simulation:!1},oriAGVID:"",adding:!1,colRowSelectorShow:!1}},methods:{async AddVehicle(){this.adding=!0;var e=await b.fO.AddVehicle(this.payload);this.adding=!1,e.confirm?this.$swal.fire({text:"",title:"新增成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"top-most-sweetalert"}):this.$swal.fire({text:e.message,title:"新增失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"top-most-sweetalert"})},async EditVehicle(){var e=await b.fO.EditVehicle(this.payload,this.oriAGVID);e.confirm?this.$swal.fire({text:"",title:"修改成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:e.message,title:"修改失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},UpdatePayload(e){this.payload=e,this.oriAGVID=e.AGV_Name}}},C=t(83744);const k=(0,C.Z)(y,[["render",f],["__scopeId","data-v-15a08cb2"]]);var _=k,W=t(49963);const g={class:"vehicle-list-table"},N={class:"text-start"},R={class:""};function P(e,l,t,a,r,d){const s=(0,o.up)("el-table-column"),n=(0,o.up)("el-checkbox"),c=(0,o.up)("el-button"),u=(0,o.up)("el-table"),m=(0,o.up)("AddRack"),p=(0,o.up)("el-drawer"),w=(0,o.up)("EditRackVue");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",g,[(0,o.Wm)(u,{data:d.GetRackTableData,size:"large","row-key":"AGV_Name",border:"",style:{width:"100%"},"header-cell-style":d.tableHeaderStyle},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{label:"Rack 名稱",prop:"Name"}),(0,o.Wm)(s,{label:"Row (層數)",prop:"Rows"}),(0,o.Wm)(s,{label:"Column",prop:"Columns"}),(0,o.Wm)(s,{label:"通訊方式",prop:"Protocol"},{default:(0,o.w5)((()=>[(0,o.Uk)("MODBUS/TCP")])),_:1}),(0,o.Wm)(s,{label:"IP",prop:"ConnOptions.IP"}),(0,o.Wm)(s,{label:"PORT",prop:"ConnOptions.Port"}),(0,o.Wm)(s,{label:"啟用模擬",prop:"IsEmulation"},{default:(0,o.w5)((e=>[(0,o.Wm)(n,{disabled:!0,modelValue:e.row.IsEmulation,"onUpdate:modelValue":l=>e.row.IsEmulation=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(s,{fixed:"right",label:"Operations",width:"180"},{default:(0,o.w5)((e=>[(0,o.Wm)(c,{type:"primary",onClick:()=>{r.selectedWIPName=e.row.Name,this.$refs["rackEditor"].openDrawer()}},{default:(0,o.w5)((()=>[(0,o.Uk)("編輯")])),_:2},1032,["onClick"]),(0,o.Wm)(c,{type:"danger",onClick:(0,W.iM)((l=>d.delete_row(e.row)),["prevent"])},{default:(0,o.w5)((()=>[(0,o.Uk)(" 刪除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","header-cell-style"]),(0,o.Wm)(p,{"z-index":"1",modelValue:r.ShowEditAGVPropertyDrawer,"onUpdate:modelValue":l[0]||(l[0]=e=>r.ShowEditAGVPropertyDrawer=e),size:"70%"},{header:(0,o.w5)((({})=>[(0,o._)("h3",N,(0,i.zw)(d.drawerText),1)])),default:(0,o.w5)((()=>[(0,o._)("div",R,[(0,o.Wm)(m,{ref:"AgvPropertyEditor",mode:"edit"},null,512)])])),_:1},8,["modelValue"])]),(0,o.Wm)(w,{ref:"rackEditor",wipName:r.selectedWIPName},null,8,["wipName"])],64)}var x=t(24239),A=t(92709);const S={class:"w-100"};function I(e,l,t,a,r,d){const s=(0,o.up)("Rack"),n=(0,o.up)("el-drawer");return(0,o.wg)(),(0,o.j4)(n,{modelValue:r.drawerVisible,"onUpdate:modelValue":l[0]||(l[0]=e=>r.drawerVisible=e),onClose:d.closeDrawer,size:"50%"},{default:(0,o.w5)((()=>[(0,o._)("div",S,[(0,o.Wm)(s,{rackName:t.wipName},null,8,["rackName"])])])),_:1},8,["modelValue","onClose"])}var E={components:{Rack:V.Z},props:{wipName:{type:String,default:""}},data(){return{drawerVisible:!1}},methods:{openDrawer(){this.drawerVisible=!0},closeDrawer(){this.drawerVisible=!1}}};const O=(0,C.Z)(E,[["render",I]]);var D=O,M={components:{AddRack:_,EditRackVue:D},inject:["tableHeaderStyle"],data(){return{table:[],selectAGVProertyToEdit:{},ShowEditAGVPropertyDrawer:!1,selectedWIPName:""}},computed:{GetRackTableData(){var e=x.jU.getters.WIPOptions;return e},ProtocolText(){return A.ji},AGVMainStatus(){return A.LO},VehicleModels(){return A.uk},drawerText(){return this.selectAGVProertyToEdit.AGV_Name}},methods:{edit_row(e){this.selectAGVProertyToEdit=e,this.ShowEditAGVPropertyDrawer=!0,setTimeout((()=>{this.$refs["AgvPropertyEditor"].UpdatePayload(e)}),1)},async delete_row(e){var l=async()=>{var l=await b.fO.DeleteVehicle(e.AGV_Name);l.confirm?this.$swal.fire({text:"",title:"刪除車輛成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:l.message,title:"刪除車輛失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})};this.$swal.fire({text:"",title:`確定要刪除車輛-${e.AGV_Name}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&l()}))}}};const T=(0,C.Z)(M,[["render",P]]);var U=T,G={components:{AddRack:_,RackListTable:U},data(){return{test:"AV"}}};"function"===typeof a["default"]&&(0,a["default"])(G);const B=(0,C.Z)(G,[["render",n]]);var K=B}}]);
//# sourceMappingURL=388.js.map