"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[55],{92709:function(e,l,t){t.d(l,{LO:function(){return o},ji:function(){return a},uk:function(){return d}});const a={0:"TCP/Socket",1:"RESTFul API"},o={0:{label:"UNKNOWN",labelCN:"未知",color:"rgb(64, 158, 255)"},1:{label:"IDLE",labelCN:"閒置",color:"orange"},2:{label:"RUN",labelCN:"執行",color:"green"},3:{label:"DOWN",labelCN:"當機",color:"red"},4:{label:"Charging",labelCN:"充電",color:"blue"}},d={0:{label:"FORK",labelCN:"叉車",color:"rgb(64, 158, 255)"},1:{label:"YUNTECH-FORK",labelCN:"叉車(雲科)",color:"orange"},2:{label:"INSPECTOIN",labelCN:"巡檢",color:"green"},3:{label:"SUBMARINE",labelCN:"潛盾",color:"red"},4:{label:"PARTS",labelCN:"Parts",color:"blue"}}},33055:function(e,l,t){t.r(l),t.d(l,{default:function(){return x}});var a={};t.r(a);var o=t(66252);const d={class:"vehicles"},r={class:""},i={class:""};function s(e,l,t,a,s,u){const n=(0,o.up)("VehicleListTable"),c=(0,o.up)("b-tab"),m=(0,o.up)("AddVehicle"),p=(0,o.up)("b-tabs"),w=(0,o.up)("b-card");return(0,o.wg)(),(0,o.iD)("div",d,[(0,o.Wm)(w,{"no-body":""},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{pills:"",vertical:"",justified:"","nav-class":"my-nav","content-class":"my-nav-tabs"},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{title:"車輛列表",active:""},{default:(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.Wm)(n)])])),_:1}),(0,o.Wm)(c,{title:"新增車輛"},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.Wm)(m)])])),_:1})])),_:1})])),_:1})])}var u=t(3577);const n={class:"add-vehicle w-100"},c={class:"border-top py-2 text-start"};function m(e,l,t,a,d,r){const i=(0,o.up)("el-divider"),s=(0,o.up)("el-input"),m=(0,o.up)("el-form-item"),p=(0,o.up)("el-option"),w=(0,o.up)("el-select"),h=(0,o.up)("el-switch"),V=(0,o.up)("el-form"),b=(0,o.up)("b-button");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(V,{"label-width":"100px","label-position":"left"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Basic")])),_:1}),(0,o.Wm)(m,{label:"車輛ID"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"add-vehicle-input",modelValue:d.payload.AGV_Name,"onUpdate:modelValue":l[0]||(l[0]=e=>d.payload.AGV_Name=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(m,{label:"車輛顯示名稱"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"add-vehicle-input"})])),_:1}),(0,o.Wm)(m,{label:"車輛類型"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"add-vehicle-input",modelValue:d.payload.Model,"onUpdate:modelValue":l[1]||(l[1]=e=>d.payload.Model=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"叉車 AGV",value:0}),(0,o.Wm)(p,{label:"巡檢 AGV",value:2}),(0,o.Wm)(p,{label:"潛盾 AGV",value:3}),(0,o.Wm)(p,{label:"Parts AGV",value:4})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(m,{label:"通訊方式"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{class:"add-vehicle-input",modelValue:d.payload.Protocol,"onUpdate:modelValue":l[2]||(l[2]=e=>d.payload.Protocol=e)},{default:(0,o.w5)((()=>[(0,o.Wm)(p,{label:"TCP/Socket",value:0}),(0,o.Wm)(p,{label:"RESTFul API",value:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.Wm)(m,{label:"IP"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"add-vehicle-input",modelValue:d.payload.IP,"onUpdate:modelValue":l[3]||(l[3]=e=>d.payload.IP=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(m,{label:"Port"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"add-vehicle-input",modelValue:d.payload.Port,"onUpdate:modelValue":l[4]||(l[4]=e=>d.payload.Port=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Layout")])),_:1}),(0,o.Wm)(m,{label:"車輛長度(cm)"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"add-vehicle-input",modelValue:d.payload.VehicleLength,"onUpdate:modelValue":l[5]||(l[5]=e=>d.payload.VehicleLength=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(m,{label:"車輛寬度(cm)"},{default:(0,o.w5)((()=>[(0,o.Wm)(s,{class:"add-vehicle-input",modelValue:d.payload.VehicleWidth,"onUpdate:modelValue":l[6]||(l[6]=e=>d.payload.VehicleWidth=e)},null,8,["modelValue"])])),_:1}),(0,o.Wm)(i,null,{default:(0,o.w5)((()=>[(0,o.Uk)("Developer")])),_:1}),(0,o.Wm)(m,{label:"模擬"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"add-vehicle-input",modelValue:d.payload.Simulation,"onUpdate:modelValue":l[7]||(l[7]=e=>d.payload.Simulation=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,o._)("div",c,[(0,o.Wm)(b,{onClick:l[8]||(l[8]=e=>r.IsEditMode?r.EditVehicle():r.AddVehicle()),variant:"primary",loading:d.adding,style:{width:"120px"}},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(r.btnText),1)])),_:1},8,["loading"])])])}var p=t(38418),w={props:{mode:{type:String,default:"add"}},computed:{IsEditMode(){return"edit"==this.mode},btnText(){return this.IsEditMode?"修改":"新增"}},data(){return{payload:{AGV_Name:"AGV_",Model:3,Protocol:0,IP:"127.0.0.1",Port:7025,VehicleLength:145,VehicleWidth:70,Simulation:!1},oriAGVID:"",adding:!1}},methods:{async AddVehicle(){this.adding=!0;var e=await p.fO.AddVehicle(this.payload);this.adding=!1,e.confirm?this.$swal.fire({text:"",title:"新增成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"top-most-sweetalert"}):this.$swal.fire({text:e.message,title:"新增失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"top-most-sweetalert"})},async EditVehicle(){var e=await p.fO.EditVehicle(this.payload,this.oriAGVID);e.confirm?this.$swal.fire({text:"",title:"修改成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:e.message,title:"修改失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})},UpdatePayload(e){this.payload=e,this.oriAGVID=e.AGV_Name}}},h=t(83744);const V=(0,h.Z)(w,[["render",m],["__scopeId","data-v-69f9e772"]]);var b=V,f=t(49963);const W={class:"vehicle-list-table"},y={class:"text-start"},_={class:""};function v(e,l,t,a,d,r){const i=(0,o.up)("el-table-column"),s=(0,o.up)("el-tag"),n=(0,o.up)("el-checkbox"),c=(0,o.up)("el-button"),m=(0,o.up)("el-table"),p=(0,o.up)("AddVehicle"),w=(0,o.up)("el-drawer");return(0,o.wg)(),(0,o.iD)("div",W,[(0,o.Wm)(m,{"header-cell-class-name":"my-el-table-cell-class","row-key":"AGV_Name",border:"",data:r.GetAGVStatesData,"header-cell-style":r.tableHeaderStyle,size:"large"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{label:"AGV ID",prop:"AGV_Name"}),(0,o.Wm)(i,{label:"類型",prop:"Model"},{default:(0,o.w5)((e=>[(0,o.Wm)(s,{effect:"dark"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(r.VehicleModels[e.row.Model].labelCN),1)])),_:2},1024)])),_:1}),(0,o.Wm)(i,{label:"當前狀態",prop:"MainStatus"},{default:(0,o.w5)((e=>[(0,o.Wm)(s,{effect:"dark",color:r.AGVMainStatus[e.row.MainStatus].color},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(r.AGVMainStatus[e.row.MainStatus].label),1)])),_:2},1032,["color"])])),_:1}),(0,o.Wm)(i,{label:"當前位置",prop:"CurrentLocation"}),(0,o.Wm)(i,{label:"通訊方式",prop:"Protocol"},{default:(0,o.w5)((e=>[(0,o.Wm)(s,null,{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(r.ProtocolText[e.row.Protocol]),1)])),_:2},1024)])),_:1}),(0,o.Wm)(i,{label:"IP",prop:"IP"}),(0,o.Wm)(i,{label:"PORT",prop:"Port"}),(0,o.Wm)(i,{label:"車長(cm)",prop:"VehicleLength"}),(0,o.Wm)(i,{label:"車寬(cm)",prop:"VehicleWidth"}),(0,o.Wm)(i,{label:"啟用模擬",prop:"Simulation"},{default:(0,o.w5)((e=>[(0,o.Wm)(n,{disabled:!0,modelValue:e.row.Simulation,"onUpdate:modelValue":l=>e.row.Simulation=l},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.Wm)(i,{fixed:"right",label:"Operations",width:"160"},{default:(0,o.w5)((e=>[(0,o.Wm)(c,{type:"success",size:"small",onClick:(0,f.iM)((l=>r.edit_row(e.row)),["prevent"])},{default:(0,o.w5)((()=>[(0,o.Uk)(" 編輯 ")])),_:2},1032,["onClick"]),(0,o.Wm)(c,{type:"danger",size:"small",onClick:(0,f.iM)((l=>r.delete_row(e.row)),["prevent"])},{default:(0,o.w5)((()=>[(0,o.Uk)(" 刪除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","header-cell-style"]),(0,o.Wm)(w,{"z-index":"1",modelValue:d.ShowEditAGVPropertyDrawer,"onUpdate:modelValue":l[0]||(l[0]=e=>d.ShowEditAGVPropertyDrawer=e)},{header:(0,o.w5)((({})=>[(0,o._)("h3",y,(0,u.zw)(r.drawerText),1)])),default:(0,o.w5)((()=>[(0,o._)("div",_,[(0,o.Wm)(p,{ref:"AgvPropertyEditor",mode:"edit"},null,512)])])),_:1},8,["modelValue"])])}var A=t(24239),C=t(92709),P={components:{AddVehicle:b},inject:["tableHeaderStyle"],data(){return{table:[],selectAGVProertyToEdit:{},ShowEditAGVPropertyDrawer:!1}},computed:{GetAGVStatesData(){return A.sn.getters.AGVStatesData},ProtocolText(){return C.ji},AGVMainStatus(){return C.LO},VehicleModels(){return C.uk},drawerText(){return this.selectAGVProertyToEdit.AGV_Name}},methods:{edit_row(e){this.selectAGVProertyToEdit=e,this.ShowEditAGVPropertyDrawer=!0,setTimeout((()=>{this.$refs["AgvPropertyEditor"].UpdatePayload(e)}),1)},async delete_row(e){var l=async()=>{var l=await p.fO.DeleteVehicle(e.AGV_Name);l.confirm?this.$swal.fire({text:"",title:"刪除車輛成功",icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:l.message,title:"刪除車輛失敗",icon:"error",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"})};this.$swal.fire({text:"",title:`確定要刪除車輛-${e.AGV_Name}?`,icon:"warning",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&l()}))}}};const g=(0,h.Z)(P,[["render",v],["__scopeId","data-v-757be098"]]);var G=g,N={components:{AddVehicle:b,VehicleListTable:G},data(){return{test:"AV"}}};"function"===typeof a["default"]&&(0,a["default"])(N);const S=(0,h.Z)(N,[["render",s]]);var x=S}}]);
//# sourceMappingURL=55.cc134676.js.map