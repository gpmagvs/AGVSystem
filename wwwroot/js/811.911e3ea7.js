"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[811],{17811:function(t,a,e){e.r(a),e.d(a,{default:function(){return w}});var r=e(66252);const i={class:"layer-control"},s=(0,r._)("label",null,"Opacity",-1),n=(0,r._)("label",null,"Blur",-1),o=(0,r._)("label",null,"Radius",-1);function l(t,a,e,l,f,u){const c=(0,r.up)("el-slider"),p=(0,r.up)("Map");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",i,[s,(0,r.Wm)(c,{modelValue:f.trafficStateLayerOptions.opacity,"onUpdate:modelValue":a[0]||(a[0]=t=>f.trafficStateLayerOptions.opacity=t),min:0,max:1,step:.01,size:"small"},null,8,["modelValue"]),n,(0,r.Wm)(c,{modelValue:f.trafficStateLayerOptions.blur,"onUpdate:modelValue":a[1]||(a[1]=t=>f.trafficStateLayerOptions.blur=t),min:0,max:50,step:1,size:"small",onInput:u.UpdateTrafficStateLayerOptions},null,8,["modelValue","onInput"]),o,(0,r.Wm)(c,{modelValue:f.trafficStateLayerOptions.radius,"onUpdate:modelValue":a[2]||(a[2]=t=>f.trafficStateLayerOptions.radius=t),min:1,max:50,step:1,size:"small",onInput:u.UpdateTrafficStateLayerOptions},null,8,["modelValue","onInput"])]),(0,r.Wm)(p,{class:"bg-light border",ref:"map",id:"traffic_map",editable:!1,agv_show:!1,station_show:!0,rackInfoShow:!1,eq_lduld_status_show:!1},null,512)])}e(57658);var f=e(59587),u=e(81090),c=e(60188),p=e(9669),d=e.n(p),m=e(663),y=e(90131),S=d().create({baseURL:m.Z.backend_host,headers:{Authorization:(0,y.Kt)()}});class h{constructor(){this.Tag=0,this.Coordination=[0,0],this.Duration=0,this.DurationNormalized=0}}async function L(t,a){var e=await S.get(`/api/TrafficStateData/PointStayStateData?StartTime=${t}&EndTime=${a}`);let r=[new h];return _.merge(r,e.data),r}var g={data(){return{trafficStateLayerOptions:{opacity:1,blur:25,radius:15}}},components:{Map:f["default"]},computed:{map(){return this.$refs.map},trafficStateLayer(){return this.map.TrafficStateLayer}},methods:{UpdateTrafficStateLayerOptions(){this.trafficStateLayer.set("radius",this.trafficStateLayerOptions.radius),this.trafficStateLayer.set("blur",this.trafficStateLayerOptions.blur),this.trafficStateLayer.set("opacity",this.trafficStateLayerOptions.opacity)},UpdateTrafficStateLayer(t=[]){this.trafficStateLayer.getSource().clear(),this.trafficStateLayer.getSource().addFeatures(t)},async Example(){let t=new Date,a=8;t.setHours(t.getHours()+a);let e=new Date(t.getTime()-2592e6),r=await L(e.toISOString(),t.toISOString()),i=[];r.map((t=>{var a=new u.Z({geometry:new c.Z(t.Coordination),weight:t.DurationNormalized});i.push(a)})),this.UpdateTrafficStateLayer(i)}},mounted(){this.Example(),this.trafficStateLayer.set("radius",this.trafficStateLayerOptions.radius),this.trafficStateLayer.set("blur",this.trafficStateLayerOptions.blur),this.trafficStateLayer.set("opacity",this.trafficStateLayerOptions.opacity),this.trafficStateLayer.set("gradient",["rgba(0, 0, 255, 0)","rgba(0, 255, 0, 1)","rgba(255, 255, 0, 1)","rgba(255, 0, 0, 1)"])}},b=e(83744);const O=(0,b.Z)(g,[["render",l]]);var w=O}}]);
//# sourceMappingURL=811.911e3ea7.js.map