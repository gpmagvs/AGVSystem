{"version":3,"file":"js/723.e7555f97.js","mappings":"qPACOA,MAAM,oB,GACJA,MAAM,mB,UAETC,EAAAA,EAAAA,GAA+B,QAAzBD,MAAM,aAAW,W,GAepBA,MAAM,U,UAuDLC,EAAAA,EAAAA,GAAgB,UAAZ,WAAO,K,GACPD,MAAM,a,GAGTE,MAAA,mC,4XA7ETC,EAAAA,EAAAA,IA6GM,MA7GNC,EA6GM,EA5GJH,EAAAA,EAAAA,GAgBM,MAhBNI,EAgBM,EAfJC,EAAAA,EAAAA,IAA8FC,EAAA,CAA1EC,OAAMC,EAAAC,YAAcC,UAASF,EAAAG,yB,+BACjDC,GACAP,EAAAA,EAAAA,IAYkBQ,EAAA,CAXfC,QAAKC,EAAA,KAAAA,EAAA,QAAqBC,EAAAC,QAAO,C,gCAA2GD,EAAAE,sBAAoB,IAQjKjB,MAAA,0CACAkB,KAAK,UACLC,KAAK,S,mBACN,IAAK,UAAL,Y,SAEHpB,EAAAA,EAAAA,GAmDM,MAnDNqB,EAmDM,EAlDJhB,EAAAA,EAAAA,IAiDWiB,EAAA,CAhDRC,KAAMP,EAAAQ,SACP,aAAW,QACXJ,KAAK,QACJ,oBAAmBJ,EAAAS,iBACpBC,OAAA,I,mBAEA,IAA6E,EAA7ErB,EAAAA,EAAAA,IAA6EsB,EAAA,CAA5DC,MAAM,QAAQC,KAAK,WAAWC,MAAM,SACrDzB,EAAAA,EAAAA,IAMkBsB,EAAA,CANDC,MAAM,QAAQC,KAAK,WAAWC,MAAM,O,CACxCC,SAAOC,EAAAA,EAAAA,KAAEC,GAAK,EACvBjC,EAAAA,EAAAA,GAEM,aADJK,EAAAA,EAAAA,IAAgF6B,EAAA,CAAtEf,KAAK,W,WAAoBc,EAAME,IAAIC,S,yBAAVH,EAAME,IAAIC,SAAQC,EAAE,oB,yDAI7DhC,EAAAA,EAAAA,IAakBsB,EAAA,CAbDC,MAAM,QAAQC,KAAK,OAAOC,MAAM,O,CACpCC,SAAOC,EAAAA,EAAAA,KAAEC,GAAK,EACvBjC,EAAAA,EAAAA,GASM,aARJK,EAAAA,EAAAA,IAOYiC,EAAA,C,WAPQL,EAAME,IAAII,K,yBAAVN,EAAME,IAAII,KAAIF,G,mBAE9B,IAA2B,gBAD7BnC,EAAAA,EAAAA,IAKasC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAJIzB,EAAA0B,aAARC,K,WADTC,EAAAA,EAAAA,IAKaC,EAAA,CAHVC,IAAKH,EAAKI,MACVA,MAAOJ,EAAKI,MACZnB,MAAOe,EAAKf,O,kGAMvBvB,EAAAA,EAAAA,IAYkBsB,EAAA,CAZDC,MAAM,KAAK,YAAU,O,CACzBG,SAAOC,EAAAA,EAAAA,KAAEC,GAAK,EACvBjC,EAAAA,EAAAA,GAQM,aAPJK,EAAAA,EAAAA,IAMiBQ,EAAA,CALdC,QAAKA,KAA2BE,EAAAgC,wBAAwBC,SAAShB,EAAME,IAAIe,SAA6BlC,EAAAgC,wBAAwBL,KAAKV,EAAME,IAAII,KAAuBvB,EAAAmC,6BAA2B,I,mBAKnM,IAAI,UAAJ,W,mCAIP9C,EAAAA,EAAAA,IAMkBsB,EAAA,CANDC,MAAM,KAAK,YAAU,O,CACzBG,SAAOC,EAAAA,EAAAA,KAAEC,GAAK,EACvBjC,EAAAA,EAAAA,GAEM,aADJK,EAAAA,EAAAA,IAAsEQ,EAAA,CAA1DC,QAAKuB,GAAE7B,EAAA4C,WAAWnB,EAAME,KAAMhB,KAAK,U,mBAAS,IAAE,UAAF,S,6EAMlEd,EAAAA,EAAAA,IAUYgD,EAAA,C,WAVQrC,EAAAmC,4B,qCAAAnC,EAAAmC,4BAA2Bd,GAAGjB,KAAM,IAAK,eAAa,qB,CAC7DkC,QAAMtB,EAAAA,EAAAA,KACf,EADmBuB,UAASC,gBAAU,EACtCxD,EAAAA,EAAAA,GAGM,YAFJyD,GACAzD,EAAAA,EAAAA,GAAmE,KAAnE0D,EAAsB,KAACC,EAAAA,EAAAA,IAAG3C,EAAAgC,wBAAwBC,UAAW,IAAC,Q,kBAGlE,IAEM,EAFNjD,EAAAA,EAAAA,GAEM,MAFN4D,EAEM,EADJvD,EAAAA,EAAAA,IAA0FwD,EAAA,CAAtEb,wBAAyBhC,EAAAgC,yBAAuB,yC,wBAGxE3C,EAAAA,EAAAA,IA2BYyD,EAAA,C,WA3BQ9C,EAAAE,qB,qCAAAF,EAAAE,qBAAoBmB,GAAEP,MAAM,MAAMiC,MAAM,QAAQC,UAAA,I,mBAClE,IAyBM,EAzBNhE,EAAAA,EAAAA,GAyBM,aAxBJK,EAAAA,EAAAA,IAuBU4D,EAAA,M,kBAtBR,IAEe,EAFf5D,EAAAA,EAAAA,IAEe6D,EAAA,CAFDtC,MAAM,SAAO,C,kBACzB,IAAmE,EAAnEvB,EAAAA,EAAAA,IAAmE6B,EAAA,C,WAAhDlB,EAAAC,QAAQiC,S,qCAARlC,EAAAC,QAAQiC,SAAQb,GAAE8B,aAAa,O,iCAEpD9D,EAAAA,EAAAA,IAEe6D,EAAA,CAFDtC,MAAM,SAAO,C,kBACzB,IAAmF,EAAnFvB,EAAAA,EAAAA,IAAmF6B,EAAA,C,WAAhElB,EAAAC,QAAQmB,S,qCAARpB,EAAAC,QAAQmB,SAAQC,GAAElB,KAAK,WAAWgD,aAAa,O,iCAEpE9D,EAAAA,EAAAA,IASe6D,EAAA,CATDtC,MAAM,SAAO,C,kBACzB,IAOY,EAPZvB,EAAAA,EAAAA,IAOYiC,EAAA,C,WAPQtB,EAAAC,QAAQsB,K,qCAARvB,EAAAC,QAAQsB,KAAIF,I,mBAE5B,IAA2B,gBAD7BnC,EAAAA,EAAAA,IAKasC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAJIzB,EAAA0B,aAARC,K,WADTC,EAAAA,EAAAA,IAKaC,EAAA,CAHVC,IAAKH,EAAKI,MACVA,MAAOJ,EAAKI,MACZnB,MAAOe,EAAKf,O,uEAInBvB,EAAAA,EAAAA,IAKc+D,EAAA,CAJXC,SAA8B,IAApBrD,EAAAC,QAAQiC,UAAsC,IAApBlC,EAAAC,QAAQmB,SAC5CtB,QAAON,EAAA8D,sBACRvE,MAAM,QACNwE,QAAQ,W,mBACT,IAAE,UAAF,S,+ECzGJxE,MAAM,kE,wEAAXG,EAAAA,EAAAA,IAGM,MAHNC,EAGM,EAFJE,EAAAA,EAAAA,IAAoEQ,EAAA,CAAxDC,QAAON,EAAAgE,mBAAoBrD,KAAK,W,mBAAU,IAAE,UAAF,S,qBACtDd,EAAAA,EAAAA,IAAuEQ,EAAA,CAA3DC,QAAON,EAAAiE,sBAAuBtD,KAAK,U,mBAAS,IAAG,UAAH,U,sBAI5D,OACEuD,QAAS,CACPD,wBACEE,KAAKC,MAAM,UAAW,GACxB,EACAJ,qBACEG,KAAKC,MAAM,OAAQ,GACrB,I,WCPJ,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,SCRO9E,MAAM,uB,GACJA,MAAM,mB,iJADbG,EAAAA,EAAAA,IAuBM,MAvBNC,EAuBM,EAtBJH,EAAAA,EAAAA,GAEM,MAFNI,EAEM,EADJC,EAAAA,EAAAA,IAA+FQ,EAAA,CAApFd,MAAA,GAAMoB,KAAK,UAAWL,QAAON,EAAAsE,gBAAkBC,QAAS/D,EAAAgE,U,mBAAU,IAAM,UAAN,a,iCAE/E3E,EAAAA,EAAAA,IAkBU4D,EAAA,CAlBD,iBAAe,OAAO,cAAY,QAAQlE,MAAM,mB,mBAErD,IAAmD,gBADrDG,EAAAA,EAAAA,IAgBMsC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAf4BzB,EAAAiE,oBAAkB,CAA1CC,EAASC,M,WADnBjF,EAAAA,EAAAA,IAgBM,OAdH4C,IAAKqC,EACNpF,MAAM,sB,EACNC,EAAAA,EAAAA,GAA4B,WAAA2D,EAAAA,EAAAA,IAArBuB,EAAQnB,OAAK,kBACpB7D,EAAAA,EAAAA,IAUesC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IATUzB,EAAAoE,kBAAkBD,IAAU,CAA3CpC,EAAOD,M,WADjBF,EAAAA,EAAAA,IAUesB,EAAA,CARZpB,IAAKA,EACLlB,MAAOpB,EAAA6E,eAAevC,I,mBACvB,IAK6B,EAL7BzC,EAAAA,EAAAA,IAK6BiF,EAAA,C,WAJlBtE,EAAAoE,kBAAkBD,GAAYrC,G,yBAA9B9B,EAAAoE,kBAAkBD,GAAYrC,GAAGT,EACzC,eAAc,EACd,iBAAgB,EACjB,eAAa,UACb,iBAAe,W,yIAY3B,GACEkD,MAAO,CACLvC,wBAAyB,CACvB7B,KAAMqE,OACNzD,UACE,MAAO,CACLkB,SAAU,GACVN,MAAO,EAEX,IAGJpB,OACE,MAAO,CACL6D,kBAAmB,IAAIK,EAAAA,GACvBR,mBAAoB,CAClBS,KAAM,CAAE3B,MAAO,QACf4B,iBAAkB,CAAE5B,MAAO,aAC3B6B,2BAA4B,CAAE7B,MAAO,aACrC8B,sBAAuB,CAAE9B,MAAO,cAChC+B,wBAAyB,CAAE/B,MAAO,WAEpCiB,UAAU,EAGd,EACAe,MAAO,CACL/C,wBAAyB,CACvBgD,QAAQC,EAAUC,GAChBC,QAAQC,IAAI,mCAAoCH,IAChDI,EAAAA,EAAAA,IAAsBJ,EAAShD,UAAUqD,MAAKC,IAC5Cf,OAAOgB,OAAO7B,KAAKS,kBAAmBmB,EAAI,GAE9C,EACAE,MAAM,EACNC,WAAW,IAGfhC,QAAS,CACPW,eAAevC,GACb,MAAM6D,EAAe,CAEnB,YAAe,OACf,QAAW,QACX,kBAAqB,OACrB,IAAO,KACP,UAAa,OACb,OAAU,UACV,oBAAuB,OAGvB,YAAe,OACf,aAAgB,OAChB,kBAAqB,SACrB,mBAAsB,SACtB,YAAe,QAGf,uBAA0B,SAC1B,qBAAwB,OACxB,eAAkB,SAClB,eAAkB,OAClB,kBAAqB,QAGrB,cAAiB,SACjB,uBAA0B,SAC1B,iBAAoB,iBACpB,iBAAoB,iBAGpB,aAAgB,OAChB,WAAc,OACd,eAAkB,QAEpB,OAAOA,EAAa7D,IAAQA,CAC9B,EAEA8D,wBACEjC,KAAKK,UAAW,EAChB,IAGE,SAFM6B,EAAAA,EAAAA,IAAuBlC,KAAK3B,wBAAwBC,SAAU0B,KAAKS,mBACzET,KAAKmC,SAASC,QAAQ,aAClBpC,KAAK3B,wBAAwBC,UAAY+D,EAAAA,GAAUC,MAAMC,KAAKhE,SAAU,CAC1E,IAAIiE,EAASC,KAAKC,MAAMD,KAAKE,UAAU3C,KAAKS,oBAC5C4B,EAAAA,GAAUO,OAAO,8BAA+BJ,EAClD,CACF,CAAE,MAAOK,GACPrB,QAAQqB,MAAM,aAAcA,GAC5B7C,KAAKmC,SAASU,MAAM,iBACtB,CAAE,QACA7C,KAAKK,UAAW,CAClB,CACF,ICtHJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,sBJ6GA,GACEyC,WAAY,CACVC,kBAAiB,EAAEtC,kBAAiBA,GAGtC7D,OACE,MAAO,CACLE,iBAAgB,IAChBP,sBAAsB,EACtBiC,6BAA6B,EAC7B3B,SAAU,CACR,CACE0B,SAAU,SACVd,SAAU,OACVG,KAAM,GAER,CACEW,SAAU,MACVd,SAAU,WACVG,KAAM,GAER,CACEW,SAAU,OACVd,SAAU,WACVG,KAAM,IAGVtB,QAAS,CACPiC,SAAU,MACVd,SAAU,WACVG,KAAM,GAERoF,eAAgB,CAAC,EACjBjF,YAAa,CACX,CACEd,MAAO,WACPmB,MAAO,GAET,CACEnB,MAAO,MACPmB,MAAO,GAET,CACEnB,MAAO,OACPmB,MAAO,IAGXC,wBAAyB,CACvBC,SAAU,GACVN,MAAO,GAGb,EACAiF,UACEjD,KAAKkD,eACP,EACAnD,QAAS,CACPkC,iBAAiBkB,GACfnD,KAAKoD,MAAMC,KACT,CACEC,KAAO,YAAWH,EAAQ5E,aAC1Ba,MAAO,QACPmE,KAAM,WACNC,kBAAkB,EAClBC,kBAAmB,KACnBC,YAAa,kBACZ/B,MAAKM,UACDL,EAAI+B,oBAEHC,EAAAA,EAAAA,IAAOT,EAAQ5E,UACrByB,KAAKkD,gBACLW,EAAAA,EAASC,OAAQ,OAAMX,EAAQ5E,cAAe,MAAO,KAAK,GAGhE,EACA0D,sBACEjC,KAAKnD,eAAiBkH,EAAAA,EAAAA,MACtB/D,KAAKgE,sBACP,EACA/B,oBACE,IAAIgC,QAAiBC,EAAAA,EAAAA,IAAOlE,KAAKnD,UAC7BoH,EAASE,QACXN,EAAAA,EAASM,QAAQ,YAAa,SAAU,KAExCN,EAAAA,EAASC,OAAO,YAAa,SAAU,IAC3C,EACA7B,gCACEjC,KAAKoD,MAAMC,KACT,CACEC,KAAM,GACNlE,MAAO,YACPmE,KAAM,WACNC,kBAAkB,EAClBC,kBAAmB,KACnBC,YAAa,kBACZ/B,MAAMC,IACFA,EAAI+B,cAET3D,KAAKkD,gBACLW,EAAAA,EAASM,QAAQ,aAAc,MAAO,KAAK,GAEjD,EACAH,uBACEhE,KAAKgD,eAAiBP,KAAKC,MAAMD,KAAKE,UAAU3C,KAAKnD,UACvD,EACAoF,8BACE,IAAImC,QAAeC,EAAAA,EAAAA,IAAIrE,KAAK1D,SAC5B0D,KAAKzD,sBAAuB,EACvB6H,EAAOD,QAaVnE,KAAKoD,MAAMC,KACT,CACEC,KAAM,GACNlE,MAAQ,OAAMY,KAAK1D,QAAQiC,gBAC3BgF,KAAM,UACNC,kBAAkB,EAClBC,kBAAmB,KACnBC,YAAa,kBAnBjB1D,KAAKoD,MAAMC,KACT,CACEC,KAAO,GAAEc,EAAOE,UAChBlF,MAAQ,UACRmE,KAAM,UACNC,kBAAkB,EAClBC,kBAAmB,KACnBC,YAAa,kBACZ/B,MAAK,KACN3B,KAAKzD,sBAAuB,CAAI,IAatCyD,KAAKkD,eAEP,IKpPJ,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASqB,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://gpm_agvs/./src/components/SystemSettings/UserManager.vue","webpack://gpm_agvs/./src/components/SystemSettings/OperatieButtonSet.vue","webpack://gpm_agvs/./src/components/SystemSettings/OperatieButtonSet.vue?32bf","webpack://gpm_agvs/./src/components/SystemSettings/PermissionSetting.vue","webpack://gpm_agvs/./src/components/SystemSettings/PermissionSetting.vue?8b3c","webpack://gpm_agvs/./src/components/SystemSettings/UserManager.vue?a50e"],"sourcesContent":["<template>\r\n  <div class=\"user-manager p-2\">\r\n    <div class=\"d-flex flex-row\">\r\n      <OperatieButtonSet @save=\"SaveSetting\" @restore=\"HandleRestoreBtnClicked\"></OperatieButtonSet>\r\n      <span class=\"flex-fill\"></span>\r\n      <el-button\r\n        @click=\"() => {\r\n          NewUser = {\r\n            UserName: '',\r\n            Password: '',\r\n            Role: 1\r\n          },\r\n            AddNewUserDialogShow = true\r\n        }\"\r\n        style=\"font-weight: bold;font-size: 16px;\"\r\n        type=\"primary\"\r\n        size=\"large\"\r\n      >新增使用者</el-button>\r\n    </div>\r\n    <div class=\"border\">\r\n      <el-table\r\n        :data=\"UserData\"\r\n        empty-text=\"沒有使用者\"\r\n        size=\"large\"\r\n        :header-cell-style=\"tableHeaderStyle\"\r\n        border\r\n      >\r\n        <el-table-column label=\"使用者名稱\" prop=\"UserName\" width=\"180\"></el-table-column>\r\n        <el-table-column label=\"使用者密碼\" prop=\"Password\" width=\"220\">\r\n          <template #default=\"scope\">\r\n            <div>\r\n              <el-input type=\"Password\" v-model=\"scope.row.Password\" show-password></el-input>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"使用者群組\" prop=\"Role\" width=\"180\">\r\n          <template #default=\"scope\">\r\n            <div>\r\n              <el-select v-model=\"scope.row.Role\">\r\n                <el-option\r\n                  v-for=\"role in RoleOptions\"\r\n                  :key=\"role.value\"\r\n                  :value=\"role.value\"\r\n                  :label=\"role.label\"\r\n                ></el-option>\r\n              </el-select>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" min-width=\"120\">\r\n          <template #default=\"scope\">\r\n            <div>\r\n              <el-button\r\n                @click=\"()=>{\r\n                  PermissionSettingSender.userName=scope.row.UserName;\r\n                  PermissionSettingSender.role=scope.row.Role;\r\n                showPermissionSettingDrawer=true;\r\n              }\"\r\n              >權限設定</el-button>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" min-width=\"120\">\r\n          <template #default=\"scope\">\r\n            <div>\r\n              <el-button @click=\"DeleteUser(scope.row)\" type=\"danger\">刪除</el-button>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n    <el-drawer v-model=\"showPermissionSettingDrawer\" :size=\"600\" custom-class=\"permission-drawer\">\r\n      <template #header=\"{ titleId, titleClass }\">\r\n        <div>\r\n          <h3>使用者權限設定</h3>\r\n          <h4 class=\"user-name\">[{{ PermissionSettingSender.userName }}]</h4>\r\n        </div>\r\n      </template>\r\n      <div style=\"position: relative; top:-60px\">\r\n        <PermissionSetting :PermissionSettingSender=\"PermissionSettingSender\"></PermissionSetting>\r\n      </div>\r\n    </el-drawer>\r\n    <el-dialog v-model=\"AddNewUserDialogShow\" width=\"500\" title=\"新增使用者\" draggable>\r\n      <div>\r\n        <el-form>\r\n          <el-form-item label=\"使用者名稱\">\r\n            <el-input v-model=\"NewUser.UserName\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"使用者密碼\">\r\n            <el-input v-model=\"NewUser.Password\" type=\"password\" autocomplete=\"off\"></el-input>\r\n          </el-form-item>\r\n          <el-form-item label=\"使用者群組\">\r\n            <el-select v-model=\"NewUser.Role\">\r\n              <el-option\r\n                v-for=\"role in RoleOptions\"\r\n                :key=\"role.value\"\r\n                :value=\"role.value\"\r\n                :label=\"role.label\"\r\n              ></el-option>\r\n            </el-select>\r\n          </el-form-item>\r\n          <b-button\r\n            :disabled=\"NewUser.UserName == '' || NewUser.Password == ''\"\r\n            @click=\"HandleAddNewUserClick\"\r\n            class=\"w-100\"\r\n            variant=\"primary\"\r\n          >新增</b-button>\r\n        </el-form>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport OperatieButtonSet from './OperatieButtonSet.vue';\r\nimport PermissionSetting from './PermissionSetting.vue';\r\nimport { Modify, GetUsers, Delete, Add } from '@/api/UserAPI'\r\nimport Notifier from '@/api/NotifyHelper'\r\nimport { tableHeaderStyle } from '@/ViewModels/GlobalStyles'\r\nexport default {\r\n  components: {\r\n    OperatieButtonSet, PermissionSetting\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      tableHeaderStyle,\r\n      AddNewUserDialogShow: false,\r\n      showPermissionSettingDrawer: false,\r\n      UserData: [\r\n        {\r\n          UserName: \"jinwei\",\r\n          Password: \"1020\",\r\n          Role: 2\r\n        },\r\n        {\r\n          UserName: \"eng\",\r\n          Password: \"tset-pw2\",\r\n          Role: 1\r\n        },\r\n        {\r\n          UserName: \"test\",\r\n          Password: \"tset-pw3\",\r\n          Role: 0\r\n        }\r\n      ],\r\n      NewUser: {\r\n        UserName: \"eng\",\r\n        Password: \"tset-pw2\",\r\n        Role: 1\r\n      },\r\n      OriginUserData: {},\r\n      RoleOptions: [\r\n        {\r\n          label: \"Operator\",\r\n          value: 0\r\n        },\r\n        {\r\n          label: \"工程師\",\r\n          value: 1\r\n        },\r\n        {\r\n          label: \"開發人員\",\r\n          value: 2\r\n        }\r\n      ],\r\n      PermissionSettingSender: {\r\n        userName: '',\r\n        role: -1\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.DownloadUsers();\r\n  },\r\n  methods: {\r\n    async DeleteUser(userDto) {\r\n      this.$swal.fire(\r\n        {\r\n          text: `確定要刪除使用者-${userDto.UserName} ?`,\r\n          title: '刪除使用者',\r\n          icon: 'question',\r\n          showCancelButton: true,\r\n          confirmButtonText: 'OK',\r\n          customClass: 'my-sweetalert'\r\n        }).then(async (res) => {\r\n          if (!res.isConfirmed)\r\n            return;\r\n          await Delete(userDto.UserName);\r\n          this.DownloadUsers();\r\n          Notifier.Danger(`使用者-${userDto.UserName}已刪除`, 'top', 1000);\r\n\r\n        })\r\n    },\r\n    async DownloadUsers() {\r\n      this.UserData = await GetUsers();\r\n      this.SaveAsOriginUserData();\r\n    },\r\n    async SaveSetting() {\r\n      var response = await Modify(this.UserData);\r\n      if (response.Success) {\r\n        Notifier.Success(\"使用者資料修改成功\", 'bottom', 3000);\r\n      } else\r\n        Notifier.Danger(\"使用者資料修改失敗\", 'bottom', 3000);\r\n    },\r\n    async HandleRestoreBtnClicked() {\r\n      this.$swal.fire(\r\n        {\r\n          text: '',\r\n          title: '確定要載入預設值?',\r\n          icon: 'question',\r\n          showCancelButton: true,\r\n          confirmButtonText: 'OK',\r\n          customClass: 'my-sweetalert'\r\n        }).then((res) => {\r\n          if (!res.isConfirmed)\r\n            return\r\n          this.DownloadUsers();\r\n          Notifier.Success(\"使用者資料已重新載入\", 'top', 2000);\r\n        })\r\n    },\r\n    SaveAsOriginUserData() {\r\n      this.OriginUserData = JSON.parse(JSON.stringify(this.UserData));\r\n    },\r\n    async HandleAddNewUserClick() {\r\n      var result = await Add(this.NewUser);\r\n      this.AddNewUserDialogShow = false;\r\n      if (!result.Success) {\r\n        this.$swal.fire(\r\n          {\r\n            text: `${result.Message}`,\r\n            title: `使用者新增失敗`,\r\n            icon: 'warning',\r\n            showCancelButton: false,\r\n            confirmButtonText: 'OK',\r\n            customClass: 'my-sweetalert'\r\n          }).then(() => {\r\n            this.AddNewUserDialogShow = true;\r\n          })\r\n      } else {\r\n        this.$swal.fire(\r\n          {\r\n            text: '',\r\n            title: `使用者 ${this.NewUser.UserName}-新增成功`,\r\n            icon: 'success',\r\n            showCancelButton: false,\r\n            confirmButtonText: 'OK',\r\n            customClass: 'my-sweetalert'\r\n          })\r\n      }\r\n      this.DownloadUsers();\r\n\r\n    }\r\n  },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.user-manager {\r\n  .permission-drawer {\r\n    :deep(.el-drawer__header) {\r\n      margin-bottom: 0;\r\n      padding: 16px 20px;\r\n      border-bottom: 1px solid #e4e7ed;\r\n    }\r\n\r\n    .drawer-header {\r\n      display: flex;\r\n      flex-direction: column;\r\n      align-items: center;\r\n\r\n      h4 {\r\n        font-size: 22px;\r\n        color: #303133;\r\n        margin: 0 0 8px 0;\r\n      }\r\n\r\n      .user-name {\r\n        font-size: 21px;\r\n        color: #409eff;\r\n        font-weight: bold;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","<template>\r\n  <div class=\"save-default-buttons-group border-bottom bg-default text-start\">\r\n    <el-button @click=\"HandleSaveBtnClick\" type=\"primary\">儲存</el-button>\r\n    <el-button @click=\"HandleRestoreBtnClick\" type=\"danger\">預設值</el-button>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  methods: {\r\n    HandleRestoreBtnClick() {\r\n      this.$emit('restore', \"\");\r\n    },\r\n    HandleSaveBtnClick() {\r\n      this.$emit('save', \"\");\r\n    }\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.save-default-buttons-group {\r\n  margin-bottom: 5px;\r\n  padding-bottom: 5px;\r\n  width: 100%;\r\n\r\n  button {\r\n    width: 100px;\r\n    font-weight: bold;\r\n    font-size: 20px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./OperatieButtonSet.vue?vue&type=template&id=5df3efc3&scoped=true\"\nimport script from \"./OperatieButtonSet.vue?vue&type=script&lang=js\"\nexport * from \"./OperatieButtonSet.vue?vue&type=script&lang=js\"\n\nimport \"./OperatieButtonSet.vue?vue&type=style&index=0&id=5df3efc3&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5df3efc3\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"permission-settings\">\r\n    <div class=\"text-start py-2\">\r\n      <el-button class type=\"primary\" @click=\"savePermissions\" :loading=\"isSaving\">儲存權限設置</el-button>\r\n    </div>\r\n    <el-form label-position=\"left\" label-width=\"200px\" class=\"permission-form\">\r\n      <div\r\n        v-for=\"(section, sectionKey) in permissionSections\"\r\n        :key=\"sectionKey\"\r\n        class=\"permission-section\">\r\n        <h3>{{ section.title }}</h3>\r\n        <el-form-item\r\n          v-for=\"(value, key) in PermissionSetting[sectionKey]\"\r\n          :key=\"key\"\r\n          :label=\"translateLabel(key)\">\r\n          <el-switch\r\n            v-model=\"PermissionSetting[sectionKey][key]\"\r\n            :active-value=\"1\"\r\n            :inactive-value=\"0\"\r\n            active-color=\"#13ce66\"\r\n            inactive-color=\"#ff4949\" />\r\n        </el-form-item>\r\n      </div>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { GetPermissionSettings, SavePermissionSettings } from '@/api/UserAPI'\r\nimport { WebViewPermission } from '@/api/AuthHelper'\r\nimport { userStore } from '@/store';\r\n\r\n\r\nexport default {\r\n  props: {\r\n    PermissionSettingSender: {\r\n      type: Object,\r\n      default() {\r\n        return {\r\n          userName: '',\r\n          role: -1\r\n        }\r\n      }\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      PermissionSetting: new WebViewPermission(),\r\n      permissionSections: {\r\n        menu: { title: '選單權限' },\r\n        dataQuerySubMenu: { title: '資料查詢子選單權限' },\r\n        systemConfigurationSubMenu: { title: '系統設定子選單權限' },\r\n        systemModesOperations: { title: '系統運行模式操作權限' },\r\n        chargeActionsPermission: { title: '充電操作權限' }\r\n      },\r\n      isSaving: false\r\n    }\r\n\r\n  },\r\n  watch: {\r\n    PermissionSettingSender: {\r\n      handler(newValue, oldValue) {\r\n        console.log('PermissionSettingSender changed:', newValue);\r\n        GetPermissionSettings(newValue.userName).then(res => {\r\n          Object.assign(this.PermissionSetting, res);\r\n        })\r\n      },\r\n      deep: true,\r\n      immediate: true\r\n    }\r\n  },\r\n  methods: {\r\n    translateLabel(key) {\r\n      const translations = {\r\n        // 主菜單權限\r\n        'SystemAlarm': '系統警報',\r\n        'WIPInfo': 'WIP資訊',\r\n        'VehicleManagnment': '車輛管理',\r\n        'Map': '地圖',\r\n        'DataQuery': '資料查詢',\r\n        'HotRun': 'HOT RUN',\r\n        'SystemConfiguration': '系統配置',\r\n\r\n        // 資料查詢子菜單\r\n        'TaskHistory': '任務歷史',\r\n        'AlarmHistory': '警報歷史',\r\n        'VehicleTrajectory': '車輛軌跡查詢',\r\n        'InstrumentsMeasure': '儀器測量查詢',\r\n        'Utilization': '稼動率查詢',\r\n\r\n        // 系統配置子菜單\r\n        'BatteryLevelManagnment': '電池電量管理',\r\n        'EquipmentlManagnment': '設備管理',\r\n        'RackManagnment': 'RACK管理',\r\n        'UserManagnment': '用戶管理',\r\n        'ChargerManagnment': '充電站管理',\r\n\r\n        // 系統運行模式操作權限\r\n        'RunModeSwitch': '運行模式切換',\r\n        'AutoTransferModeSwitch': '派工模式切換',\r\n        'HostOnlineSwitch': 'HOST Online 切換',\r\n        'HostRemoteSwitch': 'HOST Remote 切換',\r\n\r\n        // 充電操作權限\r\n        'NormalCharge': '一搬充電',\r\n        'DeepCharge': '深度充電',\r\n        'StopDeepCharge': '停止深充',\r\n      };\r\n      return translations[key] || key; // 如果沒有翻譯,返回原始key\r\n    },\r\n\r\n    async savePermissions() {\r\n      this.isSaving = true;\r\n      try {\r\n        await SavePermissionSettings(this.PermissionSettingSender.userName, this.PermissionSetting);\r\n        this.$message.success('權限設置已成功儲存');\r\n        if (this.PermissionSettingSender.userName == userStore.state.user.UserName) {\r\n          var _clone = JSON.parse(JSON.stringify(this.PermissionSetting))\r\n          userStore.commit('updateCurrentUserPermission', _clone);\r\n        }\r\n      } catch (error) {\r\n        console.error('保存權限設置時出錯:', error);\r\n        this.$message.error('儲存權限設置失敗，請稍後再試');\r\n      } finally {\r\n        this.isSaving = false;\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n.permission-settings {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n  background-color: #f5f7fa;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.user-name {\r\n  text-align: center;\r\n  color: #409eff;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.permission-form {\r\n  background-color: white;\r\n  padding: 20px;\r\n  border-radius: 4px;\r\n}\r\n\r\n.permission-section {\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.permission-section h3 {\r\n  color: #303133;\r\n  border-bottom: 2px solid #409eff;\r\n  padding-bottom: 10px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.el-form-item {\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.el-form-item__label {\r\n  font-weight: bold;\r\n}\r\n\r\n.el-button {\r\n  margin-top: 20px;\r\n}\r\n</style>","import { render } from \"./PermissionSetting.vue?vue&type=template&id=400d9600&scoped=true\"\nimport script from \"./PermissionSetting.vue?vue&type=script&lang=js\"\nexport * from \"./PermissionSetting.vue?vue&type=script&lang=js\"\n\nimport \"./PermissionSetting.vue?vue&type=style&index=0&id=400d9600&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-400d9600\"]])\n\nexport default __exports__","import { render } from \"./UserManager.vue?vue&type=template&id=6f34ef99&scoped=true\"\nimport script from \"./UserManager.vue?vue&type=script&lang=js\"\nexport * from \"./UserManager.vue?vue&type=script&lang=js\"\n\nimport \"./UserManager.vue?vue&type=style&index=0&id=6f34ef99&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6f34ef99\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_OperatieButtonSet","onSave","$options","SaveSetting","onRestore","HandleRestoreBtnClicked","_hoisted_3","_component_el_button","onClick","_cache","$data","NewUser","AddNewUserDialogShow","type","size","_hoisted_4","_component_el_table","data","UserData","tableHeaderStyle","border","_component_el_table_column","label","prop","width","default","_withCtx","scope","_component_el_input","row","Password","$event","_component_el_select","Role","_Fragment","_renderList","RoleOptions","role","_createBlock","_component_el_option","key","value","PermissionSettingSender","userName","UserName","showPermissionSettingDrawer","DeleteUser","_component_el_drawer","header","titleId","titleClass","_hoisted_5","_hoisted_6","_toDisplayString","_hoisted_7","_component_PermissionSetting","_component_el_dialog","title","draggable","_component_el_form","_component_el_form_item","autocomplete","_component_b_button","disabled","HandleAddNewUserClick","variant","HandleSaveBtnClick","HandleRestoreBtnClick","methods","this","$emit","__exports__","savePermissions","loading","isSaving","permissionSections","section","sectionKey","PermissionSetting","translateLabel","_component_el_switch","props","Object","WebViewPermission","menu","dataQuerySubMenu","systemConfigurationSubMenu","systemModesOperations","chargeActionsPermission","watch","handler","newValue","oldValue","console","log","GetPermissionSettings","then","res","assign","deep","immediate","translations","async","SavePermissionSettings","$message","success","userStore","state","user","_clone","JSON","parse","stringify","commit","error","components","OperatieButtonSet","OriginUserData","mounted","DownloadUsers","userDto","$swal","fire","text","icon","showCancelButton","confirmButtonText","customClass","isConfirmed","Delete","Notifier","Danger","GetUsers","SaveAsOriginUserData","response","Modify","Success","result","Add","Message","render"],"sourceRoot":""}