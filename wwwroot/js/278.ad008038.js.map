{"version":3,"file":"js/278.ad008038.js","mappings":"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","sources":["webpack://gpm_agvs/./src/components/Map/AGVDesigner/AGVDisplaySettings.vue","webpack://gpm_agvs/./src/components/Map/AGVDesigner/AGVDrawSetting.vue","webpack://gpm_agvs/./src/components/Map/AGVDesigner/AGVDrawSetting.vue?2e4f","webpack://gpm_agvs/./src/components/Map/AGVDesigner/AGVDisplaySettings.vue?805c"],"sourcesContent":["\r\n<template>\r\n    <div class=\"agv_show_on_map_design h-100\">\r\n        <el-container class=\"h-100\">\r\n            <el-header class=\"text-start p-2 border\" height=\"50px\">\r\n                <el-button type=\"primary\">儲存設定</el-button>\r\n                <el-button type=\"danger\">取消</el-button>\r\n            </el-header>\r\n            <el-main class=\"bg-light p-2\">\r\n                <AGVDrawSetting agv_name=\"AGV_001\"></AGVDrawSetting>\r\n                <AGVDrawSetting agv_name=\"AGV_002\"></AGVDrawSetting>\r\n            </el-main>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport AGVDrawSetting from './AGVDrawSetting.vue';\r\nexport default {\r\n    components: {\r\n        AGVDrawSetting,\r\n    },\r\n}\r\n</script>\r\n\r\n<style></style>","<!-- 設定AGV在地圖上的顯示 -->\r\n<!-- 可自行設定\r\n    1.AGV顏色 \r\n    2.AGV圖片ICON\r\n    3.框與Tray的圖片\r\n    4.是否要顯示Tray與框的圖示\r\n-->\r\n<template>\r\n    <div class=\"agv_draw_setting \">\r\n        <el-container class=\"h-100 \">\r\n            <el-aside class=\"properties-setting-container border bg-light\" width=\"50%\">\r\n                <div class=\"agv-id w-100 border-bottom mb-1 text-start text-primary\">{{ agv_name }}</div>\r\n                <div class=\"w-100 d-flex flex-row\">\r\n                    <el-form label-width=\"80\" label-position=\"left\">\r\n                        <el-form-item label=\"顯示名稱\">\r\n                            <el-input type=\"text\" size=\"small\" v-model=\"props.DisplayText\" @input=\"(text) => { ChangeTextOfAGV(text) }\"></el-input>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"顏色\">\r\n                            <el-color-picker v-model=\"props.DisplayColor\" @active-change=\"HandleAGVColorClicked\"></el-color-picker>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"ICON\"></el-form-item>\r\n                    </el-form>\r\n                    <el-form class=\"mx-3\" label-width=\"120\" label-position=\"left\">\r\n                        <el-form-item label=\"顯示貨物狀態\">\r\n                            <el-checkbox></el-checkbox>\r\n                        </el-form-item>\r\n                        <el-form-item label=\"貨物-[框]圖示\"></el-form-item>\r\n                        <el-form-item label=\"貨物-[Tray]圖示\"></el-form-item>\r\n                    </el-form>\r\n                </div>\r\n            </el-aside>\r\n            <el-main class=\"border p-1\" style=\"overflow-y: hidden;\">\r\n                <div class=\"text-start text-primary mb-3\">Preview</div>\r\n                <div :id=\"map_id\"\r\n                    class=\"agv-preview-map border w-100\"\r\n                    style=\"height: 200px;\">\r\n                </div>\r\n            </el-main>\r\n        </el-container>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport Map from 'ol/Map.js';\r\nimport Projection from 'ol/proj/Projection.js';\r\nimport View from 'ol/View.js';\r\nimport { Vector as VectorLayer } from 'ol/layer.js';\r\nimport VectorSource from 'ol/source/Vector.js';\r\nimport Feature from 'ol/Feature.js';\r\nimport Point from 'ol/geom/Point.js';\r\nimport { AGVPointStyle, AgvDisplayProps, convertColorNameToRGBA } from '../mapjs'\r\nimport { Circle, Polygon } from 'ol/geom';\r\nimport { Fill, Stroke, Style, Circle as CircleStyle, Text } from 'ol/style';\r\n\r\n\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            map: undefined,\r\n            agv_feature: undefined,\r\n            _agvBodyFeature: undefined,\r\n            _agvSaftyRegionFeature: undefined,\r\n            props: new AgvDisplayProps()\r\n        }\r\n    },\r\n    props: {\r\n        agv_name: {\r\n            type: String,\r\n            default: \"AGV_001\"\r\n        },\r\n        raw_props: {\r\n            type: AgvDisplayProps,\r\n            default() {\r\n                var _props = new AgvDisplayProps()\r\n                return _props\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        map_id() {\r\n            return 'map-agv-preview-' + this.agv_name\r\n        },\r\n        featureStyle() {\r\n            return this.agv_feature.getStyle();\r\n        }\r\n    },\r\n    methods: {\r\n        MapInit() {\r\n            const projection = new Projection({\r\n                code: 'xkcd-image',\r\n                units: 'pixels',\r\n                extent: [-20, -20, 20, 20],\r\n            });\r\n\r\n            this.agv_feature = new Feature({\r\n                geometry: new Point([0, 0])\r\n            })\r\n            this.agv_feature.setStyle(AGVPointStyle(this.raw_props.DisplayText, this.raw_props.DisplayColor))\r\n\r\n            //AGV車體顯示\r\n            const _agvBodyPolygon = new Polygon([[[-3, 4], [3, 4], [3, -4], [-3, -4]]])\r\n            this._agvBodyFeature = new Feature(_agvBodyPolygon)\r\n            this._agvBodyFeature.setStyle(new Style({\r\n                fill: new Fill({ color: convertColorNameToRGBA(this.raw_props.DisplayColor, 0.6) }),\r\n                stroke: new Stroke({\r\n                    color: 'black',\r\n                    width: 1\r\n                })\r\n            }))\r\n            const _agvSaftyCircle = new Circle([0, 0], 5) //TODO 車輛安全區域半徑數據取得\r\n            this._agvSaftyRegionFeature = new Feature(_agvSaftyCircle)\r\n            const safyRegionColor = convertColorNameToRGBA(this.raw_props.DisplayColor, 0.2)\r\n            this._agvSaftyRegionFeature.setStyle(new Style({\r\n                fill: new Fill({ color: safyRegionColor }),\r\n                stroke: new Stroke({\r\n                    color: safyRegionColor, width: 1, lineDash: [5, 2]\r\n                })\r\n            }))\r\n            const layer = new VectorLayer({\r\n                source: new VectorSource({\r\n                    features: [this.agv_feature, this._agvBodyFeature, this._agvSaftyRegionFeature],\r\n                }),\r\n                zIndex: 2\r\n            })\r\n\r\n            this.map = new Map({\r\n                layers: [layer],\r\n                target: this.map_id,\r\n                view: new View({\r\n                    projection: projection,\r\n                    center: [0, 0],\r\n                    zoom: 1,\r\n                    maxZoom: 20\r\n                })\r\n            })\r\n        },\r\n        HandleAGVColorClicked(color) {\r\n            this.props.DisplayColor = color;\r\n            this.ChangeColorOfAGV(color)\r\n        },\r\n        HandleAGVColorSelected(c) {\r\n            alert(c)\r\n        },\r\n        ChangeColorOfAGV(color) {\r\n            this.SetFeatureFillColor(this.agv_feature, color, true);\r\n            this.SetFeatureFillColor(this._agvBodyFeature, convertColorNameToRGBA(color, 0.6));\r\n            this.SetFeatureFillColor(this._agvSaftyRegionFeature, convertColorNameToRGBA(color, 0.2));\r\n        },\r\n        ChangeTextOfAGV(str) {\r\n            var style = this.agv_feature.getStyle();\r\n            var text = style.getText();\r\n            text.setText(str);\r\n            this.agv_feature.setStyle(style)\r\n        },\r\n        SetFeatureFillColor(feature, color, isTextBg = false) {\r\n            var style = feature.getStyle();\r\n            if (isTextBg) {\r\n                var text = style.getText();\r\n                var fill = text.getBackgroundFill()\r\n                fill.setColor(color)\r\n                text.setBackgroundFill(fill);\r\n            } else {\r\n                var fill = style.getFill();\r\n                fill.setColor(color)\r\n                style.setFill(fill);\r\n            }\r\n            feature.setStyle(style)\r\n        }\r\n\r\n    },\r\n    mounted() {\r\n        this.MapInit();\r\n        this.props = JSON.parse(JSON.stringify(this.raw_props))\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.agv_draw_setting {\r\n    height: 215px;\r\n    margin: 5px;\r\n\r\n    .properties-setting-container {\r\n        .agv-id {\r\n            font-size: 24px;\r\n        }\r\n\r\n        padding: 3px 8px;\r\n        border-top-left-radius: 10px;\r\n        border-bottom-left-radius: 4px;\r\n    }\r\n}\r\n</style>","import { render } from \"./AGVDrawSetting.vue?vue&type=template&id=0a56e528&scoped=true\"\nimport script from \"./AGVDrawSetting.vue?vue&type=script&lang=js\"\nexport * from \"./AGVDrawSetting.vue?vue&type=script&lang=js\"\n\nimport \"./AGVDrawSetting.vue?vue&type=style&index=0&id=0a56e528&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0a56e528\"]])\n\nexport default __exports__","import { render } from \"./AGVDisplaySettings.vue?vue&type=template&id=2eebd669\"\nimport script from \"./AGVDisplaySettings.vue?vue&type=script&lang=js\"\nexport * from \"./AGVDisplaySettings.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createVNode","_component_el_container","_component_el_header","height","_component_el_button","type","_component_el_main","_component_AGVDrawSetting","agv_name","_createElementVNode","_component_el_aside","width","_hoisted_2","_toDisplayString","$props","_hoisted_3","_component_el_form","_component_el_form_item","label","_component_el_input","size","$data","props","DisplayText","$event","onInput","_cache","text","$options","ChangeTextOfAGV","_component_el_color_picker","DisplayColor","onActiveChange","HandleAGVColorClicked","_component_el_checkbox","style","_hoisted_4","id","map_id","data","map","undefined","agv_feature","_agvBodyFeature","_agvSaftyRegionFeature","AgvDisplayProps","String","default","raw_props","_props","computed","this","featureStyle","getStyle","methods","MapInit","projection","Projection","code","units","extent","Feature","geometry","Point","setStyle","AGVPointStyle","_agvBodyPolygon","Polygon","Style","fill","Fill","color","convertColorNameToRGBA","stroke","Stroke","_agvSaftyCircle","Circle","safyRegionColor","lineDash","layer","VectorLayer","source","VectorSource","features","zIndex","Map","layers","target","view","View","center","zoom","maxZoom","ChangeColorOfAGV","HandleAGVColorSelected","c","alert","SetFeatureFillColor","str","getText","setText","feature","isTextBg","getBackgroundFill","setColor","setBackgroundFill","getFill","setFill","mounted","JSON","parse","stringify","__exports__","components","AGVDrawSetting","render"],"sourceRoot":""}