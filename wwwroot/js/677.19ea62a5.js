"use strict";(self["webpackChunkgpm_agvs"]=self["webpackChunkgpm_agvs"]||[]).push([[677],{84677:function(e,l,a){a.r(l),a.d(l,{default:function(){return v}});var t=a(66252);const s={class:"user-manager"},o={class:"d-flex flex-row"},r=(0,t._)("span",{class:"flex-fill"},null,-1),n={class:"border"};function d(e,l,a,d,i,u){const w=(0,t.up)("OperatieButtonSet"),m=(0,t.up)("el-button"),c=(0,t.up)("el-table-column"),p=(0,t.up)("el-input"),U=(0,t.up)("el-option"),f=(0,t.up)("el-select"),h=(0,t.up)("el-table"),g=(0,t.up)("el-form-item"),b=(0,t.up)("b-button"),v=(0,t.up)("el-form"),N=(0,t.up)("el-dialog");return(0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("div",o,[(0,t.Wm)(w,{onSave:u.SaveSetting,onRestore:u.HandleRestoreBtnClicked},null,8,["onSave","onRestore"]),r,(0,t.Wm)(m,{onClick:l[0]||(l[0]=()=>{i.NewUser={UserName:"",Password:"",Role:1},i.AddNewUserDialogShow=!0}),style:{"font-weight":"bold","font-size":"20px"},type:"primary",size:"large"},{default:(0,t.w5)((()=>[(0,t.Uk)("新增使用者")])),_:1})]),(0,t._)("div",n,[(0,t.Wm)(h,{data:i.UserData,"empty-text":"沒有使用者",size:"large","header-cell-style":i.tableHeaderStyle},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{label:"使用者名稱",prop:"UserName",width:"180"}),(0,t.Wm)(c,{label:"使用者密碼",prop:"Password",width:"220"},{default:(0,t.w5)((e=>[(0,t._)("div",null,[(0,t.Wm)(p,{type:"Password",modelValue:e.row.Password,"onUpdate:modelValue":l=>e.row.Password=l,"show-password":""},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),(0,t.Wm)(c,{label:"使用者群組",prop:"Role",width:"180"},{default:(0,t.w5)((e=>[(0,t._)("div",null,[(0,t.Wm)(f,{modelValue:e.row.Role,"onUpdate:modelValue":l=>e.row.Role=l},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.RoleOptions,(e=>((0,t.wg)(),(0,t.j4)(U,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])])),_:1}),(0,t.Wm)(c,{label:"操作","min-width":"120"},{default:(0,t.w5)((e=>[(0,t._)("div",null,[(0,t.Wm)(m,{onClick:l=>u.DeleteUser(e.row),type:"danger"},{default:(0,t.w5)((()=>[(0,t.Uk)("刪除")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data","header-cell-style"])]),(0,t.Wm)(N,{modelValue:i.AddNewUserDialogShow,"onUpdate:modelValue":l[4]||(l[4]=e=>i.AddNewUserDialogShow=e),width:"500",title:"新增使用者",draggable:""},{default:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(g,{label:"使用者名稱"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:i.NewUser.UserName,"onUpdate:modelValue":l[1]||(l[1]=e=>i.NewUser.UserName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(g,{label:"使用者密碼"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{modelValue:i.NewUser.Password,"onUpdate:modelValue":l[2]||(l[2]=e=>i.NewUser.Password=e),type:"password",autocomplete:"off"},null,8,["modelValue"])])),_:1}),(0,t.Wm)(g,{label:"使用者群組"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{modelValue:i.NewUser.Role,"onUpdate:modelValue":l[3]||(l[3]=e=>i.NewUser.Role=e)},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(i.RoleOptions,(e=>((0,t.wg)(),(0,t.j4)(U,{key:e.value,value:e.value,label:e.label},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,t.Wm)(b,{disabled:""==i.NewUser.UserName||""==i.NewUser.Password,onClick:u.HandleAddNewUserClick,class:"w-100",variant:"primary"},{default:(0,t.w5)((()=>[(0,t.Uk)("新增")])),_:1},8,["disabled","onClick"])])),_:1})])])),_:1},8,["modelValue"])])}const i={class:"save-default-buttons-group border-bottom bg-default text-start"};function u(e,l,a,s,o,r){const n=(0,t.up)("el-button");return(0,t.wg)(),(0,t.iD)("div",i,[(0,t.Wm)(n,{onClick:r.HandleSaveBtnClick,type:"primary",size:"large"},{default:(0,t.w5)((()=>[(0,t.Uk)("儲存")])),_:1},8,["onClick"]),(0,t.Wm)(n,{onClick:r.HandleRestoreBtnClick,type:"danger",size:"large"},{default:(0,t.w5)((()=>[(0,t.Uk)("預設值")])),_:1},8,["onClick"])])}var w={methods:{HandleRestoreBtnClick(){this.$emit("restore","")},HandleSaveBtnClick(){this.$emit("save","")}}},m=a(83744);const c=(0,m.Z)(w,[["render",u],["__scopeId","data-v-6bebdf16"]]);var p=c,U=a(82106),f=a(93867),h=a(97318),g={components:{OperatieButtonSet:p},data(){return{tableHeaderStyle:h.R,AddNewUserDialogShow:!1,UserData:[{UserName:"jinwei",Password:"1020",Role:2},{UserName:"eng",Password:"tset-pw2",Role:1},{UserName:"test",Password:"tset-pw3",Role:0}],NewUser:{UserName:"eng",Password:"tset-pw2",Role:1},OriginUserData:{},RoleOptions:[{label:"Operator",value:0},{label:"工程師",value:1},{label:"開發人員",value:2}]}},mounted(){this.DownloadUsers()},methods:{async DeleteUser(e){this.$swal.fire({text:`確定要刪除使用者-${e.UserName} ?`,title:"刪除使用者",icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((async l=>{l.isConfirmed&&(await(0,U.HG)(e.UserName),this.DownloadUsers(),f.Z.Danger(`使用者-${e.UserName}已刪除`,"top",1e3))}))},async DownloadUsers(){this.UserData=await(0,U.jf)(),this.SaveAsOriginUserData()},async SaveSetting(){var e=await(0,U.l2)(this.UserData);e.Success?f.Z.Success("使用者資料修改成功","bottom",3e3):f.Z.Danger("使用者資料修改失敗","bottom",3e3)},async HandleRestoreBtnClicked(){this.$swal.fire({text:"",title:"確定要載入預設值?",icon:"question",showCancelButton:!0,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((e=>{e.isConfirmed&&(this.DownloadUsers(),f.Z.Success("使用者資料已重新載入","top",2e3))}))},SaveAsOriginUserData(){this.OriginUserData=JSON.parse(JSON.stringify(this.UserData))},async HandleAddNewUserClick(){var e=await(0,U.mm)(this.NewUser);this.AddNewUserDialogShow=!1,e.Success?this.$swal.fire({text:"",title:`使用者 ${this.NewUser.UserName}-新增成功`,icon:"success",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}):this.$swal.fire({text:`${e.Message}`,title:"使用者新增失敗",icon:"warning",showCancelButton:!1,confirmButtonText:"OK",customClass:"my-sweetalert"}).then((()=>{this.AddNewUserDialogShow=!0})),this.DownloadUsers()}}};const b=(0,m.Z)(g,[["render",d]]);var v=b}}]);
//# sourceMappingURL=677.19ea62a5.js.map